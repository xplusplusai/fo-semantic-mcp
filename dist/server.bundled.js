var Wh=Object.create;var on=Object.defineProperty;var Vh=Object.getOwnPropertyDescriptor;var Zh=Object.getOwnPropertyNames;var Qh=Object.getPrototypeOf,Gh=Object.prototype.hasOwnProperty;var o=(a,e)=>on(a,"name",{value:e,configurable:!0}),ln=(a=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(a,{get:(e,r)=>(typeof require<"u"?require:e)[r]}):a)(function(a){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+a+'" is not supported')});var ms=(a,e)=>()=>(a&&(e=a(a=0)),e);var se=(a,e)=>()=>(e||a((e={exports:{}}).exports,e),e.exports),Il=(a,e)=>{for(var r in e)on(a,r,{get:e[r],enumerable:!0})},Yh=(a,e,r,s)=>{if(e&&typeof e=="object"||typeof e=="function")for(let t of Zh(e))!Gh.call(a,t)&&t!==r&&on(a,t,{get:()=>e[t],enumerable:!(s=Vh(e,t))||s.enumerable});return a};var Bo=(a,e,r)=>(r=a!=null?Wh(Qh(a)):{},Yh(e||!a||!a.__esModule?on(r,"default",{value:a,enumerable:!0}):r,a));var du=se((Dn,cu)=>{(function(a,e){typeof Dn=="object"&&typeof cu<"u"?e(Dn):typeof define=="function"&&define.amd?define(["exports"],e):e(a.URI=a.URI||{})})(Dn,(function(a){"use strict";function e(){for(var w=arguments.length,y=Array(w),x=0;x<w;x++)y[x]=arguments[x];if(y.length>1){y[0]=y[0].slice(0,-1);for(var C=y.length-1,O=1;O<C;++O)y[O]=y[O].slice(1,-1);return y[C]=y[C].slice(1),y.join("")}else return y[0]}o(e,"merge");function r(w){return"(?:"+w+")"}o(r,"subexp");function s(w){return w===void 0?"undefined":w===null?"null":Object.prototype.toString.call(w).split(" ").pop().split("]").shift().toLowerCase()}o(s,"typeOf");function t(w){return w.toUpperCase()}o(t,"toUpperCase");function l(w){return w!=null?w instanceof Array?w:typeof w.length!="number"||w.split||w.setInterval||w.call?[w]:Array.prototype.slice.call(w):[]}o(l,"toArray");function u(w,y){var x=w;if(y)for(var C in y)x[C]=y[C];return x}o(u,"assign");function c(w){var y="[A-Za-z]",x="[\\x0D]",C="[0-9]",O="[\\x22]",U=e(C,"[A-Fa-f]"),ae="[\\x0A]",ve="[\\x20]",me=r(r("%[EFef]"+U+"%"+U+U+"%"+U+U)+"|"+r("%[89A-Fa-f]"+U+"%"+U+U)+"|"+r("%"+U+U)),ze="[\\:\\/\\?\\#\\[\\]\\@]",ge="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",Ce=e(ze,ge),Ne=w?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",Te=w?"[\\uE000-\\uF8FF]":"[]",Se=e(y,C,"[\\-\\.\\_\\~]",Ne),Oe=r(y+e(y,C,"[\\+\\-\\.]")+"*"),Re=r(r(me+"|"+e(Se,ge,"[\\:]"))+"*"),Kt=r(r("25[0-5]")+"|"+r("2[0-4]"+C)+"|"+r("1"+C+C)+"|"+r("[1-9]"+C)+"|"+C),et=r(r("25[0-5]")+"|"+r("2[0-4]"+C)+"|"+r("1"+C+C)+"|"+r("0?[1-9]"+C)+"|0?0?"+C),st=r(et+"\\."+et+"\\."+et+"\\."+et),xe=r(U+"{1,4}"),ut=r(r(xe+"\\:"+xe)+"|"+st),pt=r(r(xe+"\\:")+"{6}"+ut),Tt=r("\\:\\:"+r(xe+"\\:")+"{5}"+ut),Jt=r(r(xe)+"?\\:\\:"+r(xe+"\\:")+"{4}"+ut),nt=r(r(r(xe+"\\:")+"{0,1}"+xe)+"?\\:\\:"+r(xe+"\\:")+"{3}"+ut),Hr=r(r(r(xe+"\\:")+"{0,2}"+xe)+"?\\:\\:"+r(xe+"\\:")+"{2}"+ut),cr=r(r(r(xe+"\\:")+"{0,3}"+xe)+"?\\:\\:"+xe+"\\:"+ut),Xt=r(r(r(xe+"\\:")+"{0,4}"+xe)+"?\\:\\:"+ut),zt=r(r(r(xe+"\\:")+"{0,5}"+xe)+"?\\:\\:"+xe),Qe=r(r(r(xe+"\\:")+"{0,6}"+xe)+"?\\:\\:"),At=r([pt,Tt,Jt,nt,Hr,cr,Xt,zt,Qe].join("|")),er=r(r(Se+"|"+me)+"+"),Ra=r(At+"\\%25"+er),Ct=r(At+r("\\%25|\\%(?!"+U+"{2})")+er),xa=r("[vV]"+U+"+\\."+e(Se,ge,"[\\:]")+"+"),js=r("\\["+r(Ct+"|"+At+"|"+xa)+"\\]"),Ms=r(r(me+"|"+e(Se,ge))+"*"),Wr=r(js+"|"+st+"(?!"+Ms+")|"+Ms),dr=r(C+"*"),xr=r(r(Re+"@")+"?"+Wr+r("\\:"+dr)+"?"),Vr=r(me+"|"+e(Se,ge,"[\\:\\@]")),Ro=r(Vr+"*"),qs=r(Vr+"+"),zs=r(r(me+"|"+e(Se,ge,"[\\@]"))+"+"),Ot=r(r("\\/"+Ro)+"*"),Tr=r("\\/"+r(qs+Ot)+"?"),Ta=r(zs+Ot),Ar=r(qs+Ot),ct="(?!"+Vr+")",Cr=r(Ot+"|"+Tr+"|"+Ta+"|"+Ar+"|"+ct),fr=r(r(Vr+"|"+e("[\\/\\?]",Te))+"*"),Zr=r(r(Vr+"|[\\/\\?]")+"*"),ls=r(r("\\/\\/"+xr+Ot)+"|"+Tr+"|"+Ar+"|"+ct),Aa=r(Oe+"\\:"+ls+r("\\?"+fr)+"?"+r("\\#"+Zr)+"?"),Qr=r(r("\\/\\/"+xr+Ot)+"|"+Tr+"|"+Ta+"|"+ct),Ca=r(Qr+r("\\?"+fr)+"?"+r("\\#"+Zr)+"?"),us=r(Aa+"|"+Ca),Vi=r(Oe+"\\:"+ls+r("\\?"+fr)+"?"),Zi="^("+Oe+")\\:"+r(r("\\/\\/("+r("("+Re+")@")+"?("+Wr+")"+r("\\:("+dr+")")+"?)")+"?("+Ot+"|"+Tr+"|"+Ar+"|"+ct+")")+r("\\?("+fr+")")+"?"+r("\\#("+Zr+")")+"?$",Qi="^(){0}"+r(r("\\/\\/("+r("("+Re+")@")+"?("+Wr+")"+r("\\:("+dr+")")+"?)")+"?("+Ot+"|"+Tr+"|"+Ta+"|"+ct+")")+r("\\?("+fr+")")+"?"+r("\\#("+Zr+")")+"?$",Gi="^("+Oe+")\\:"+r(r("\\/\\/("+r("("+Re+")@")+"?("+Wr+")"+r("\\:("+dr+")")+"?)")+"?("+Ot+"|"+Tr+"|"+Ar+"|"+ct+")")+r("\\?("+fr+")")+"?$",Yi="^"+r("\\#("+Zr+")")+"?$",Ki="^"+r("("+Re+")@")+"?("+Wr+")"+r("\\:("+dr+")")+"?$";return{NOT_SCHEME:new RegExp(e("[^]",y,C,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(e("[^\\%\\:]",Se,ge),"g"),NOT_HOST:new RegExp(e("[^\\%\\[\\]\\:]",Se,ge),"g"),NOT_PATH:new RegExp(e("[^\\%\\/\\:\\@]",Se,ge),"g"),NOT_PATH_NOSCHEME:new RegExp(e("[^\\%\\/\\@]",Se,ge),"g"),NOT_QUERY:new RegExp(e("[^\\%]",Se,ge,"[\\:\\@\\/\\?]",Te),"g"),NOT_FRAGMENT:new RegExp(e("[^\\%]",Se,ge,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(e("[^]",Se,ge),"g"),UNRESERVED:new RegExp(Se,"g"),OTHER_CHARS:new RegExp(e("[^\\%]",Se,Ce),"g"),PCT_ENCODED:new RegExp(me,"g"),IPV4ADDRESS:new RegExp("^("+st+")$"),IPV6ADDRESS:new RegExp("^\\[?("+At+")"+r(r("\\%25|\\%(?!"+U+"{2})")+"("+er+")")+"?\\]?$")}}o(c,"buildExps");var h=c(!1),p=c(!0),m=(function(){function w(y,x){var C=[],O=!0,U=!1,ae=void 0;try{for(var ve=y[Symbol.iterator](),me;!(O=(me=ve.next()).done)&&(C.push(me.value),!(x&&C.length===x));O=!0);}catch(ze){U=!0,ae=ze}finally{try{!O&&ve.return&&ve.return()}finally{if(U)throw ae}}return C}return o(w,"sliceIterator"),function(y,x){if(Array.isArray(y))return y;if(Symbol.iterator in Object(y))return w(y,x);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),S=o(function(w){if(Array.isArray(w)){for(var y=0,x=Array(w.length);y<w.length;y++)x[y]=w[y];return x}else return Array.from(w)},"toConsumableArray"),P=2147483647,g=36,b=1,E=26,_=38,T=700,$=72,k=128,D="-",F=/^xn--/,L=/[^\0-\x7E]/,K=/[\x2E\u3002\uFF0E\uFF61]/g,Q={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},z=g-b,G=Math.floor,Y=String.fromCharCode;function V(w){throw new RangeError(Q[w])}o(V,"error$1");function N(w,y){for(var x=[],C=w.length;C--;)x[C]=y(w[C]);return x}o(N,"map");function q(w,y){var x=w.split("@"),C="";x.length>1&&(C=x[0]+"@",w=x[1]),w=w.replace(K,".");var O=w.split("."),U=N(O,y).join(".");return C+U}o(q,"mapDomain");function Z(w){for(var y=[],x=0,C=w.length;x<C;){var O=w.charCodeAt(x++);if(O>=55296&&O<=56319&&x<C){var U=w.charCodeAt(x++);(U&64512)==56320?y.push(((O&1023)<<10)+(U&1023)+65536):(y.push(O),x--)}else y.push(O)}return y}o(Z,"ucs2decode");var Ee=o(function(y){return String.fromCodePoint.apply(String,S(y))},"ucs2encode"),fe=o(function(y){return y-48<10?y-22:y-65<26?y-65:y-97<26?y-97:g},"basicToDigit"),pe=o(function(y,x){return y+22+75*(y<26)-((x!=0)<<5)},"digitToBasic"),de=o(function(y,x,C){var O=0;for(y=C?G(y/T):y>>1,y+=G(y/x);y>z*E>>1;O+=g)y=G(y/z);return G(O+(z+1)*y/(y+_))},"adapt"),ee=o(function(y){var x=[],C=y.length,O=0,U=k,ae=$,ve=y.lastIndexOf(D);ve<0&&(ve=0);for(var me=0;me<ve;++me)y.charCodeAt(me)>=128&&V("not-basic"),x.push(y.charCodeAt(me));for(var ze=ve>0?ve+1:0;ze<C;){for(var ge=O,Ce=1,Ne=g;;Ne+=g){ze>=C&&V("invalid-input");var Te=fe(y.charCodeAt(ze++));(Te>=g||Te>G((P-O)/Ce))&&V("overflow"),O+=Te*Ce;var Se=Ne<=ae?b:Ne>=ae+E?E:Ne-ae;if(Te<Se)break;var Oe=g-Se;Ce>G(P/Oe)&&V("overflow"),Ce*=Oe}var Re=x.length+1;ae=de(O-ge,Re,ge==0),G(O/Re)>P-U&&V("overflow"),U+=G(O/Re),O%=Re,x.splice(O++,0,U)}return String.fromCodePoint.apply(String,x)},"decode"),$e=o(function(y){var x=[];y=Z(y);var C=y.length,O=k,U=0,ae=$,ve=!0,me=!1,ze=void 0;try{for(var ge=y[Symbol.iterator](),Ce;!(ve=(Ce=ge.next()).done);ve=!0){var Ne=Ce.value;Ne<128&&x.push(Y(Ne))}}catch(Ct){me=!0,ze=Ct}finally{try{!ve&&ge.return&&ge.return()}finally{if(me)throw ze}}var Te=x.length,Se=Te;for(Te&&x.push(D);Se<C;){var Oe=P,Re=!0,Kt=!1,et=void 0;try{for(var st=y[Symbol.iterator](),xe;!(Re=(xe=st.next()).done);Re=!0){var ut=xe.value;ut>=O&&ut<Oe&&(Oe=ut)}}catch(Ct){Kt=!0,et=Ct}finally{try{!Re&&st.return&&st.return()}finally{if(Kt)throw et}}var pt=Se+1;Oe-O>G((P-U)/pt)&&V("overflow"),U+=(Oe-O)*pt,O=Oe;var Tt=!0,Jt=!1,nt=void 0;try{for(var Hr=y[Symbol.iterator](),cr;!(Tt=(cr=Hr.next()).done);Tt=!0){var Xt=cr.value;if(Xt<O&&++U>P&&V("overflow"),Xt==O){for(var zt=U,Qe=g;;Qe+=g){var At=Qe<=ae?b:Qe>=ae+E?E:Qe-ae;if(zt<At)break;var er=zt-At,Ra=g-At;x.push(Y(pe(At+er%Ra,0))),zt=G(er/Ra)}x.push(Y(pe(zt,0))),ae=de(U,pt,Se==Te),U=0,++Se}}}catch(Ct){Jt=!0,nt=Ct}finally{try{!Tt&&Hr.return&&Hr.return()}finally{if(Jt)throw nt}}++U,++O}return x.join("")},"encode"),Ge=o(function(y){return q(y,function(x){return F.test(x)?ee(x.slice(4).toLowerCase()):x})},"toUnicode"),Xe=o(function(y){return q(y,function(x){return L.test(x)?"xn--"+$e(x):x})},"toASCII"),ie={version:"2.1.0",ucs2:{decode:Z,encode:Ee},decode:ee,encode:$e,toASCII:Xe,toUnicode:Ge},Pe={};function We(w){var y=w.charCodeAt(0),x=void 0;return y<16?x="%0"+y.toString(16).toUpperCase():y<128?x="%"+y.toString(16).toUpperCase():y<2048?x="%"+(y>>6|192).toString(16).toUpperCase()+"%"+(y&63|128).toString(16).toUpperCase():x="%"+(y>>12|224).toString(16).toUpperCase()+"%"+(y>>6&63|128).toString(16).toUpperCase()+"%"+(y&63|128).toString(16).toUpperCase(),x}o(We,"pctEncChar");function Ye(w){for(var y="",x=0,C=w.length;x<C;){var O=parseInt(w.substr(x+1,2),16);if(O<128)y+=String.fromCharCode(O),x+=3;else if(O>=194&&O<224){if(C-x>=6){var U=parseInt(w.substr(x+4,2),16);y+=String.fromCharCode((O&31)<<6|U&63)}else y+=w.substr(x,6);x+=6}else if(O>=224){if(C-x>=9){var ae=parseInt(w.substr(x+4,2),16),ve=parseInt(w.substr(x+7,2),16);y+=String.fromCharCode((O&15)<<12|(ae&63)<<6|ve&63)}else y+=w.substr(x,9);x+=9}else y+=w.substr(x,3),x+=3}return y}o(Ye,"pctDecChars");function Ke(w,y){function x(C){var O=Ye(C);return O.match(y.UNRESERVED)?O:C}return o(x,"decodeUnreserved"),w.scheme&&(w.scheme=String(w.scheme).replace(y.PCT_ENCODED,x).toLowerCase().replace(y.NOT_SCHEME,"")),w.userinfo!==void 0&&(w.userinfo=String(w.userinfo).replace(y.PCT_ENCODED,x).replace(y.NOT_USERINFO,We).replace(y.PCT_ENCODED,t)),w.host!==void 0&&(w.host=String(w.host).replace(y.PCT_ENCODED,x).toLowerCase().replace(y.NOT_HOST,We).replace(y.PCT_ENCODED,t)),w.path!==void 0&&(w.path=String(w.path).replace(y.PCT_ENCODED,x).replace(w.scheme?y.NOT_PATH:y.NOT_PATH_NOSCHEME,We).replace(y.PCT_ENCODED,t)),w.query!==void 0&&(w.query=String(w.query).replace(y.PCT_ENCODED,x).replace(y.NOT_QUERY,We).replace(y.PCT_ENCODED,t)),w.fragment!==void 0&&(w.fragment=String(w.fragment).replace(y.PCT_ENCODED,x).replace(y.NOT_FRAGMENT,We).replace(y.PCT_ENCODED,t)),w}o(Ke,"_normalizeComponentEncoding");function St(w){return w.replace(/^0*(.*)/,"$1")||"0"}o(St,"_stripLeadingZeros");function je(w,y){var x=w.match(y.IPV4ADDRESS)||[],C=m(x,2),O=C[1];return O?O.split(".").map(St).join("."):w}o(je,"_normalizeIPv4");function Le(w,y){var x=w.match(y.IPV6ADDRESS)||[],C=m(x,3),O=C[1],U=C[2];if(O){for(var ae=O.toLowerCase().split("::").reverse(),ve=m(ae,2),me=ve[0],ze=ve[1],ge=ze?ze.split(":").map(St):[],Ce=me.split(":").map(St),Ne=y.IPV4ADDRESS.test(Ce[Ce.length-1]),Te=Ne?7:8,Se=Ce.length-Te,Oe=Array(Te),Re=0;Re<Te;++Re)Oe[Re]=ge[Re]||Ce[Se+Re]||"";Ne&&(Oe[Te-1]=je(Oe[Te-1],y));var Kt=Oe.reduce(function(pt,Tt,Jt){if(!Tt||Tt==="0"){var nt=pt[pt.length-1];nt&&nt.index+nt.length===Jt?nt.length++:pt.push({index:Jt,length:1})}return pt},[]),et=Kt.sort(function(pt,Tt){return Tt.length-pt.length})[0],st=void 0;if(et&&et.length>1){var xe=Oe.slice(0,et.index),ut=Oe.slice(et.index+et.length);st=xe.join(":")+"::"+ut.join(":")}else st=Oe.join(":");return U&&(st+="%"+U),st}else return w}o(Le,"_normalizeIPv6");var lr=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,Ve="".match(/(){0}/)[1]===void 0;function _e(w){var y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},x={},C=y.iri!==!1?p:h;y.reference==="suffix"&&(w=(y.scheme?y.scheme+":":"")+"//"+w);var O=w.match(lr);if(O){Ve?(x.scheme=O[1],x.userinfo=O[3],x.host=O[4],x.port=parseInt(O[5],10),x.path=O[6]||"",x.query=O[7],x.fragment=O[8],isNaN(x.port)&&(x.port=O[5])):(x.scheme=O[1]||void 0,x.userinfo=w.indexOf("@")!==-1?O[3]:void 0,x.host=w.indexOf("//")!==-1?O[4]:void 0,x.port=parseInt(O[5],10),x.path=O[6]||"",x.query=w.indexOf("?")!==-1?O[7]:void 0,x.fragment=w.indexOf("#")!==-1?O[8]:void 0,isNaN(x.port)&&(x.port=w.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?O[4]:void 0)),x.host&&(x.host=Le(je(x.host,C),C)),x.scheme===void 0&&x.userinfo===void 0&&x.host===void 0&&x.port===void 0&&!x.path&&x.query===void 0?x.reference="same-document":x.scheme===void 0?x.reference="relative":x.fragment===void 0?x.reference="absolute":x.reference="uri",y.reference&&y.reference!=="suffix"&&y.reference!==x.reference&&(x.error=x.error||"URI is not a "+y.reference+" reference.");var U=Pe[(y.scheme||x.scheme||"").toLowerCase()];if(!y.unicodeSupport&&(!U||!U.unicodeSupport)){if(x.host&&(y.domainHost||U&&U.domainHost))try{x.host=ie.toASCII(x.host.replace(C.PCT_ENCODED,Ye).toLowerCase())}catch(ae){x.error=x.error||"Host's domain name can not be converted to ASCII via punycode: "+ae}Ke(x,h)}else Ke(x,C);U&&U.parse&&U.parse(x,y)}else x.error=x.error||"URI can not be parsed.";return x}o(_e,"parse");function lt(w,y){var x=y.iri!==!1?p:h,C=[];return w.userinfo!==void 0&&(C.push(w.userinfo),C.push("@")),w.host!==void 0&&C.push(Le(je(String(w.host),x),x).replace(x.IPV6ADDRESS,function(O,U,ae){return"["+U+(ae?"%25"+ae:"")+"]"})),(typeof w.port=="number"||typeof w.port=="string")&&(C.push(":"),C.push(String(w.port))),C.length?C.join(""):void 0}o(lt,"_recomposeAuthority");var Et=/^\.\.?\//,Mt=/^\/\.(\/|$)/,Rt=/^\/\.\.(\/|$)/,Ze=/^\/?(?:.|\n)*?(?=\/|$)/;function Be(w){for(var y=[];w.length;)if(w.match(Et))w=w.replace(Et,"");else if(w.match(Mt))w=w.replace(Mt,"/");else if(w.match(Rt))w=w.replace(Rt,"/"),y.pop();else if(w==="."||w==="..")w="";else{var x=w.match(Ze);if(x){var C=x[0];w=w.slice(C.length),y.push(C)}else throw new Error("Unexpected dot segment condition")}return y.join("")}o(Be,"removeDotSegments");function qe(w){var y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},x=y.iri?p:h,C=[],O=Pe[(y.scheme||w.scheme||"").toLowerCase()];if(O&&O.serialize&&O.serialize(w,y),w.host&&!x.IPV6ADDRESS.test(w.host)){if(y.domainHost||O&&O.domainHost)try{w.host=y.iri?ie.toUnicode(w.host):ie.toASCII(w.host.replace(x.PCT_ENCODED,Ye).toLowerCase())}catch(ve){w.error=w.error||"Host's domain name can not be converted to "+(y.iri?"Unicode":"ASCII")+" via punycode: "+ve}}Ke(w,x),y.reference!=="suffix"&&w.scheme&&(C.push(w.scheme),C.push(":"));var U=lt(w,y);if(U!==void 0&&(y.reference!=="suffix"&&C.push("//"),C.push(U),w.path&&w.path.charAt(0)!=="/"&&C.push("/")),w.path!==void 0){var ae=w.path;!y.absolutePath&&(!O||!O.absolutePath)&&(ae=Be(ae)),U===void 0&&(ae=ae.replace(/^\/\//,"/%2F")),C.push(ae)}return w.query!==void 0&&(C.push("?"),C.push(w.query)),w.fragment!==void 0&&(C.push("#"),C.push(w.fragment)),C.join("")}o(qe,"serialize");function He(w,y){var x=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},C=arguments[3],O={};return C||(w=_e(qe(w,x),x),y=_e(qe(y,x),x)),x=x||{},!x.tolerant&&y.scheme?(O.scheme=y.scheme,O.userinfo=y.userinfo,O.host=y.host,O.port=y.port,O.path=Be(y.path||""),O.query=y.query):(y.userinfo!==void 0||y.host!==void 0||y.port!==void 0?(O.userinfo=y.userinfo,O.host=y.host,O.port=y.port,O.path=Be(y.path||""),O.query=y.query):(y.path?(y.path.charAt(0)==="/"?O.path=Be(y.path):((w.userinfo!==void 0||w.host!==void 0||w.port!==void 0)&&!w.path?O.path="/"+y.path:w.path?O.path=w.path.slice(0,w.path.lastIndexOf("/")+1)+y.path:O.path=y.path,O.path=Be(O.path)),O.query=y.query):(O.path=w.path,y.query!==void 0?O.query=y.query:O.query=w.query),O.userinfo=w.userinfo,O.host=w.host,O.port=w.port),O.scheme=w.scheme),O.fragment=y.fragment,O}o(He,"resolveComponents");function xt(w,y,x){var C=u({scheme:"null"},x);return qe(He(_e(w,C),_e(y,C),C,!0),C)}o(xt,"resolve");function rt(w,y){return typeof w=="string"?w=qe(_e(w,y),y):s(w)==="object"&&(w=_e(qe(w,y),y)),w}o(rt,"normalize");function ur(w,y,x){return typeof w=="string"?w=qe(_e(w,x),x):s(w)==="object"&&(w=qe(w,x)),typeof y=="string"?y=qe(_e(y,x),x):s(y)==="object"&&(y=qe(y,x)),w===y}o(ur,"equal");function ts(w,y){return w&&w.toString().replace(!y||!y.iri?h.ESCAPE:p.ESCAPE,We)}o(ts,"escapeComponent");function ht(w,y){return w&&w.toString().replace(!y||!y.iri?h.PCT_ENCODED:p.PCT_ENCODED,Ye)}o(ht,"unescapeComponent");var Er={scheme:"http",domainHost:!0,parse:o(function(y,x){return y.host||(y.error=y.error||"HTTP URIs must have a host."),y},"parse"),serialize:o(function(y,x){var C=String(y.scheme).toLowerCase()==="https";return(y.port===(C?443:80)||y.port==="")&&(y.port=void 0),y.path||(y.path="/"),y},"serialize")},Os={scheme:"https",domainHost:Er.domainHost,parse:Er.parse,serialize:Er.serialize};function rs(w){return typeof w.secure=="boolean"?w.secure:String(w.scheme).toLowerCase()==="wss"}o(rs,"isSecure");var Rr={scheme:"ws",domainHost:!0,parse:o(function(y,x){var C=y;return C.secure=rs(C),C.resourceName=(C.path||"/")+(C.query?"?"+C.query:""),C.path=void 0,C.query=void 0,C},"parse"),serialize:o(function(y,x){if((y.port===(rs(y)?443:80)||y.port==="")&&(y.port=void 0),typeof y.secure=="boolean"&&(y.scheme=y.secure?"wss":"ws",y.secure=void 0),y.resourceName){var C=y.resourceName.split("?"),O=m(C,2),U=O[0],ae=O[1];y.path=U&&U!=="/"?U:void 0,y.query=ae,y.resourceName=void 0}return y.fragment=void 0,y},"serialize")},as={scheme:"wss",domainHost:Rr.domainHost,parse:Rr.parse,serialize:Rr.serialize},ss={},ns=!0,wa="[A-Za-z0-9\\-\\.\\_\\~"+(ns?"\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF":"")+"]",at="[0-9A-Fa-f]",ks=r(r("%[EFef]"+at+"%"+at+at+"%"+at+at)+"|"+r("%[89A-Fa-f]"+at+"%"+at+at)+"|"+r("%"+at+at)),qt="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",Gt="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",Ds=e(Gt,'[\\"\\\\]'),Pa="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",Po=new RegExp(wa,"g"),Yt=new RegExp(ks,"g"),Is=new RegExp(e("[^]",qt,"[\\.]",'[\\"]',Ds),"g"),Fs=new RegExp(e("[^]",wa,Pa),"g"),Eo=Fs;function os(w){var y=Ye(w);return y.match(Po)?y:w}o(os,"decodeUnreserved");var $s={scheme:"mailto",parse:o(function(y,x){var C=y,O=C.to=C.path?C.path.split(","):[];if(C.path=void 0,C.query){for(var U=!1,ae={},ve=C.query.split("&"),me=0,ze=ve.length;me<ze;++me){var ge=ve[me].split("=");switch(ge[0]){case"to":for(var Ce=ge[1].split(","),Ne=0,Te=Ce.length;Ne<Te;++Ne)O.push(Ce[Ne]);break;case"subject":C.subject=ht(ge[1],x);break;case"body":C.body=ht(ge[1],x);break;default:U=!0,ae[ht(ge[0],x)]=ht(ge[1],x);break}}U&&(C.headers=ae)}C.query=void 0;for(var Se=0,Oe=O.length;Se<Oe;++Se){var Re=O[Se].split("@");if(Re[0]=ht(Re[0]),x.unicodeSupport)Re[1]=ht(Re[1],x).toLowerCase();else try{Re[1]=ie.toASCII(ht(Re[1],x).toLowerCase())}catch(Kt){C.error=C.error||"Email address's domain name can not be converted to ASCII via punycode: "+Kt}O[Se]=Re.join("@")}return C},"parse$$1"),serialize:o(function(y,x){var C=y,O=l(y.to);if(O){for(var U=0,ae=O.length;U<ae;++U){var ve=String(O[U]),me=ve.lastIndexOf("@"),ze=ve.slice(0,me).replace(Yt,os).replace(Yt,t).replace(Is,We),ge=ve.slice(me+1);try{ge=x.iri?ie.toUnicode(ge):ie.toASCII(ht(ge,x).toLowerCase())}catch(Se){C.error=C.error||"Email address's domain name can not be converted to "+(x.iri?"Unicode":"ASCII")+" via punycode: "+Se}O[U]=ze+"@"+ge}C.path=O.join(",")}var Ce=y.headers=y.headers||{};y.subject&&(Ce.subject=y.subject),y.body&&(Ce.body=y.body);var Ne=[];for(var Te in Ce)Ce[Te]!==ss[Te]&&Ne.push(Te.replace(Yt,os).replace(Yt,t).replace(Fs,We)+"="+Ce[Te].replace(Yt,os).replace(Yt,t).replace(Eo,We));return Ne.length&&(C.query=Ne.join("&")),C},"serialize$$1")},Ls=/^([^\:]+)\:(.*)/,Ea={scheme:"urn",parse:o(function(y,x){var C=y.path&&y.path.match(Ls),O=y;if(C){var U=x.scheme||O.scheme||"urn",ae=C[1].toLowerCase(),ve=C[2],me=U+":"+(x.nid||ae),ze=Pe[me];O.nid=ae,O.nss=ve,O.path=void 0,ze&&(O=ze.parse(O,x))}else O.error=O.error||"URN can not be parsed.";return O},"parse$$1"),serialize:o(function(y,x){var C=x.scheme||y.scheme||"urn",O=y.nid,U=C+":"+(x.nid||O),ae=Pe[U];ae&&(y=ae.serialize(y,x));var ve=y,me=y.nss;return ve.path=(O||x.nid)+":"+me,ve},"serialize$$1")},is=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,Ns={scheme:"urn:uuid",parse:o(function(y,x){var C=y;return C.uuid=C.nss,C.nss=void 0,!x.tolerant&&(!C.uuid||!C.uuid.match(is))&&(C.error=C.error||"UUID is not valid."),C},"parse"),serialize:o(function(y,x){var C=y;return C.nss=(y.uuid||"").toLowerCase(),C},"serialize")};Pe[Er.scheme]=Er,Pe[Os.scheme]=Os,Pe[Rr.scheme]=Rr,Pe[as.scheme]=as,Pe[$s.scheme]=$s,Pe[Ea.scheme]=Ea,Pe[Ns.scheme]=Ns,a.SCHEMES=Pe,a.pctEncChar=We,a.pctDecChars=Ye,a.parse=_e,a.removeDotSegments=Be,a.serialize=qe,a.resolveComponents=He,a.resolve=xt,a.normalize=rt,a.equal=ur,a.escapeComponent=ts,a.unescapeComponent=ht,Object.defineProperty(a,"__esModule",{value:!0})}))});var In=se((Ob,fu)=>{"use strict";fu.exports=o(function a(e,r){if(e===r)return!0;if(e&&r&&typeof e=="object"&&typeof r=="object"){if(e.constructor!==r.constructor)return!1;var s,t,l;if(Array.isArray(e)){if(s=e.length,s!=r.length)return!1;for(t=s;t--!==0;)if(!a(e[t],r[t]))return!1;return!0}if(e.constructor===RegExp)return e.source===r.source&&e.flags===r.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===r.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===r.toString();if(l=Object.keys(e),s=l.length,s!==Object.keys(r).length)return!1;for(t=s;t--!==0;)if(!Object.prototype.hasOwnProperty.call(r,l[t]))return!1;for(t=s;t--!==0;){var u=l[t];if(!a(e[u],r[u]))return!1}return!0}return e!==e&&r!==r},"equal")});var pu=se((Db,hu)=>{"use strict";hu.exports=o(function(e){for(var r=0,s=e.length,t=0,l;t<s;)r++,l=e.charCodeAt(t++),l>=55296&&l<=56319&&t<s&&(l=e.charCodeAt(t),(l&64512)==56320&&t++);return r},"ucs2length")});var ma=se((Fb,vu)=>{"use strict";vu.exports={copy:Ym,checkDataType:ni,checkDataTypes:Km,coerceToTypes:Jm,toHash:ii,getProperty:li,escapeQuotes:ui,equal:In(),ucs2length:pu(),varOccurences:tg,varReplace:rg,schemaHasRules:ag,schemaHasRulesExcept:sg,schemaUnknownRules:ng,toQuotedString:oi,getPathExpr:og,getPath:ig,getData:cg,unescapeFragment:dg,unescapeJsonPointer:di,escapeFragment:fg,escapeJsonPointer:ci};function Ym(a,e){e=e||{};for(var r in a)e[r]=a[r];return e}o(Ym,"copy");function ni(a,e,r,s){var t=s?" !== ":" === ",l=s?" || ":" && ",u=s?"!":"",c=s?"":"!";switch(a){case"null":return e+t+"null";case"array":return u+"Array.isArray("+e+")";case"object":return"("+u+e+l+"typeof "+e+t+'"object"'+l+c+"Array.isArray("+e+"))";case"integer":return"(typeof "+e+t+'"number"'+l+c+"("+e+" % 1)"+l+e+t+e+(r?l+u+"isFinite("+e+")":"")+")";case"number":return"(typeof "+e+t+'"'+a+'"'+(r?l+u+"isFinite("+e+")":"")+")";default:return"typeof "+e+t+'"'+a+'"'}}o(ni,"checkDataType");function Km(a,e,r){switch(a.length){case 1:return ni(a[0],e,r,!0);default:var s="",t=ii(a);t.array&&t.object&&(s=t.null?"(":"(!"+e+" || ",s+="typeof "+e+' !== "object")',delete t.null,delete t.array,delete t.object),t.number&&delete t.integer;for(var l in t)s+=(s?" && ":"")+ni(l,e,r,!0);return s}}o(Km,"checkDataTypes");var mu=ii(["string","number","integer","boolean","null"]);function Jm(a,e){if(Array.isArray(e)){for(var r=[],s=0;s<e.length;s++){var t=e[s];(mu[t]||a==="array"&&t==="array")&&(r[r.length]=t)}if(r.length)return r}else{if(mu[e])return[e];if(a==="array"&&e==="array")return["array"]}}o(Jm,"coerceToTypes");function ii(a){for(var e={},r=0;r<a.length;r++)e[a[r]]=!0;return e}o(ii,"toHash");var Xm=/^[a-z$_][a-z$_0-9]*$/i,eg=/'|\\/g;function li(a){return typeof a=="number"?"["+a+"]":Xm.test(a)?"."+a:"['"+ui(a)+"']"}o(li,"getProperty");function ui(a){return a.replace(eg,"\\$&").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\f/g,"\\f").replace(/\t/g,"\\t")}o(ui,"escapeQuotes");function tg(a,e){e+="[^0-9]";var r=a.match(new RegExp(e,"g"));return r?r.length:0}o(tg,"varOccurences");function rg(a,e,r){return e+="([^0-9])",r=r.replace(/\$/g,"$$$$"),a.replace(new RegExp(e,"g"),r+"$1")}o(rg,"varReplace");function ag(a,e){if(typeof a=="boolean")return!a;for(var r in a)if(e[r])return!0}o(ag,"schemaHasRules");function sg(a,e,r){if(typeof a=="boolean")return!a&&r!="not";for(var s in a)if(s!=r&&e[s])return!0}o(sg,"schemaHasRulesExcept");function ng(a,e){if(typeof a!="boolean"){for(var r in a)if(!e[r])return r}}o(ng,"schemaUnknownRules");function oi(a){return"'"+ui(a)+"'"}o(oi,"toQuotedString");function og(a,e,r,s){var t=r?"'/' + "+e+(s?"":".replace(/~/g, '~0').replace(/\\//g, '~1')"):s?"'[' + "+e+" + ']'":"'[\\'' + "+e+" + '\\']'";return gu(a,t)}o(og,"getPathExpr");function ig(a,e,r){var s=oi(r?"/"+ci(e):li(e));return gu(a,s)}o(ig,"getPath");var lg=/^\/(?:[^~]|~0|~1)*$/,ug=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function cg(a,e,r){var s,t,l,u;if(a==="")return"rootData";if(a[0]=="/"){if(!lg.test(a))throw new Error("Invalid JSON-pointer: "+a);t=a,l="rootData"}else{if(u=a.match(ug),!u)throw new Error("Invalid JSON-pointer: "+a);if(s=+u[1],t=u[2],t=="#"){if(s>=e)throw new Error("Cannot access property/index "+s+" levels up, current level is "+e);return r[e-s]}if(s>e)throw new Error("Cannot access data "+s+" levels up, current level is "+e);if(l="data"+(e-s||""),!t)return l}for(var c=l,h=t.split("/"),p=0;p<h.length;p++){var m=h[p];m&&(l+=li(di(m)),c+=" && "+l)}return c}o(cg,"getData");function gu(a,e){return a=='""'?e:(a+" + "+e).replace(/([^\\])' \+ '/g,"$1")}o(gu,"joinPaths");function dg(a){return di(decodeURIComponent(a))}o(dg,"unescapeFragment");function fg(a){return encodeURIComponent(ci(a))}o(fg,"escapeFragment");function ci(a){return a.replace(/~/g,"~0").replace(/\//g,"~1")}o(ci,"escapeJsonPointer");function di(a){return a.replace(/~1/g,"/").replace(/~0/g,"~")}o(di,"unescapeJsonPointer")});var fi=se((Lb,yu)=>{"use strict";var hg=ma();yu.exports=pg;function pg(a){hg.copy(a,this)}o(pg,"SchemaObject")});var _u=se((jb,bu)=>{"use strict";var Mr=bu.exports=function(a,e,r){typeof e=="function"&&(r=e,e={}),r=e.cb||r;var s=typeof r=="function"?r:r.pre||function(){},t=r.post||function(){};Fn(e,s,t,a,"",a)};Mr.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0};Mr.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};Mr.propsKeywords={definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};Mr.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function Fn(a,e,r,s,t,l,u,c,h,p){if(s&&typeof s=="object"&&!Array.isArray(s)){e(s,t,l,u,c,h,p);for(var m in s){var S=s[m];if(Array.isArray(S)){if(m in Mr.arrayKeywords)for(var P=0;P<S.length;P++)Fn(a,e,r,S[P],t+"/"+m+"/"+P,l,t,m,s,P)}else if(m in Mr.propsKeywords){if(S&&typeof S=="object")for(var g in S)Fn(a,e,r,S[g],t+"/"+m+"/"+mg(g),l,t,m,s,g)}else(m in Mr.keywords||a.allKeys&&!(m in Mr.skipKeywords))&&Fn(a,e,r,S,t+"/"+m,l,t,m,s)}r(s,t,l,u,c,h,p)}}o(Fn,"_traverse");function mg(a){return a.replace(/~/g,"~0").replace(/\//g,"~1")}o(mg,"escapeJsonPtr")});var qn=se((qb,Eu)=>{"use strict";var ws=du(),Su=In(),jn=ma(),$n=fi(),gg=_u();Eu.exports=zr;zr.normalizeId=qr;zr.fullPath=Ln;zr.url=Nn;zr.ids=Sg;zr.inlineRef=hi;zr.schema=Mn;function zr(a,e,r){var s=this._refs[r];if(typeof s=="string")if(this._refs[s])s=this._refs[s];else return zr.call(this,a,e,s);if(s=s||this._schemas[r],s instanceof $n)return hi(s.schema,this._opts.inlineRefs)?s.schema:s.validate||this._compile(s);var t=Mn.call(this,e,r),l,u,c;return t&&(l=t.schema,e=t.root,c=t.baseId),l instanceof $n?u=l.validate||a.call(this,l.schema,e,void 0,c):l!==void 0&&(u=hi(l,this._opts.inlineRefs)?l:a.call(this,l,e,void 0,c)),u}o(zr,"resolve");function Mn(a,e){var r=ws.parse(e),s=Pu(r),t=Ln(this._getId(a.schema));if(Object.keys(a.schema).length===0||s!==t){var l=qr(s),u=this._refs[l];if(typeof u=="string")return vg.call(this,a,u,r);if(u instanceof $n)u.validate||this._compile(u),a=u;else if(u=this._schemas[l],u instanceof $n){if(u.validate||this._compile(u),l==qr(e))return{schema:u,root:a,baseId:t};a=u}else return;if(!a.schema)return;t=Ln(this._getId(a.schema))}return wu.call(this,r,t,a.schema,a)}o(Mn,"resolveSchema");function vg(a,e,r){var s=Mn.call(this,a,e);if(s){var t=s.schema,l=s.baseId;a=s.root;var u=this._getId(t);return u&&(l=Nn(l,u)),wu.call(this,r,l,t,a)}}o(vg,"resolveRecursive");var yg=jn.toHash(["properties","patternProperties","enum","dependencies","definitions"]);function wu(a,e,r,s){if(a.fragment=a.fragment||"",a.fragment.slice(0,1)=="/"){for(var t=a.fragment.split("/"),l=1;l<t.length;l++){var u=t[l];if(u){if(u=jn.unescapeFragment(u),r=r[u],r===void 0)break;var c;if(!yg[u]&&(c=this._getId(r),c&&(e=Nn(e,c)),r.$ref)){var h=Nn(e,r.$ref),p=Mn.call(this,s,h);p&&(r=p.schema,s=p.root,e=p.baseId)}}}if(r!==void 0&&r!==s.schema)return{schema:r,root:s,baseId:e}}}o(wu,"getJsonPointer");var bg=jn.toHash(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum"]);function hi(a,e){if(e===!1)return!1;if(e===void 0||e===!0)return pi(a);if(e)return mi(a)<=e}o(hi,"inlineRef");function pi(a){var e;if(Array.isArray(a)){for(var r=0;r<a.length;r++)if(e=a[r],typeof e=="object"&&!pi(e))return!1}else for(var s in a)if(s=="$ref"||(e=a[s],typeof e=="object"&&!pi(e)))return!1;return!0}o(pi,"checkNoRef");function mi(a){var e=0,r;if(Array.isArray(a)){for(var s=0;s<a.length;s++)if(r=a[s],typeof r=="object"&&(e+=mi(r)),e==1/0)return 1/0}else for(var t in a){if(t=="$ref")return 1/0;if(bg[t])e++;else if(r=a[t],typeof r=="object"&&(e+=mi(r)+1),e==1/0)return 1/0}return e}o(mi,"countKeys");function Ln(a,e){e!==!1&&(a=qr(a));var r=ws.parse(a);return Pu(r)}o(Ln,"getFullPath");function Pu(a){return ws.serialize(a).split("#")[0]+"#"}o(Pu,"_getFullPath");var _g=/#\/?$/;function qr(a){return a?a.replace(_g,""):""}o(qr,"normalizeId");function Nn(a,e){return e=qr(e),ws.resolve(a,e)}o(Nn,"resolveUrl");function Sg(a){var e=qr(this._getId(a)),r={"":e},s={"":Ln(e,!1)},t={},l=this;return gg(a,{allKeys:!0},function(u,c,h,p,m,S,P){if(c!==""){var g=l._getId(u),b=r[p],E=s[p]+"/"+m;if(P!==void 0&&(E+="/"+(typeof P=="number"?P:jn.escapeFragment(P))),typeof g=="string"){g=b=qr(b?ws.resolve(b,g):g);var _=l._refs[g];if(typeof _=="string"&&(_=l._refs[_]),_&&_.schema){if(!Su(u,_.schema))throw new Error('id "'+g+'" resolves to more than one schema')}else if(g!=qr(E))if(g[0]=="#"){if(t[g]&&!Su(u,t[g]))throw new Error('id "'+g+'" resolves to more than one schema');t[g]=u}else l._refs[g]=E}r[c]=b,s[c]=E}}),t}o(Sg,"resolveIds")});var zn=se((Ub,xu)=>{"use strict";var gi=qn();xu.exports={Validation:Ru(wg),MissingRef:Ru(vi)};function wg(a){this.message="validation failed",this.errors=a,this.ajv=this.validation=!0}o(wg,"ValidationError");vi.message=function(a,e){return"can't resolve reference "+e+" from id "+a};function vi(a,e,r){this.message=r||vi.message(a,e),this.missingRef=gi.url(a,e),this.missingSchema=gi.normalizeId(gi.fullPath(this.missingRef))}o(vi,"MissingRefError");function Ru(a){return a.prototype=Object.create(Error.prototype),a.prototype.constructor=a,a}o(Ru,"errorSubclass")});var yi=se((Hb,Tu)=>{"use strict";Tu.exports=function(a,e){e||(e={}),typeof e=="function"&&(e={cmp:e});var r=typeof e.cycles=="boolean"?e.cycles:!1,s=e.cmp&&(function(l){return function(u){return function(c,h){var p={key:c,value:u[c]},m={key:h,value:u[h]};return l(p,m)}}})(e.cmp),t=[];return o((function l(u){if(u&&u.toJSON&&typeof u.toJSON=="function"&&(u=u.toJSON()),u!==void 0){if(typeof u=="number")return isFinite(u)?""+u:"null";if(typeof u!="object")return JSON.stringify(u);var c,h;if(Array.isArray(u)){for(h="[",c=0;c<u.length;c++)c&&(h+=","),h+=l(u[c])||"null";return h+"]"}if(u===null)return"null";if(t.indexOf(u)!==-1){if(r)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var p=t.push(u)-1,m=Object.keys(u).sort(s&&s(u));for(h="",c=0;c<m.length;c++){var S=m[c],P=l(u[S]);P&&(h&&(h+=","),h+=JSON.stringify(S)+":"+P)}return t.splice(p,1),"{"+h+"}"}}),"stringify")(a)}});var bi=se((Vb,Au)=>{"use strict";Au.exports=o(function(e,r,s){var t="",l=e.schema.$async===!0,u=e.util.schemaHasRulesExcept(e.schema,e.RULES.all,"$ref"),c=e.self._getId(e.schema);if(e.opts.strictKeywords){var h=e.util.schemaUnknownRules(e.schema,e.RULES.keywords);if(h){var p="unknown keyword: "+h;if(e.opts.strictKeywords==="log")e.logger.warn(p);else throw new Error(p)}}if(e.isTop&&(t+=" var validate = ",l&&(e.async=!0,t+="async "),t+="function(data, dataPath, parentData, parentDataProperty, rootData) { 'use strict'; ",c&&(e.opts.sourceCode||e.opts.processCode)&&(t+=" "+("/*# sourceURL="+c+" */")+" ")),typeof e.schema=="boolean"||!(u||e.schema.$ref)){var r="false schema",m=e.level,S=e.dataLevel,P=e.schema[r],g=e.schemaPath+e.util.getProperty(r),b=e.errSchemaPath+"/"+r,F=!e.opts.allErrors,Q,E="data"+(S||""),D="valid"+m;if(e.schema===!1){e.isTop?F=!0:t+=" var "+D+" = false; ";var _=_||[];_.push(t),t="",e.createErrors!==!1?(t+=" { keyword: '"+(Q||"false schema")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(b)+" , params: {} ",e.opts.messages!==!1&&(t+=" , message: 'boolean schema is false' "),e.opts.verbose&&(t+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+E+" "),t+=" } "):t+=" {} ";var T=t;t=_.pop(),!e.compositeRule&&F?e.async?t+=" throw new ValidationError(["+T+"]); ":t+=" validate.errors = ["+T+"]; return false; ":t+=" var err = "+T+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else e.isTop?l?t+=" return data; ":t+=" validate.errors = null; return true; ":t+=" var "+D+" = true; ";return e.isTop&&(t+=" }; return validate; "),t}if(e.isTop){var $=e.isTop,m=e.level=0,S=e.dataLevel=0,E="data";if(e.rootId=e.resolve.fullPath(e.self._getId(e.root.schema)),e.baseId=e.baseId||e.rootId,delete e.isTop,e.dataPathArr=[""],e.schema.default!==void 0&&e.opts.useDefaults&&e.opts.strictDefaults){var k="default is ignored in the schema root";if(e.opts.strictDefaults==="log")e.logger.warn(k);else throw new Error(k)}t+=" var vErrors = null; ",t+=" var errors = 0;     ",t+=" if (rootData === undefined) rootData = data; "}else{var m=e.level,S=e.dataLevel,E="data"+(S||"");if(c&&(e.baseId=e.resolve.url(e.baseId,c)),l&&!e.async)throw new Error("async schema in sync schema");t+=" var errs_"+m+" = errors;"}var D="valid"+m,F=!e.opts.allErrors,L="",K="",Q,z=e.schema.type,G=Array.isArray(z);if(z&&e.opts.nullable&&e.schema.nullable===!0&&(G?z.indexOf("null")==-1&&(z=z.concat("null")):z!="null"&&(z=[z,"null"],G=!0)),G&&z.length==1&&(z=z[0],G=!1),e.schema.$ref&&u){if(e.opts.extendRefs=="fail")throw new Error('$ref: validation keywords used in schema at path "'+e.errSchemaPath+'" (see option extendRefs)');e.opts.extendRefs!==!0&&(u=!1,e.logger.warn('$ref: keywords ignored in schema at path "'+e.errSchemaPath+'"'))}if(e.schema.$comment&&e.opts.$comment&&(t+=" "+e.RULES.all.$comment.code(e,"$comment")),z){if(e.opts.coerceTypes)var Y=e.util.coerceToTypes(e.opts.coerceTypes,z);var V=e.RULES.types[z];if(Y||G||V===!0||V&&!Ze(V)){var g=e.schemaPath+".type",b=e.errSchemaPath+"/type",g=e.schemaPath+".type",b=e.errSchemaPath+"/type",N=G?"checkDataTypes":"checkDataType";if(t+=" if ("+e.util[N](z,E,e.opts.strictNumbers,!0)+") { ",Y){var q="dataType"+m,Z="coerced"+m;t+=" var "+q+" = typeof "+E+"; var "+Z+" = undefined; ",e.opts.coerceTypes=="array"&&(t+=" if ("+q+" == 'object' && Array.isArray("+E+") && "+E+".length == 1) { "+E+" = "+E+"[0]; "+q+" = typeof "+E+"; if ("+e.util.checkDataType(e.schema.type,E,e.opts.strictNumbers)+") "+Z+" = "+E+"; } "),t+=" if ("+Z+" !== undefined) ; ";var Ee=Y;if(Ee)for(var fe,pe=-1,de=Ee.length-1;pe<de;)fe=Ee[pe+=1],fe=="string"?t+=" else if ("+q+" == 'number' || "+q+" == 'boolean') "+Z+" = '' + "+E+"; else if ("+E+" === null) "+Z+" = ''; ":fe=="number"||fe=="integer"?(t+=" else if ("+q+" == 'boolean' || "+E+" === null || ("+q+" == 'string' && "+E+" && "+E+" == +"+E+" ",fe=="integer"&&(t+=" && !("+E+" % 1)"),t+=")) "+Z+" = +"+E+"; "):fe=="boolean"?t+=" else if ("+E+" === 'false' || "+E+" === 0 || "+E+" === null) "+Z+" = false; else if ("+E+" === 'true' || "+E+" === 1) "+Z+" = true; ":fe=="null"?t+=" else if ("+E+" === '' || "+E+" === 0 || "+E+" === false) "+Z+" = null; ":e.opts.coerceTypes=="array"&&fe=="array"&&(t+=" else if ("+q+" == 'string' || "+q+" == 'number' || "+q+" == 'boolean' || "+E+" == null) "+Z+" = ["+E+"]; ");t+=" else {   ";var _=_||[];_.push(t),t="",e.createErrors!==!1?(t+=" { keyword: '"+(Q||"type")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(b)+" , params: { type: '",G?t+=""+z.join(","):t+=""+z,t+="' } ",e.opts.messages!==!1&&(t+=" , message: 'should be ",G?t+=""+z.join(","):t+=""+z,t+="' "),e.opts.verbose&&(t+=" , schema: validate.schema"+g+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+E+" "),t+=" } "):t+=" {} ";var T=t;t=_.pop(),!e.compositeRule&&F?e.async?t+=" throw new ValidationError(["+T+"]); ":t+=" validate.errors = ["+T+"]; return false; ":t+=" var err = "+T+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" } if ("+Z+" !== undefined) {  ";var ee=S?"data"+(S-1||""):"parentData",$e=S?e.dataPathArr[S]:"parentDataProperty";t+=" "+E+" = "+Z+"; ",S||(t+="if ("+ee+" !== undefined)"),t+=" "+ee+"["+$e+"] = "+Z+"; } "}else{var _=_||[];_.push(t),t="",e.createErrors!==!1?(t+=" { keyword: '"+(Q||"type")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(b)+" , params: { type: '",G?t+=""+z.join(","):t+=""+z,t+="' } ",e.opts.messages!==!1&&(t+=" , message: 'should be ",G?t+=""+z.join(","):t+=""+z,t+="' "),e.opts.verbose&&(t+=" , schema: validate.schema"+g+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+E+" "),t+=" } "):t+=" {} ";var T=t;t=_.pop(),!e.compositeRule&&F?e.async?t+=" throw new ValidationError(["+T+"]); ":t+=" validate.errors = ["+T+"]; return false; ":t+=" var err = "+T+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}t+=" } "}}if(e.schema.$ref&&!u)t+=" "+e.RULES.all.$ref.code(e,"$ref")+" ",F&&(t+=" } if (errors === ",$?t+="0":t+="errs_"+m,t+=") { ",K+="}");else{var Ge=e.RULES;if(Ge){for(var V,Xe=-1,ie=Ge.length-1;Xe<ie;)if(V=Ge[Xe+=1],Ze(V)){if(V.type&&(t+=" if ("+e.util.checkDataType(V.type,E,e.opts.strictNumbers)+") { "),e.opts.useDefaults){if(V.type=="object"&&e.schema.properties){var P=e.schema.properties,Pe=Object.keys(P),We=Pe;if(We)for(var Ye,Ke=-1,St=We.length-1;Ke<St;){Ye=We[Ke+=1];var je=P[Ye];if(je.default!==void 0){var Le=E+e.util.getProperty(Ye);if(e.compositeRule){if(e.opts.strictDefaults){var k="default is ignored for: "+Le;if(e.opts.strictDefaults==="log")e.logger.warn(k);else throw new Error(k)}}else t+=" if ("+Le+" === undefined ",e.opts.useDefaults=="empty"&&(t+=" || "+Le+" === null || "+Le+" === '' "),t+=" ) "+Le+" = ",e.opts.useDefaults=="shared"?t+=" "+e.useDefault(je.default)+" ":t+=" "+JSON.stringify(je.default)+" ",t+="; "}}}else if(V.type=="array"&&Array.isArray(e.schema.items)){var lr=e.schema.items;if(lr){for(var je,pe=-1,Ve=lr.length-1;pe<Ve;)if(je=lr[pe+=1],je.default!==void 0){var Le=E+"["+pe+"]";if(e.compositeRule){if(e.opts.strictDefaults){var k="default is ignored for: "+Le;if(e.opts.strictDefaults==="log")e.logger.warn(k);else throw new Error(k)}}else t+=" if ("+Le+" === undefined ",e.opts.useDefaults=="empty"&&(t+=" || "+Le+" === null || "+Le+" === '' "),t+=" ) "+Le+" = ",e.opts.useDefaults=="shared"?t+=" "+e.useDefault(je.default)+" ":t+=" "+JSON.stringify(je.default)+" ",t+="; "}}}}var _e=V.rules;if(_e){for(var lt,Et=-1,Mt=_e.length-1;Et<Mt;)if(lt=_e[Et+=1],Be(lt)){var Rt=lt.code(e,lt.keyword,V.type);Rt&&(t+=" "+Rt+" ",F&&(L+="}"))}}if(F&&(t+=" "+L+" ",L=""),V.type&&(t+=" } ",z&&z===V.type&&!Y)){t+=" else { ";var g=e.schemaPath+".type",b=e.errSchemaPath+"/type",_=_||[];_.push(t),t="",e.createErrors!==!1?(t+=" { keyword: '"+(Q||"type")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(b)+" , params: { type: '",G?t+=""+z.join(","):t+=""+z,t+="' } ",e.opts.messages!==!1&&(t+=" , message: 'should be ",G?t+=""+z.join(","):t+=""+z,t+="' "),e.opts.verbose&&(t+=" , schema: validate.schema"+g+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+E+" "),t+=" } "):t+=" {} ";var T=t;t=_.pop(),!e.compositeRule&&F?e.async?t+=" throw new ValidationError(["+T+"]); ":t+=" validate.errors = ["+T+"]; return false; ":t+=" var err = "+T+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" } "}F&&(t+=" if (errors === ",$?t+="0":t+="errs_"+m,t+=") { ",K+="}")}}}F&&(t+=" "+K+" "),$?(l?(t+=" if (errors === 0) return data;           ",t+=" else throw new ValidationError(vErrors); "):(t+=" validate.errors = vErrors; ",t+=" return errors === 0;       "),t+=" }; return validate;"):t+=" var "+D+" = errors === errs_"+m+";";function Ze(He){for(var xt=He.rules,rt=0;rt<xt.length;rt++)if(Be(xt[rt]))return!0}o(Ze,"$shouldUseGroup");function Be(He){return e.schema[He.keyword]!==void 0||He.implements&&qe(He)}o(Be,"$shouldUseRule");function qe(He){for(var xt=He.implements,rt=0;rt<xt.length;rt++)if(e.schema[xt[rt]]!==void 0)return!0}return o(qe,"$ruleImplementsSomeKeyword"),t},"generate_validate")});var Iu=se((Qb,Du)=>{"use strict";var Un=qn(),Hn=ma(),Ou=zn(),Pg=yi(),Cu=bi(),Eg=Hn.ucs2length,Rg=In(),xg=Ou.Validation;Du.exports=_i;function _i(a,e,r,s){var t=this,l=this._opts,u=[void 0],c={},h=[],p={},m=[],S={},P=[];e=e||{schema:a,refVal:u,refs:c};var g=Tg.call(this,a,e,s),b=this._compilations[g.index];if(g.compiling)return b.callValidate=k;var E=this._formats,_=this.RULES;try{var T=D(a,e,r,s);b.validate=T;var $=b.callValidate;return $&&($.schema=T.schema,$.errors=null,$.refs=T.refs,$.refVal=T.refVal,$.root=T.root,$.$async=T.$async,l.sourceCode&&($.source=T.source)),T}finally{Ag.call(this,a,e,s)}function k(){var N=b.validate,q=N.apply(this,arguments);return k.errors=N.errors,q}o(k,"callValidate");function D(N,q,Z,Ee){var fe=!q||q&&q.schema==N;if(q.schema!=e.schema)return _i.call(t,N,q,Z,Ee);var pe=N.$async===!0,de=Cu({isTop:!0,schema:N,isRoot:fe,baseId:Ee,root:q,schemaPath:"",errSchemaPath:"#",errorPath:'""',MissingRefError:Ou.MissingRef,RULES:_,validate:Cu,util:Hn,resolve:Un,resolveRef:F,usePattern:G,useDefault:Y,useCustomRule:V,opts:l,formats:E,logger:t.logger,self:t});de=Bn(u,kg)+Bn(h,Cg)+Bn(m,Og)+Bn(P,Dg)+de,l.processCode&&(de=l.processCode(de,N));var ee;try{var $e=new Function("self","RULES","formats","root","refVal","defaults","customRules","equal","ucs2length","ValidationError",de);ee=$e(t,_,E,e,u,m,P,Rg,Eg,xg),u[0]=ee}catch(Ge){throw t.logger.error("Error compiling schema, function code:",de),Ge}return ee.schema=N,ee.errors=null,ee.refs=c,ee.refVal=u,ee.root=fe?ee:q,pe&&(ee.$async=!0),l.sourceCode===!0&&(ee.source={code:de,patterns:h,defaults:m}),ee}o(D,"localCompile");function F(N,q,Z){q=Un.url(N,q);var Ee=c[q],fe,pe;if(Ee!==void 0)return fe=u[Ee],pe="refVal["+Ee+"]",z(fe,pe);if(!Z&&e.refs){var de=e.refs[q];if(de!==void 0)return fe=e.refVal[de],pe=L(q,fe),z(fe,pe)}pe=L(q);var ee=Un.call(t,D,e,q);if(ee===void 0){var $e=r&&r[q];$e&&(ee=Un.inlineRef($e,l.inlineRefs)?$e:_i.call(t,$e,e,r,N))}if(ee===void 0)K(q);else return Q(q,ee),z(ee,pe)}o(F,"resolveRef");function L(N,q){var Z=u.length;return u[Z]=q,c[N]=Z,"refVal"+Z}o(L,"addLocalRef");function K(N){delete c[N]}o(K,"removeLocalRef");function Q(N,q){var Z=c[N];u[Z]=q}o(Q,"replaceLocalRef");function z(N,q){return typeof N=="object"||typeof N=="boolean"?{code:q,schema:N,inline:!0}:{code:q,$async:N&&!!N.$async}}o(z,"resolvedRef");function G(N){var q=p[N];return q===void 0&&(q=p[N]=h.length,h[q]=N),"pattern"+q}o(G,"usePattern");function Y(N){switch(typeof N){case"boolean":case"number":return""+N;case"string":return Hn.toQuotedString(N);case"object":if(N===null)return"null";var q=Pg(N),Z=S[q];return Z===void 0&&(Z=S[q]=m.length,m[Z]=N),"default"+Z}}o(Y,"useDefault");function V(N,q,Z,Ee){if(t._opts.validateSchema!==!1){var fe=N.definition.dependencies;if(fe&&!fe.every(function(We){return Object.prototype.hasOwnProperty.call(Z,We)}))throw new Error("parent schema must have all required keywords: "+fe.join(","));var pe=N.definition.validateSchema;if(pe){var de=pe(q);if(!de){var ee="keyword schema is invalid: "+t.errorsText(pe.errors);if(t._opts.validateSchema=="log")t.logger.error(ee);else throw new Error(ee)}}}var $e=N.definition.compile,Ge=N.definition.inline,Xe=N.definition.macro,ie;if($e)ie=$e.call(t,q,Z,Ee);else if(Xe)ie=Xe.call(t,q,Z,Ee),l.validateSchema!==!1&&t.validateSchema(ie,!0);else if(Ge)ie=Ge.call(t,Ee,N.keyword,q,Z);else if(ie=N.definition.validate,!ie)return;if(ie===void 0)throw new Error('custom keyword "'+N.keyword+'"failed to compile');var Pe=P.length;return P[Pe]=ie,{code:"customRule"+Pe,validate:ie}}o(V,"useCustomRule")}o(_i,"compile");function Tg(a,e,r){var s=ku.call(this,a,e,r);return s>=0?{index:s,compiling:!0}:(s=this._compilations.length,this._compilations[s]={schema:a,root:e,baseId:r},{index:s,compiling:!1})}o(Tg,"checkCompiling");function Ag(a,e,r){var s=ku.call(this,a,e,r);s>=0&&this._compilations.splice(s,1)}o(Ag,"endCompiling");function ku(a,e,r){for(var s=0;s<this._compilations.length;s++){var t=this._compilations[s];if(t.schema==a&&t.root==e&&t.baseId==r)return s}return-1}o(ku,"compIndex");function Cg(a,e){return"var pattern"+a+" = new RegExp("+Hn.toQuotedString(e[a])+");"}o(Cg,"patternCode");function Og(a){return"var default"+a+" = defaults["+a+"];"}o(Og,"defaultCode");function kg(a,e){return e[a]===void 0?"":"var refVal"+a+" = refVal["+a+"];"}o(kg,"refValCode");function Dg(a){return"var customRule"+a+" = customRules["+a+"];"}o(Dg,"customRuleCode");function Bn(a,e){if(!a.length)return"";for(var r="",s=0;s<a.length;s++)r+=e(s,a);return r}o(Bn,"vars")});var $u=se((Yb,Fu)=>{"use strict";var Wn=Fu.exports=o(function(){this._cache={}},"Cache");Wn.prototype.put=o(function(e,r){this._cache[e]=r},"Cache_put");Wn.prototype.get=o(function(e){return this._cache[e]},"Cache_get");Wn.prototype.del=o(function(e){delete this._cache[e]},"Cache_del");Wn.prototype.clear=o(function(){this._cache={}},"Cache_clear")});var Zu=se((Jb,Vu)=>{"use strict";var Ig=ma(),Fg=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,$g=[0,31,28,31,30,31,30,31,31,30,31,30,31],Lg=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i,Lu=/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,Ng=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,jg=/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,Nu=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,ju=/^(?:(?:http[s\u017F]?|ftp):\/\/)(?:(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+(?::(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?@)?(?:(?!10(?:\.[0-9]{1,3}){3})(?!127(?:\.[0-9]{1,3}){3})(?!169\.254(?:\.[0-9]{1,3}){2})(?!192\.168(?:\.[0-9]{1,3}){2})(?!172\.(?:1[6-9]|2[0-9]|3[01])(?:\.[0-9]{1,3}){2})(?:[1-9][0-9]?|1[0-9][0-9]|2[01][0-9]|22[0-3])(?:\.(?:1?[0-9]{1,2}|2[0-4][0-9]|25[0-5])){2}(?:\.(?:[1-9][0-9]?|1[0-9][0-9]|2[0-4][0-9]|25[0-4]))|(?:(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)(?:\.(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)*(?:\.(?:(?:[a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]){2,})))(?::[0-9]{2,5})?(?:\/(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?$/i,Mu=/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,qu=/^(?:\/(?:[^~/]|~0|~1)*)*$/,zu=/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,Uu=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/;Vu.exports=Vn;function Vn(a){return a=a=="full"?"full":"fast",Ig.copy(Vn[a])}o(Vn,"formats");Vn.fast={date:/^\d\d\d\d-[0-1]\d-[0-3]\d$/,time:/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,"date-time":/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,"uri-template":Nu,url:ju,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i,hostname:Lu,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:Wu,uuid:Mu,"json-pointer":qu,"json-pointer-uri-fragment":zu,"relative-json-pointer":Uu};Vn.full={date:Bu,time:Hu,"date-time":zg,uri:Bg,"uri-reference":jg,"uri-template":Nu,url:ju,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:Lu,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:Wu,uuid:Mu,"json-pointer":qu,"json-pointer-uri-fragment":zu,"relative-json-pointer":Uu};function Mg(a){return a%4===0&&(a%100!==0||a%400===0)}o(Mg,"isLeapYear");function Bu(a){var e=a.match(Fg);if(!e)return!1;var r=+e[1],s=+e[2],t=+e[3];return s>=1&&s<=12&&t>=1&&t<=(s==2&&Mg(r)?29:$g[s])}o(Bu,"date");function Hu(a,e){var r=a.match(Lg);if(!r)return!1;var s=r[1],t=r[2],l=r[3],u=r[5];return(s<=23&&t<=59&&l<=59||s==23&&t==59&&l==60)&&(!e||u)}o(Hu,"time");var qg=/t|\s/i;function zg(a){var e=a.split(qg);return e.length==2&&Bu(e[0])&&Hu(e[1],!0)}o(zg,"date_time");var Ug=/\/|:/;function Bg(a){return Ug.test(a)&&Ng.test(a)}o(Bg,"uri");var Hg=/[^\\]\\Z/;function Wu(a){if(Hg.test(a))return!1;try{return new RegExp(a),!0}catch{return!1}}o(Wu,"regex")});var Gu=se((e_,Qu)=>{"use strict";Qu.exports=o(function(e,r,s){var t=" ",l=e.level,u=e.dataLevel,c=e.schema[r],h=e.errSchemaPath+"/"+r,p=!e.opts.allErrors,m="data"+(u||""),S="valid"+l,P,g;if(c=="#"||c=="#/")e.isRoot?(P=e.async,g="validate"):(P=e.root.schema.$async===!0,g="root.refVal[0]");else{var b=e.resolveRef(e.baseId,c,e.isRoot);if(b===void 0){var E=e.MissingRefError.message(e.baseId,c);if(e.opts.missingRefs=="fail"){e.logger.error(E);var _=_||[];_.push(t),t="",e.createErrors!==!1?(t+=" { keyword: '$ref' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { ref: '"+e.util.escapeQuotes(c)+"' } ",e.opts.messages!==!1&&(t+=" , message: 'can\\'t resolve reference "+e.util.escapeQuotes(c)+"' "),e.opts.verbose&&(t+=" , schema: "+e.util.toQuotedString(c)+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ";var T=t;t=_.pop(),!e.compositeRule&&p?e.async?t+=" throw new ValidationError(["+T+"]); ":t+=" validate.errors = ["+T+"]; return false; ":t+=" var err = "+T+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",p&&(t+=" if (false) { ")}else if(e.opts.missingRefs=="ignore")e.logger.warn(E),p&&(t+=" if (true) { ");else throw new e.MissingRefError(e.baseId,c,E)}else if(b.inline){var $=e.util.copy(e);$.level++;var k="valid"+$.level;$.schema=b.schema,$.schemaPath="",$.errSchemaPath=c;var D=e.validate($).replace(/validate\.schema/g,b.code);t+=" "+D+" ",p&&(t+=" if ("+k+") { ")}else P=b.$async===!0||e.async&&b.$async!==!1,g=b.code}if(g){var _=_||[];_.push(t),t="",e.opts.passContext?t+=" "+g+".call(this, ":t+=" "+g+"( ",t+=" "+m+", (dataPath || '')",e.errorPath!='""'&&(t+=" + "+e.errorPath);var F=u?"data"+(u-1||""):"parentData",L=u?e.dataPathArr[u]:"parentDataProperty";t+=" , "+F+" , "+L+", rootData)  ";var K=t;if(t=_.pop(),P){if(!e.async)throw new Error("async schema referenced by sync schema");p&&(t+=" var "+S+"; "),t+=" try { await "+K+"; ",p&&(t+=" "+S+" = true; "),t+=" } catch (e) { if (!(e instanceof ValidationError)) throw e; if (vErrors === null) vErrors = e.errors; else vErrors = vErrors.concat(e.errors); errors = vErrors.length; ",p&&(t+=" "+S+" = false; "),t+=" } ",p&&(t+=" if ("+S+") { ")}else t+=" if (!"+K+") { if (vErrors === null) vErrors = "+g+".errors; else vErrors = vErrors.concat("+g+".errors); errors = vErrors.length; } ",p&&(t+=" else { ")}return t},"generate_ref")});var Ku=se((r_,Yu)=>{"use strict";Yu.exports=o(function(e,r,s){var t=" ",l=e.schema[r],u=e.schemaPath+e.util.getProperty(r),c=e.errSchemaPath+"/"+r,h=!e.opts.allErrors,p=e.util.copy(e),m="";p.level++;var S="valid"+p.level,P=p.baseId,g=!0,b=l;if(b)for(var E,_=-1,T=b.length-1;_<T;)E=b[_+=1],(e.opts.strictKeywords?typeof E=="object"&&Object.keys(E).length>0||E===!1:e.util.schemaHasRules(E,e.RULES.all))&&(g=!1,p.schema=E,p.schemaPath=u+"["+_+"]",p.errSchemaPath=c+"/"+_,t+="  "+e.validate(p)+" ",p.baseId=P,h&&(t+=" if ("+S+") { ",m+="}"));return h&&(g?t+=" if (true) { ":t+=" "+m.slice(0,-1)+" "),t},"generate_allOf")});var Xu=se((s_,Ju)=>{"use strict";Ju.exports=o(function(e,r,s){var t=" ",l=e.level,u=e.dataLevel,c=e.schema[r],h=e.schemaPath+e.util.getProperty(r),p=e.errSchemaPath+"/"+r,m=!e.opts.allErrors,S="data"+(u||""),P="valid"+l,g="errs__"+l,b=e.util.copy(e),E="";b.level++;var _="valid"+b.level,T=c.every(function(Q){return e.opts.strictKeywords?typeof Q=="object"&&Object.keys(Q).length>0||Q===!1:e.util.schemaHasRules(Q,e.RULES.all)});if(T){var $=b.baseId;t+=" var "+g+" = errors; var "+P+" = false;  ";var k=e.compositeRule;e.compositeRule=b.compositeRule=!0;var D=c;if(D)for(var F,L=-1,K=D.length-1;L<K;)F=D[L+=1],b.schema=F,b.schemaPath=h+"["+L+"]",b.errSchemaPath=p+"/"+L,t+="  "+e.validate(b)+" ",b.baseId=$,t+=" "+P+" = "+P+" || "+_+"; if (!"+P+") { ",E+="}";e.compositeRule=b.compositeRule=k,t+=" "+E+" if (!"+P+") {   var err =   ",e.createErrors!==!1?(t+=" { keyword: 'anyOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: {} ",e.opts.messages!==!1&&(t+=" , message: 'should match some schema in anyOf' "),e.opts.verbose&&(t+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+S+" "),t+=" } "):t+=" {} ",t+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&m&&(e.async?t+=" throw new ValidationError(vErrors); ":t+=" validate.errors = vErrors; return false; "),t+=" } else {  errors = "+g+"; if (vErrors !== null) { if ("+g+") vErrors.length = "+g+"; else vErrors = null; } ",e.opts.allErrors&&(t+=" } ")}else m&&(t+=" if (true) { ");return t},"generate_anyOf")});var tc=se((o_,ec)=>{"use strict";ec.exports=o(function(e,r,s){var t=" ",l=e.schema[r],u=e.errSchemaPath+"/"+r,c=!e.opts.allErrors,h=e.util.toQuotedString(l);return e.opts.$comment===!0?t+=" console.log("+h+");":typeof e.opts.$comment=="function"&&(t+=" self._opts.$comment("+h+", "+e.util.toQuotedString(u)+", validate.root.schema);"),t},"generate_comment")});var ac=se((l_,rc)=>{"use strict";rc.exports=o(function(e,r,s){var t=" ",l=e.level,u=e.dataLevel,c=e.schema[r],h=e.schemaPath+e.util.getProperty(r),p=e.errSchemaPath+"/"+r,m=!e.opts.allErrors,S="data"+(u||""),P="valid"+l,g=e.opts.$data&&c&&c.$data,b;g?(t+=" var schema"+l+" = "+e.util.getData(c.$data,u,e.dataPathArr)+"; ",b="schema"+l):b=c,g||(t+=" var schema"+l+" = validate.schema"+h+";"),t+="var "+P+" = equal("+S+", schema"+l+"); if (!"+P+") {   ";var E=E||[];E.push(t),t="",e.createErrors!==!1?(t+=" { keyword: 'const' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: { allowedValue: schema"+l+" } ",e.opts.messages!==!1&&(t+=" , message: 'should be equal to constant' "),e.opts.verbose&&(t+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+S+" "),t+=" } "):t+=" {} ";var _=t;return t=E.pop(),!e.compositeRule&&m?e.async?t+=" throw new ValidationError(["+_+"]); ":t+=" validate.errors = ["+_+"]; return false; ":t+=" var err = "+_+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" }",m&&(t+=" else { "),t},"generate_const")});var nc=se((c_,sc)=>{"use strict";sc.exports=o(function(e,r,s){var t=" ",l=e.level,u=e.dataLevel,c=e.schema[r],h=e.schemaPath+e.util.getProperty(r),p=e.errSchemaPath+"/"+r,m=!e.opts.allErrors,S="data"+(u||""),P="valid"+l,g="errs__"+l,b=e.util.copy(e),E="";b.level++;var _="valid"+b.level,T="i"+l,$=b.dataLevel=e.dataLevel+1,k="data"+$,D=e.baseId,F=e.opts.strictKeywords?typeof c=="object"&&Object.keys(c).length>0||c===!1:e.util.schemaHasRules(c,e.RULES.all);if(t+="var "+g+" = errors;var "+P+";",F){var L=e.compositeRule;e.compositeRule=b.compositeRule=!0,b.schema=c,b.schemaPath=h,b.errSchemaPath=p,t+=" var "+_+" = false; for (var "+T+" = 0; "+T+" < "+S+".length; "+T+"++) { ",b.errorPath=e.util.getPathExpr(e.errorPath,T,e.opts.jsonPointers,!0);var K=S+"["+T+"]";b.dataPathArr[$]=T;var Q=e.validate(b);b.baseId=D,e.util.varOccurences(Q,k)<2?t+=" "+e.util.varReplace(Q,k,K)+" ":t+=" var "+k+" = "+K+"; "+Q+" ",t+=" if ("+_+") break; }  ",e.compositeRule=b.compositeRule=L,t+=" "+E+" if (!"+_+") {"}else t+=" if ("+S+".length == 0) {";var z=z||[];z.push(t),t="",e.createErrors!==!1?(t+=" { keyword: 'contains' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: {} ",e.opts.messages!==!1&&(t+=" , message: 'should contain a valid item' "),e.opts.verbose&&(t+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+S+" "),t+=" } "):t+=" {} ";var G=t;return t=z.pop(),!e.compositeRule&&m?e.async?t+=" throw new ValidationError(["+G+"]); ":t+=" validate.errors = ["+G+"]; return false; ":t+=" var err = "+G+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" } else { ",F&&(t+="  errors = "+g+"; if (vErrors !== null) { if ("+g+") vErrors.length = "+g+"; else vErrors = null; } "),e.opts.allErrors&&(t+=" } "),t},"generate_contains")});var ic=se((f_,oc)=>{"use strict";oc.exports=o(function(e,r,s){var t=" ",l=e.level,u=e.dataLevel,c=e.schema[r],h=e.schemaPath+e.util.getProperty(r),p=e.errSchemaPath+"/"+r,m=!e.opts.allErrors,S="data"+(u||""),P="errs__"+l,g=e.util.copy(e),b="";g.level++;var E="valid"+g.level,_={},T={},$=e.opts.ownProperties;for(L in c)if(L!="__proto__"){var k=c[L],D=Array.isArray(k)?T:_;D[L]=k}t+="var "+P+" = errors;";var F=e.errorPath;t+="var missing"+l+";";for(var L in T)if(D=T[L],D.length){if(t+=" if ( "+S+e.util.getProperty(L)+" !== undefined ",$&&(t+=" && Object.prototype.hasOwnProperty.call("+S+", '"+e.util.escapeQuotes(L)+"') "),m){t+=" && ( ";var K=D;if(K)for(var Q,z=-1,G=K.length-1;z<G;){Q=K[z+=1],z&&(t+=" || ");var Y=e.util.getProperty(Q),V=S+Y;t+=" ( ( "+V+" === undefined ",$&&(t+=" || ! Object.prototype.hasOwnProperty.call("+S+", '"+e.util.escapeQuotes(Q)+"') "),t+=") && (missing"+l+" = "+e.util.toQuotedString(e.opts.jsonPointers?Q:Y)+") ) "}t+=")) {  ";var N="missing"+l,q="' + "+N+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(F,N,!0):F+" + "+N);var Z=Z||[];Z.push(t),t="",e.createErrors!==!1?(t+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: { property: '"+e.util.escapeQuotes(L)+"', missingProperty: '"+q+"', depsCount: "+D.length+", deps: '"+e.util.escapeQuotes(D.length==1?D[0]:D.join(", "))+"' } ",e.opts.messages!==!1&&(t+=" , message: 'should have ",D.length==1?t+="property "+e.util.escapeQuotes(D[0]):t+="properties "+e.util.escapeQuotes(D.join(", ")),t+=" when property "+e.util.escapeQuotes(L)+" is present' "),e.opts.verbose&&(t+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+S+" "),t+=" } "):t+=" {} ";var Ee=t;t=Z.pop(),!e.compositeRule&&m?e.async?t+=" throw new ValidationError(["+Ee+"]); ":t+=" validate.errors = ["+Ee+"]; return false; ":t+=" var err = "+Ee+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else{t+=" ) { ";var fe=D;if(fe)for(var Q,pe=-1,de=fe.length-1;pe<de;){Q=fe[pe+=1];var Y=e.util.getProperty(Q),q=e.util.escapeQuotes(Q),V=S+Y;e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(F,Q,e.opts.jsonPointers)),t+=" if ( "+V+" === undefined ",$&&(t+=" || ! Object.prototype.hasOwnProperty.call("+S+", '"+e.util.escapeQuotes(Q)+"') "),t+=") {  var err =   ",e.createErrors!==!1?(t+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: { property: '"+e.util.escapeQuotes(L)+"', missingProperty: '"+q+"', depsCount: "+D.length+", deps: '"+e.util.escapeQuotes(D.length==1?D[0]:D.join(", "))+"' } ",e.opts.messages!==!1&&(t+=" , message: 'should have ",D.length==1?t+="property "+e.util.escapeQuotes(D[0]):t+="properties "+e.util.escapeQuotes(D.join(", ")),t+=" when property "+e.util.escapeQuotes(L)+" is present' "),e.opts.verbose&&(t+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+S+" "),t+=" } "):t+=" {} ",t+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}t+=" }   ",m&&(b+="}",t+=" else { ")}e.errorPath=F;var ee=g.baseId;for(var L in _){var k=_[L];(e.opts.strictKeywords?typeof k=="object"&&Object.keys(k).length>0||k===!1:e.util.schemaHasRules(k,e.RULES.all))&&(t+=" "+E+" = true; if ( "+S+e.util.getProperty(L)+" !== undefined ",$&&(t+=" && Object.prototype.hasOwnProperty.call("+S+", '"+e.util.escapeQuotes(L)+"') "),t+=") { ",g.schema=k,g.schemaPath=h+e.util.getProperty(L),g.errSchemaPath=p+"/"+e.util.escapeFragment(L),t+="  "+e.validate(g)+" ",g.baseId=ee,t+=" }  ",m&&(t+=" if ("+E+") { ",b+="}"))}return m&&(t+="   "+b+" if ("+P+" == errors) {"),t},"generate_dependencies")});var uc=se((p_,lc)=>{"use strict";lc.exports=o(function(e,r,s){var t=" ",l=e.level,u=e.dataLevel,c=e.schema[r],h=e.schemaPath+e.util.getProperty(r),p=e.errSchemaPath+"/"+r,m=!e.opts.allErrors,S="data"+(u||""),P="valid"+l,g=e.opts.$data&&c&&c.$data,b;g?(t+=" var schema"+l+" = "+e.util.getData(c.$data,u,e.dataPathArr)+"; ",b="schema"+l):b=c;var E="i"+l,_="schema"+l;g||(t+=" var "+_+" = validate.schema"+h+";"),t+="var "+P+";",g&&(t+=" if (schema"+l+" === undefined) "+P+" = true; else if (!Array.isArray(schema"+l+")) "+P+" = false; else {"),t+=""+P+" = false;for (var "+E+"=0; "+E+"<"+_+".length; "+E+"++) if (equal("+S+", "+_+"["+E+"])) { "+P+" = true; break; }",g&&(t+="  }  "),t+=" if (!"+P+") {   ";var T=T||[];T.push(t),t="",e.createErrors!==!1?(t+=" { keyword: 'enum' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: { allowedValues: schema"+l+" } ",e.opts.messages!==!1&&(t+=" , message: 'should be equal to one of the allowed values' "),e.opts.verbose&&(t+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+S+" "),t+=" } "):t+=" {} ";var $=t;return t=T.pop(),!e.compositeRule&&m?e.async?t+=" throw new ValidationError(["+$+"]); ":t+=" validate.errors = ["+$+"]; return false; ":t+=" var err = "+$+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" }",m&&(t+=" else { "),t},"generate_enum")});var dc=se((g_,cc)=>{"use strict";cc.exports=o(function(e,r,s){var t=" ",l=e.level,u=e.dataLevel,c=e.schema[r],h=e.schemaPath+e.util.getProperty(r),p=e.errSchemaPath+"/"+r,m=!e.opts.allErrors,S="data"+(u||"");if(e.opts.format===!1)return m&&(t+=" if (true) { "),t;var P=e.opts.$data&&c&&c.$data,g;P?(t+=" var schema"+l+" = "+e.util.getData(c.$data,u,e.dataPathArr)+"; ",g="schema"+l):g=c;var b=e.opts.unknownFormats,E=Array.isArray(b);if(P){var _="format"+l,T="isObject"+l,$="formatType"+l;t+=" var "+_+" = formats["+g+"]; var "+T+" = typeof "+_+" == 'object' && !("+_+" instanceof RegExp) && "+_+".validate; var "+$+" = "+T+" && "+_+".type || 'string'; if ("+T+") { ",e.async&&(t+=" var async"+l+" = "+_+".async; "),t+=" "+_+" = "+_+".validate; } if (  ",P&&(t+=" ("+g+" !== undefined && typeof "+g+" != 'string') || "),t+=" (",b!="ignore"&&(t+=" ("+g+" && !"+_+" ",E&&(t+=" && self._opts.unknownFormats.indexOf("+g+") == -1 "),t+=") || "),t+=" ("+_+" && "+$+" == '"+s+"' && !(typeof "+_+" == 'function' ? ",e.async?t+=" (async"+l+" ? await "+_+"("+S+") : "+_+"("+S+")) ":t+=" "+_+"("+S+") ",t+=" : "+_+".test("+S+"))))) {"}else{var _=e.formats[c];if(!_){if(b=="ignore")return e.logger.warn('unknown format "'+c+'" ignored in schema at path "'+e.errSchemaPath+'"'),m&&(t+=" if (true) { "),t;if(E&&b.indexOf(c)>=0)return m&&(t+=" if (true) { "),t;throw new Error('unknown format "'+c+'" is used in schema at path "'+e.errSchemaPath+'"')}var T=typeof _=="object"&&!(_ instanceof RegExp)&&_.validate,$=T&&_.type||"string";if(T){var k=_.async===!0;_=_.validate}if($!=s)return m&&(t+=" if (true) { "),t;if(k){if(!e.async)throw new Error("async format in sync schema");var D="formats"+e.util.getProperty(c)+".validate";t+=" if (!(await "+D+"("+S+"))) { "}else{t+=" if (! ";var D="formats"+e.util.getProperty(c);T&&(D+=".validate"),typeof _=="function"?t+=" "+D+"("+S+") ":t+=" "+D+".test("+S+") ",t+=") { "}}var F=F||[];F.push(t),t="",e.createErrors!==!1?(t+=" { keyword: 'format' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: { format:  ",P?t+=""+g:t+=""+e.util.toQuotedString(c),t+="  } ",e.opts.messages!==!1&&(t+=` , message: 'should match format "`,P?t+="' + "+g+" + '":t+=""+e.util.escapeQuotes(c),t+=`"' `),e.opts.verbose&&(t+=" , schema:  ",P?t+="validate.schema"+h:t+=""+e.util.toQuotedString(c),t+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+S+" "),t+=" } "):t+=" {} ";var L=t;return t=F.pop(),!e.compositeRule&&m?e.async?t+=" throw new ValidationError(["+L+"]); ":t+=" validate.errors = ["+L+"]; return false; ":t+=" var err = "+L+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" } ",m&&(t+=" else { "),t},"generate_format")});var hc=se((y_,fc)=>{"use strict";fc.exports=o(function(e,r,s){var t=" ",l=e.level,u=e.dataLevel,c=e.schema[r],h=e.schemaPath+e.util.getProperty(r),p=e.errSchemaPath+"/"+r,m=!e.opts.allErrors,S="data"+(u||""),P="valid"+l,g="errs__"+l,b=e.util.copy(e);b.level++;var E="valid"+b.level,_=e.schema.then,T=e.schema.else,$=_!==void 0&&(e.opts.strictKeywords?typeof _=="object"&&Object.keys(_).length>0||_===!1:e.util.schemaHasRules(_,e.RULES.all)),k=T!==void 0&&(e.opts.strictKeywords?typeof T=="object"&&Object.keys(T).length>0||T===!1:e.util.schemaHasRules(T,e.RULES.all)),D=b.baseId;if($||k){var F;b.createErrors=!1,b.schema=c,b.schemaPath=h,b.errSchemaPath=p,t+=" var "+g+" = errors; var "+P+" = true;  ";var L=e.compositeRule;e.compositeRule=b.compositeRule=!0,t+="  "+e.validate(b)+" ",b.baseId=D,b.createErrors=!0,t+="  errors = "+g+"; if (vErrors !== null) { if ("+g+") vErrors.length = "+g+"; else vErrors = null; }  ",e.compositeRule=b.compositeRule=L,$?(t+=" if ("+E+") {  ",b.schema=e.schema.then,b.schemaPath=e.schemaPath+".then",b.errSchemaPath=e.errSchemaPath+"/then",t+="  "+e.validate(b)+" ",b.baseId=D,t+=" "+P+" = "+E+"; ",$&&k?(F="ifClause"+l,t+=" var "+F+" = 'then'; "):F="'then'",t+=" } ",k&&(t+=" else { ")):t+=" if (!"+E+") { ",k&&(b.schema=e.schema.else,b.schemaPath=e.schemaPath+".else",b.errSchemaPath=e.errSchemaPath+"/else",t+="  "+e.validate(b)+" ",b.baseId=D,t+=" "+P+" = "+E+"; ",$&&k?(F="ifClause"+l,t+=" var "+F+" = 'else'; "):F="'else'",t+=" } "),t+=" if (!"+P+") {   var err =   ",e.createErrors!==!1?(t+=" { keyword: 'if' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: { failingKeyword: "+F+" } ",e.opts.messages!==!1&&(t+=` , message: 'should match "' + `+F+` + '" schema' `),e.opts.verbose&&(t+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+S+" "),t+=" } "):t+=" {} ",t+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&m&&(e.async?t+=" throw new ValidationError(vErrors); ":t+=" validate.errors = vErrors; return false; "),t+=" }   ",m&&(t+=" else { ")}else m&&(t+=" if (true) { ");return t},"generate_if")});var mc=se((__,pc)=>{"use strict";pc.exports=o(function(e,r,s){var t=" ",l=e.level,u=e.dataLevel,c=e.schema[r],h=e.schemaPath+e.util.getProperty(r),p=e.errSchemaPath+"/"+r,m=!e.opts.allErrors,S="data"+(u||""),P="valid"+l,g="errs__"+l,b=e.util.copy(e),E="";b.level++;var _="valid"+b.level,T="i"+l,$=b.dataLevel=e.dataLevel+1,k="data"+$,D=e.baseId;if(t+="var "+g+" = errors;var "+P+";",Array.isArray(c)){var F=e.schema.additionalItems;if(F===!1){t+=" "+P+" = "+S+".length <= "+c.length+"; ";var L=p;p=e.errSchemaPath+"/additionalItems",t+="  if (!"+P+") {   ";var K=K||[];K.push(t),t="",e.createErrors!==!1?(t+=" { keyword: 'additionalItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: { limit: "+c.length+" } ",e.opts.messages!==!1&&(t+=" , message: 'should NOT have more than "+c.length+" items' "),e.opts.verbose&&(t+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+S+" "),t+=" } "):t+=" {} ";var Q=t;t=K.pop(),!e.compositeRule&&m?e.async?t+=" throw new ValidationError(["+Q+"]); ":t+=" validate.errors = ["+Q+"]; return false; ":t+=" var err = "+Q+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" } ",p=L,m&&(E+="}",t+=" else { ")}var z=c;if(z){for(var G,Y=-1,V=z.length-1;Y<V;)if(G=z[Y+=1],e.opts.strictKeywords?typeof G=="object"&&Object.keys(G).length>0||G===!1:e.util.schemaHasRules(G,e.RULES.all)){t+=" "+_+" = true; if ("+S+".length > "+Y+") { ";var N=S+"["+Y+"]";b.schema=G,b.schemaPath=h+"["+Y+"]",b.errSchemaPath=p+"/"+Y,b.errorPath=e.util.getPathExpr(e.errorPath,Y,e.opts.jsonPointers,!0),b.dataPathArr[$]=Y;var q=e.validate(b);b.baseId=D,e.util.varOccurences(q,k)<2?t+=" "+e.util.varReplace(q,k,N)+" ":t+=" var "+k+" = "+N+"; "+q+" ",t+=" }  ",m&&(t+=" if ("+_+") { ",E+="}")}}if(typeof F=="object"&&(e.opts.strictKeywords?typeof F=="object"&&Object.keys(F).length>0||F===!1:e.util.schemaHasRules(F,e.RULES.all))){b.schema=F,b.schemaPath=e.schemaPath+".additionalItems",b.errSchemaPath=e.errSchemaPath+"/additionalItems",t+=" "+_+" = true; if ("+S+".length > "+c.length+") {  for (var "+T+" = "+c.length+"; "+T+" < "+S+".length; "+T+"++) { ",b.errorPath=e.util.getPathExpr(e.errorPath,T,e.opts.jsonPointers,!0);var N=S+"["+T+"]";b.dataPathArr[$]=T;var q=e.validate(b);b.baseId=D,e.util.varOccurences(q,k)<2?t+=" "+e.util.varReplace(q,k,N)+" ":t+=" var "+k+" = "+N+"; "+q+" ",m&&(t+=" if (!"+_+") break; "),t+=" } }  ",m&&(t+=" if ("+_+") { ",E+="}")}}else if(e.opts.strictKeywords?typeof c=="object"&&Object.keys(c).length>0||c===!1:e.util.schemaHasRules(c,e.RULES.all)){b.schema=c,b.schemaPath=h,b.errSchemaPath=p,t+="  for (var "+T+" = 0; "+T+" < "+S+".length; "+T+"++) { ",b.errorPath=e.util.getPathExpr(e.errorPath,T,e.opts.jsonPointers,!0);var N=S+"["+T+"]";b.dataPathArr[$]=T;var q=e.validate(b);b.baseId=D,e.util.varOccurences(q,k)<2?t+=" "+e.util.varReplace(q,k,N)+" ":t+=" var "+k+" = "+N+"; "+q+" ",m&&(t+=" if (!"+_+") break; "),t+=" }"}return m&&(t+=" "+E+" if ("+g+" == errors) {"),t},"generate_items")});var Si=se((w_,gc)=>{"use strict";gc.exports=o(function(e,r,s){var t=" ",l=e.level,u=e.dataLevel,c=e.schema[r],h=e.schemaPath+e.util.getProperty(r),p=e.errSchemaPath+"/"+r,m=!e.opts.allErrors,D,S="data"+(u||""),P=e.opts.$data&&c&&c.$data,g;P?(t+=" var schema"+l+" = "+e.util.getData(c.$data,u,e.dataPathArr)+"; ",g="schema"+l):g=c;var b=r=="maximum",E=b?"exclusiveMaximum":"exclusiveMinimum",_=e.schema[E],T=e.opts.$data&&_&&_.$data,$=b?"<":">",k=b?">":"<",D=void 0;if(!(P||typeof c=="number"||c===void 0))throw new Error(r+" must be number");if(!(T||_===void 0||typeof _=="number"||typeof _=="boolean"))throw new Error(E+" must be number or boolean");if(T){var F=e.util.getData(_.$data,u,e.dataPathArr),L="exclusive"+l,K="exclType"+l,Q="exclIsNumber"+l,z="op"+l,G="' + "+z+" + '";t+=" var schemaExcl"+l+" = "+F+"; ",F="schemaExcl"+l,t+=" var "+L+"; var "+K+" = typeof "+F+"; if ("+K+" != 'boolean' && "+K+" != 'undefined' && "+K+" != 'number') { ";var D=E,Y=Y||[];Y.push(t),t="",e.createErrors!==!1?(t+=" { keyword: '"+(D||"_exclusiveLimit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: {} ",e.opts.messages!==!1&&(t+=" , message: '"+E+" should be boolean' "),e.opts.verbose&&(t+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+S+" "),t+=" } "):t+=" {} ";var V=t;t=Y.pop(),!e.compositeRule&&m?e.async?t+=" throw new ValidationError(["+V+"]); ":t+=" validate.errors = ["+V+"]; return false; ":t+=" var err = "+V+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" } else if ( ",P&&(t+=" ("+g+" !== undefined && typeof "+g+" != 'number') || "),t+=" "+K+" == 'number' ? ( ("+L+" = "+g+" === undefined || "+F+" "+$+"= "+g+") ? "+S+" "+k+"= "+F+" : "+S+" "+k+" "+g+" ) : ( ("+L+" = "+F+" === true) ? "+S+" "+k+"= "+g+" : "+S+" "+k+" "+g+" ) || "+S+" !== "+S+") { var op"+l+" = "+L+" ? '"+$+"' : '"+$+"='; ",c===void 0&&(D=E,p=e.errSchemaPath+"/"+E,g=F,P=T)}else{var Q=typeof _=="number",G=$;if(Q&&P){var z="'"+G+"'";t+=" if ( ",P&&(t+=" ("+g+" !== undefined && typeof "+g+" != 'number') || "),t+=" ( "+g+" === undefined || "+_+" "+$+"= "+g+" ? "+S+" "+k+"= "+_+" : "+S+" "+k+" "+g+" ) || "+S+" !== "+S+") { "}else{Q&&c===void 0?(L=!0,D=E,p=e.errSchemaPath+"/"+E,g=_,k+="="):(Q&&(g=Math[b?"min":"max"](_,c)),_===(Q?g:!0)?(L=!0,D=E,p=e.errSchemaPath+"/"+E,k+="="):(L=!1,G+="="));var z="'"+G+"'";t+=" if ( ",P&&(t+=" ("+g+" !== undefined && typeof "+g+" != 'number') || "),t+=" "+S+" "+k+" "+g+" || "+S+" !== "+S+") { "}}D=D||r;var Y=Y||[];Y.push(t),t="",e.createErrors!==!1?(t+=" { keyword: '"+(D||"_limit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: { comparison: "+z+", limit: "+g+", exclusive: "+L+" } ",e.opts.messages!==!1&&(t+=" , message: 'should be "+G+" ",P?t+="' + "+g:t+=""+g+"'"),e.opts.verbose&&(t+=" , schema:  ",P?t+="validate.schema"+h:t+=""+c,t+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+S+" "),t+=" } "):t+=" {} ";var V=t;return t=Y.pop(),!e.compositeRule&&m?e.async?t+=" throw new ValidationError(["+V+"]); ":t+=" validate.errors = ["+V+"]; return false; ":t+=" var err = "+V+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" } ",m&&(t+=" else { "),t},"generate__limit")});var wi=se((E_,vc)=>{"use strict";vc.exports=o(function(e,r,s){var t=" ",l=e.level,u=e.dataLevel,c=e.schema[r],h=e.schemaPath+e.util.getProperty(r),p=e.errSchemaPath+"/"+r,m=!e.opts.allErrors,E,S="data"+(u||""),P=e.opts.$data&&c&&c.$data,g;if(P?(t+=" var schema"+l+" = "+e.util.getData(c.$data,u,e.dataPathArr)+"; ",g="schema"+l):g=c,!(P||typeof c=="number"))throw new Error(r+" must be number");var b=r=="maxItems"?">":"<";t+="if ( ",P&&(t+=" ("+g+" !== undefined && typeof "+g+" != 'number') || "),t+=" "+S+".length "+b+" "+g+") { ";var E=r,_=_||[];_.push(t),t="",e.createErrors!==!1?(t+=" { keyword: '"+(E||"_limitItems")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: { limit: "+g+" } ",e.opts.messages!==!1&&(t+=" , message: 'should NOT have ",r=="maxItems"?t+="more":t+="fewer",t+=" than ",P?t+="' + "+g+" + '":t+=""+c,t+=" items' "),e.opts.verbose&&(t+=" , schema:  ",P?t+="validate.schema"+h:t+=""+c,t+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+S+" "),t+=" } "):t+=" {} ";var T=t;return t=_.pop(),!e.compositeRule&&m?e.async?t+=" throw new ValidationError(["+T+"]); ":t+=" validate.errors = ["+T+"]; return false; ":t+=" var err = "+T+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+="} ",m&&(t+=" else { "),t},"generate__limitItems")});var Pi=se((x_,yc)=>{"use strict";yc.exports=o(function(e,r,s){var t=" ",l=e.level,u=e.dataLevel,c=e.schema[r],h=e.schemaPath+e.util.getProperty(r),p=e.errSchemaPath+"/"+r,m=!e.opts.allErrors,E,S="data"+(u||""),P=e.opts.$data&&c&&c.$data,g;if(P?(t+=" var schema"+l+" = "+e.util.getData(c.$data,u,e.dataPathArr)+"; ",g="schema"+l):g=c,!(P||typeof c=="number"))throw new Error(r+" must be number");var b=r=="maxLength"?">":"<";t+="if ( ",P&&(t+=" ("+g+" !== undefined && typeof "+g+" != 'number') || "),e.opts.unicode===!1?t+=" "+S+".length ":t+=" ucs2length("+S+") ",t+=" "+b+" "+g+") { ";var E=r,_=_||[];_.push(t),t="",e.createErrors!==!1?(t+=" { keyword: '"+(E||"_limitLength")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: { limit: "+g+" } ",e.opts.messages!==!1&&(t+=" , message: 'should NOT be ",r=="maxLength"?t+="longer":t+="shorter",t+=" than ",P?t+="' + "+g+" + '":t+=""+c,t+=" characters' "),e.opts.verbose&&(t+=" , schema:  ",P?t+="validate.schema"+h:t+=""+c,t+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+S+" "),t+=" } "):t+=" {} ";var T=t;return t=_.pop(),!e.compositeRule&&m?e.async?t+=" throw new ValidationError(["+T+"]); ":t+=" validate.errors = ["+T+"]; return false; ":t+=" var err = "+T+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+="} ",m&&(t+=" else { "),t},"generate__limitLength")});var Ei=se((A_,bc)=>{"use strict";bc.exports=o(function(e,r,s){var t=" ",l=e.level,u=e.dataLevel,c=e.schema[r],h=e.schemaPath+e.util.getProperty(r),p=e.errSchemaPath+"/"+r,m=!e.opts.allErrors,E,S="data"+(u||""),P=e.opts.$data&&c&&c.$data,g;if(P?(t+=" var schema"+l+" = "+e.util.getData(c.$data,u,e.dataPathArr)+"; ",g="schema"+l):g=c,!(P||typeof c=="number"))throw new Error(r+" must be number");var b=r=="maxProperties"?">":"<";t+="if ( ",P&&(t+=" ("+g+" !== undefined && typeof "+g+" != 'number') || "),t+=" Object.keys("+S+").length "+b+" "+g+") { ";var E=r,_=_||[];_.push(t),t="",e.createErrors!==!1?(t+=" { keyword: '"+(E||"_limitProperties")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: { limit: "+g+" } ",e.opts.messages!==!1&&(t+=" , message: 'should NOT have ",r=="maxProperties"?t+="more":t+="fewer",t+=" than ",P?t+="' + "+g+" + '":t+=""+c,t+=" properties' "),e.opts.verbose&&(t+=" , schema:  ",P?t+="validate.schema"+h:t+=""+c,t+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+S+" "),t+=" } "):t+=" {} ";var T=t;return t=_.pop(),!e.compositeRule&&m?e.async?t+=" throw new ValidationError(["+T+"]); ":t+=" validate.errors = ["+T+"]; return false; ":t+=" var err = "+T+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+="} ",m&&(t+=" else { "),t},"generate__limitProperties")});var Sc=se((O_,_c)=>{"use strict";_c.exports=o(function(e,r,s){var t=" ",l=e.level,u=e.dataLevel,c=e.schema[r],h=e.schemaPath+e.util.getProperty(r),p=e.errSchemaPath+"/"+r,m=!e.opts.allErrors,S="data"+(u||""),P=e.opts.$data&&c&&c.$data,g;if(P?(t+=" var schema"+l+" = "+e.util.getData(c.$data,u,e.dataPathArr)+"; ",g="schema"+l):g=c,!(P||typeof c=="number"))throw new Error(r+" must be number");t+="var division"+l+";if (",P&&(t+=" "+g+" !== undefined && ( typeof "+g+" != 'number' || "),t+=" (division"+l+" = "+S+" / "+g+", ",e.opts.multipleOfPrecision?t+=" Math.abs(Math.round(division"+l+") - division"+l+") > 1e-"+e.opts.multipleOfPrecision+" ":t+=" division"+l+" !== parseInt(division"+l+") ",t+=" ) ",P&&(t+="  )  "),t+=" ) {   ";var b=b||[];b.push(t),t="",e.createErrors!==!1?(t+=" { keyword: 'multipleOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: { multipleOf: "+g+" } ",e.opts.messages!==!1&&(t+=" , message: 'should be multiple of ",P?t+="' + "+g:t+=""+g+"'"),e.opts.verbose&&(t+=" , schema:  ",P?t+="validate.schema"+h:t+=""+c,t+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+S+" "),t+=" } "):t+=" {} ";var E=t;return t=b.pop(),!e.compositeRule&&m?e.async?t+=" throw new ValidationError(["+E+"]); ":t+=" validate.errors = ["+E+"]; return false; ":t+=" var err = "+E+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+="} ",m&&(t+=" else { "),t},"generate_multipleOf")});var Pc=se((D_,wc)=>{"use strict";wc.exports=o(function(e,r,s){var t=" ",l=e.level,u=e.dataLevel,c=e.schema[r],h=e.schemaPath+e.util.getProperty(r),p=e.errSchemaPath+"/"+r,m=!e.opts.allErrors,S="data"+(u||""),P="errs__"+l,g=e.util.copy(e);g.level++;var b="valid"+g.level;if(e.opts.strictKeywords?typeof c=="object"&&Object.keys(c).length>0||c===!1:e.util.schemaHasRules(c,e.RULES.all)){g.schema=c,g.schemaPath=h,g.errSchemaPath=p,t+=" var "+P+" = errors;  ";var E=e.compositeRule;e.compositeRule=g.compositeRule=!0,g.createErrors=!1;var _;g.opts.allErrors&&(_=g.opts.allErrors,g.opts.allErrors=!1),t+=" "+e.validate(g)+" ",g.createErrors=!0,_&&(g.opts.allErrors=_),e.compositeRule=g.compositeRule=E,t+=" if ("+b+") {   ";var T=T||[];T.push(t),t="",e.createErrors!==!1?(t+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: {} ",e.opts.messages!==!1&&(t+=" , message: 'should NOT be valid' "),e.opts.verbose&&(t+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+S+" "),t+=" } "):t+=" {} ";var $=t;t=T.pop(),!e.compositeRule&&m?e.async?t+=" throw new ValidationError(["+$+"]); ":t+=" validate.errors = ["+$+"]; return false; ":t+=" var err = "+$+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" } else {  errors = "+P+"; if (vErrors !== null) { if ("+P+") vErrors.length = "+P+"; else vErrors = null; } ",e.opts.allErrors&&(t+=" } ")}else t+="  var err =   ",e.createErrors!==!1?(t+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: {} ",e.opts.messages!==!1&&(t+=" , message: 'should NOT be valid' "),e.opts.verbose&&(t+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+S+" "),t+=" } "):t+=" {} ",t+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",m&&(t+=" if (false) { ");return t},"generate_not")});var Rc=se((F_,Ec)=>{"use strict";Ec.exports=o(function(e,r,s){var t=" ",l=e.level,u=e.dataLevel,c=e.schema[r],h=e.schemaPath+e.util.getProperty(r),p=e.errSchemaPath+"/"+r,m=!e.opts.allErrors,S="data"+(u||""),P="valid"+l,g="errs__"+l,b=e.util.copy(e),E="";b.level++;var _="valid"+b.level,T=b.baseId,$="prevValid"+l,k="passingSchemas"+l;t+="var "+g+" = errors , "+$+" = false , "+P+" = false , "+k+" = null; ";var D=e.compositeRule;e.compositeRule=b.compositeRule=!0;var F=c;if(F)for(var L,K=-1,Q=F.length-1;K<Q;)L=F[K+=1],(e.opts.strictKeywords?typeof L=="object"&&Object.keys(L).length>0||L===!1:e.util.schemaHasRules(L,e.RULES.all))?(b.schema=L,b.schemaPath=h+"["+K+"]",b.errSchemaPath=p+"/"+K,t+="  "+e.validate(b)+" ",b.baseId=T):t+=" var "+_+" = true; ",K&&(t+=" if ("+_+" && "+$+") { "+P+" = false; "+k+" = ["+k+", "+K+"]; } else { ",E+="}"),t+=" if ("+_+") { "+P+" = "+$+" = true; "+k+" = "+K+"; }";return e.compositeRule=b.compositeRule=D,t+=""+E+"if (!"+P+") {   var err =   ",e.createErrors!==!1?(t+=" { keyword: 'oneOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: { passingSchemas: "+k+" } ",e.opts.messages!==!1&&(t+=" , message: 'should match exactly one schema in oneOf' "),e.opts.verbose&&(t+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+S+" "),t+=" } "):t+=" {} ",t+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&m&&(e.async?t+=" throw new ValidationError(vErrors); ":t+=" validate.errors = vErrors; return false; "),t+="} else {  errors = "+g+"; if (vErrors !== null) { if ("+g+") vErrors.length = "+g+"; else vErrors = null; }",e.opts.allErrors&&(t+=" } "),t},"generate_oneOf")});var Tc=se((L_,xc)=>{"use strict";xc.exports=o(function(e,r,s){var t=" ",l=e.level,u=e.dataLevel,c=e.schema[r],h=e.schemaPath+e.util.getProperty(r),p=e.errSchemaPath+"/"+r,m=!e.opts.allErrors,S="data"+(u||""),P=e.opts.$data&&c&&c.$data,g;P?(t+=" var schema"+l+" = "+e.util.getData(c.$data,u,e.dataPathArr)+"; ",g="schema"+l):g=c;var b=P?"(new RegExp("+g+"))":e.usePattern(c);t+="if ( ",P&&(t+=" ("+g+" !== undefined && typeof "+g+" != 'string') || "),t+=" !"+b+".test("+S+") ) {   ";var E=E||[];E.push(t),t="",e.createErrors!==!1?(t+=" { keyword: 'pattern' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: { pattern:  ",P?t+=""+g:t+=""+e.util.toQuotedString(c),t+="  } ",e.opts.messages!==!1&&(t+=` , message: 'should match pattern "`,P?t+="' + "+g+" + '":t+=""+e.util.escapeQuotes(c),t+=`"' `),e.opts.verbose&&(t+=" , schema:  ",P?t+="validate.schema"+h:t+=""+e.util.toQuotedString(c),t+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+S+" "),t+=" } "):t+=" {} ";var _=t;return t=E.pop(),!e.compositeRule&&m?e.async?t+=" throw new ValidationError(["+_+"]); ":t+=" validate.errors = ["+_+"]; return false; ":t+=" var err = "+_+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+="} ",m&&(t+=" else { "),t},"generate_pattern")});var Cc=se((j_,Ac)=>{"use strict";Ac.exports=o(function(e,r,s){var t=" ",l=e.level,u=e.dataLevel,c=e.schema[r],h=e.schemaPath+e.util.getProperty(r),p=e.errSchemaPath+"/"+r,m=!e.opts.allErrors,S="data"+(u||""),P="errs__"+l,g=e.util.copy(e),b="";g.level++;var E="valid"+g.level,_="key"+l,T="idx"+l,$=g.dataLevel=e.dataLevel+1,k="data"+$,D="dataProperties"+l,F=Object.keys(c||{}).filter(pe),L=e.schema.patternProperties||{},K=Object.keys(L).filter(pe),Q=e.schema.additionalProperties,z=F.length||K.length,G=Q===!1,Y=typeof Q=="object"&&Object.keys(Q).length,V=e.opts.removeAdditional,N=G||Y||V,q=e.opts.ownProperties,Z=e.baseId,Ee=e.schema.required;if(Ee&&!(e.opts.$data&&Ee.$data)&&Ee.length<e.opts.loopRequired)var fe=e.util.toHash(Ee);function pe(ht){return ht!=="__proto__"}if(o(pe,"notProto"),t+="var "+P+" = errors;var "+E+" = true;",q&&(t+=" var "+D+" = undefined;"),N){if(q?t+=" "+D+" = "+D+" || Object.keys("+S+"); for (var "+T+"=0; "+T+"<"+D+".length; "+T+"++) { var "+_+" = "+D+"["+T+"]; ":t+=" for (var "+_+" in "+S+") { ",z){if(t+=" var isAdditional"+l+" = !(false ",F.length)if(F.length>8)t+=" || validate.schema"+h+".hasOwnProperty("+_+") ";else{var de=F;if(de)for(var ee,$e=-1,Ge=de.length-1;$e<Ge;)ee=de[$e+=1],t+=" || "+_+" == "+e.util.toQuotedString(ee)+" "}if(K.length){var Xe=K;if(Xe)for(var ie,Pe=-1,We=Xe.length-1;Pe<We;)ie=Xe[Pe+=1],t+=" || "+e.usePattern(ie)+".test("+_+") "}t+=" ); if (isAdditional"+l+") { "}if(V=="all")t+=" delete "+S+"["+_+"]; ";else{var Ye=e.errorPath,Ke="' + "+_+" + '";if(e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(e.errorPath,_,e.opts.jsonPointers)),G)if(V)t+=" delete "+S+"["+_+"]; ";else{t+=" "+E+" = false; ";var St=p;p=e.errSchemaPath+"/additionalProperties";var je=je||[];je.push(t),t="",e.createErrors!==!1?(t+=" { keyword: 'additionalProperties' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: { additionalProperty: '"+Ke+"' } ",e.opts.messages!==!1&&(t+=" , message: '",e.opts._errorDataPathProperty?t+="is an invalid additional property":t+="should NOT have additional properties",t+="' "),e.opts.verbose&&(t+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+S+" "),t+=" } "):t+=" {} ";var Le=t;t=je.pop(),!e.compositeRule&&m?e.async?t+=" throw new ValidationError(["+Le+"]); ":t+=" validate.errors = ["+Le+"]; return false; ":t+=" var err = "+Le+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",p=St,m&&(t+=" break; ")}else if(Y)if(V=="failing"){t+=" var "+P+" = errors;  ";var lr=e.compositeRule;e.compositeRule=g.compositeRule=!0,g.schema=Q,g.schemaPath=e.schemaPath+".additionalProperties",g.errSchemaPath=e.errSchemaPath+"/additionalProperties",g.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,_,e.opts.jsonPointers);var Ve=S+"["+_+"]";g.dataPathArr[$]=_;var _e=e.validate(g);g.baseId=Z,e.util.varOccurences(_e,k)<2?t+=" "+e.util.varReplace(_e,k,Ve)+" ":t+=" var "+k+" = "+Ve+"; "+_e+" ",t+=" if (!"+E+") { errors = "+P+"; if (validate.errors !== null) { if (errors) validate.errors.length = errors; else validate.errors = null; } delete "+S+"["+_+"]; }  ",e.compositeRule=g.compositeRule=lr}else{g.schema=Q,g.schemaPath=e.schemaPath+".additionalProperties",g.errSchemaPath=e.errSchemaPath+"/additionalProperties",g.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,_,e.opts.jsonPointers);var Ve=S+"["+_+"]";g.dataPathArr[$]=_;var _e=e.validate(g);g.baseId=Z,e.util.varOccurences(_e,k)<2?t+=" "+e.util.varReplace(_e,k,Ve)+" ":t+=" var "+k+" = "+Ve+"; "+_e+" ",m&&(t+=" if (!"+E+") break; ")}e.errorPath=Ye}z&&(t+=" } "),t+=" }  ",m&&(t+=" if ("+E+") { ",b+="}")}var lt=e.opts.useDefaults&&!e.compositeRule;if(F.length){var Et=F;if(Et)for(var ee,Mt=-1,Rt=Et.length-1;Mt<Rt;){ee=Et[Mt+=1];var Ze=c[ee];if(e.opts.strictKeywords?typeof Ze=="object"&&Object.keys(Ze).length>0||Ze===!1:e.util.schemaHasRules(Ze,e.RULES.all)){var Be=e.util.getProperty(ee),Ve=S+Be,qe=lt&&Ze.default!==void 0;g.schema=Ze,g.schemaPath=h+Be,g.errSchemaPath=p+"/"+e.util.escapeFragment(ee),g.errorPath=e.util.getPath(e.errorPath,ee,e.opts.jsonPointers),g.dataPathArr[$]=e.util.toQuotedString(ee);var _e=e.validate(g);if(g.baseId=Z,e.util.varOccurences(_e,k)<2){_e=e.util.varReplace(_e,k,Ve);var He=Ve}else{var He=k;t+=" var "+k+" = "+Ve+"; "}if(qe)t+=" "+_e+" ";else{if(fe&&fe[ee]){t+=" if ( "+He+" === undefined ",q&&(t+=" || ! Object.prototype.hasOwnProperty.call("+S+", '"+e.util.escapeQuotes(ee)+"') "),t+=") { "+E+" = false; ";var Ye=e.errorPath,St=p,xt=e.util.escapeQuotes(ee);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(Ye,ee,e.opts.jsonPointers)),p=e.errSchemaPath+"/required";var je=je||[];je.push(t),t="",e.createErrors!==!1?(t+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: { missingProperty: '"+xt+"' } ",e.opts.messages!==!1&&(t+=" , message: '",e.opts._errorDataPathProperty?t+="is a required property":t+="should have required property \\'"+xt+"\\'",t+="' "),e.opts.verbose&&(t+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+S+" "),t+=" } "):t+=" {} ";var Le=t;t=je.pop(),!e.compositeRule&&m?e.async?t+=" throw new ValidationError(["+Le+"]); ":t+=" validate.errors = ["+Le+"]; return false; ":t+=" var err = "+Le+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",p=St,e.errorPath=Ye,t+=" } else { "}else m?(t+=" if ( "+He+" === undefined ",q&&(t+=" || ! Object.prototype.hasOwnProperty.call("+S+", '"+e.util.escapeQuotes(ee)+"') "),t+=") { "+E+" = true; } else { "):(t+=" if ("+He+" !== undefined ",q&&(t+=" &&   Object.prototype.hasOwnProperty.call("+S+", '"+e.util.escapeQuotes(ee)+"') "),t+=" ) { ");t+=" "+_e+" } "}}m&&(t+=" if ("+E+") { ",b+="}")}}if(K.length){var rt=K;if(rt)for(var ie,ur=-1,ts=rt.length-1;ur<ts;){ie=rt[ur+=1];var Ze=L[ie];if(e.opts.strictKeywords?typeof Ze=="object"&&Object.keys(Ze).length>0||Ze===!1:e.util.schemaHasRules(Ze,e.RULES.all)){g.schema=Ze,g.schemaPath=e.schemaPath+".patternProperties"+e.util.getProperty(ie),g.errSchemaPath=e.errSchemaPath+"/patternProperties/"+e.util.escapeFragment(ie),q?t+=" "+D+" = "+D+" || Object.keys("+S+"); for (var "+T+"=0; "+T+"<"+D+".length; "+T+"++) { var "+_+" = "+D+"["+T+"]; ":t+=" for (var "+_+" in "+S+") { ",t+=" if ("+e.usePattern(ie)+".test("+_+")) { ",g.errorPath=e.util.getPathExpr(e.errorPath,_,e.opts.jsonPointers);var Ve=S+"["+_+"]";g.dataPathArr[$]=_;var _e=e.validate(g);g.baseId=Z,e.util.varOccurences(_e,k)<2?t+=" "+e.util.varReplace(_e,k,Ve)+" ":t+=" var "+k+" = "+Ve+"; "+_e+" ",m&&(t+=" if (!"+E+") break; "),t+=" } ",m&&(t+=" else "+E+" = true; "),t+=" }  ",m&&(t+=" if ("+E+") { ",b+="}")}}}return m&&(t+=" "+b+" if ("+P+" == errors) {"),t},"generate_properties")});var kc=se((q_,Oc)=>{"use strict";Oc.exports=o(function(e,r,s){var t=" ",l=e.level,u=e.dataLevel,c=e.schema[r],h=e.schemaPath+e.util.getProperty(r),p=e.errSchemaPath+"/"+r,m=!e.opts.allErrors,S="data"+(u||""),P="errs__"+l,g=e.util.copy(e),b="";g.level++;var E="valid"+g.level;if(t+="var "+P+" = errors;",e.opts.strictKeywords?typeof c=="object"&&Object.keys(c).length>0||c===!1:e.util.schemaHasRules(c,e.RULES.all)){g.schema=c,g.schemaPath=h,g.errSchemaPath=p;var _="key"+l,T="idx"+l,$="i"+l,k="' + "+_+" + '",D=g.dataLevel=e.dataLevel+1,F="data"+D,L="dataProperties"+l,K=e.opts.ownProperties,Q=e.baseId;K&&(t+=" var "+L+" = undefined; "),K?t+=" "+L+" = "+L+" || Object.keys("+S+"); for (var "+T+"=0; "+T+"<"+L+".length; "+T+"++) { var "+_+" = "+L+"["+T+"]; ":t+=" for (var "+_+" in "+S+") { ",t+=" var startErrs"+l+" = errors; ";var z=_,G=e.compositeRule;e.compositeRule=g.compositeRule=!0;var Y=e.validate(g);g.baseId=Q,e.util.varOccurences(Y,F)<2?t+=" "+e.util.varReplace(Y,F,z)+" ":t+=" var "+F+" = "+z+"; "+Y+" ",e.compositeRule=g.compositeRule=G,t+=" if (!"+E+") { for (var "+$+"=startErrs"+l+"; "+$+"<errors; "+$+"++) { vErrors["+$+"].propertyName = "+_+"; }   var err =   ",e.createErrors!==!1?(t+=" { keyword: 'propertyNames' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: { propertyName: '"+k+"' } ",e.opts.messages!==!1&&(t+=" , message: 'property name \\'"+k+"\\' is invalid' "),e.opts.verbose&&(t+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+S+" "),t+=" } "):t+=" {} ",t+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&m&&(e.async?t+=" throw new ValidationError(vErrors); ":t+=" validate.errors = vErrors; return false; "),m&&(t+=" break; "),t+=" } }"}return m&&(t+=" "+b+" if ("+P+" == errors) {"),t},"generate_propertyNames")});var Ic=se((U_,Dc)=>{"use strict";Dc.exports=o(function(e,r,s){var t=" ",l=e.level,u=e.dataLevel,c=e.schema[r],h=e.schemaPath+e.util.getProperty(r),p=e.errSchemaPath+"/"+r,m=!e.opts.allErrors,S="data"+(u||""),P="valid"+l,g=e.opts.$data&&c&&c.$data,b;g?(t+=" var schema"+l+" = "+e.util.getData(c.$data,u,e.dataPathArr)+"; ",b="schema"+l):b=c;var E="schema"+l;if(!g)if(c.length<e.opts.loopRequired&&e.schema.properties&&Object.keys(e.schema.properties).length){var _=[],T=c;if(T)for(var $,k=-1,D=T.length-1;k<D;){$=T[k+=1];var F=e.schema.properties[$];F&&(e.opts.strictKeywords?typeof F=="object"&&Object.keys(F).length>0||F===!1:e.util.schemaHasRules(F,e.RULES.all))||(_[_.length]=$)}}else var _=c;if(g||_.length){var L=e.errorPath,K=g||_.length>=e.opts.loopRequired,Q=e.opts.ownProperties;if(m)if(t+=" var missing"+l+"; ",K){g||(t+=" var "+E+" = validate.schema"+h+"; ");var z="i"+l,G="schema"+l+"["+z+"]",Y="' + "+G+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(L,G,e.opts.jsonPointers)),t+=" var "+P+" = true; ",g&&(t+=" if (schema"+l+" === undefined) "+P+" = true; else if (!Array.isArray(schema"+l+")) "+P+" = false; else {"),t+=" for (var "+z+" = 0; "+z+" < "+E+".length; "+z+"++) { "+P+" = "+S+"["+E+"["+z+"]] !== undefined ",Q&&(t+=" &&   Object.prototype.hasOwnProperty.call("+S+", "+E+"["+z+"]) "),t+="; if (!"+P+") break; } ",g&&(t+="  }  "),t+="  if (!"+P+") {   ";var V=V||[];V.push(t),t="",e.createErrors!==!1?(t+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: { missingProperty: '"+Y+"' } ",e.opts.messages!==!1&&(t+=" , message: '",e.opts._errorDataPathProperty?t+="is a required property":t+="should have required property \\'"+Y+"\\'",t+="' "),e.opts.verbose&&(t+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+S+" "),t+=" } "):t+=" {} ";var N=t;t=V.pop(),!e.compositeRule&&m?e.async?t+=" throw new ValidationError(["+N+"]); ":t+=" validate.errors = ["+N+"]; return false; ":t+=" var err = "+N+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" } else { "}else{t+=" if ( ";var q=_;if(q)for(var Z,z=-1,Ee=q.length-1;z<Ee;){Z=q[z+=1],z&&(t+=" || ");var fe=e.util.getProperty(Z),pe=S+fe;t+=" ( ( "+pe+" === undefined ",Q&&(t+=" || ! Object.prototype.hasOwnProperty.call("+S+", '"+e.util.escapeQuotes(Z)+"') "),t+=") && (missing"+l+" = "+e.util.toQuotedString(e.opts.jsonPointers?Z:fe)+") ) "}t+=") {  ";var G="missing"+l,Y="' + "+G+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(L,G,!0):L+" + "+G);var V=V||[];V.push(t),t="",e.createErrors!==!1?(t+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: { missingProperty: '"+Y+"' } ",e.opts.messages!==!1&&(t+=" , message: '",e.opts._errorDataPathProperty?t+="is a required property":t+="should have required property \\'"+Y+"\\'",t+="' "),e.opts.verbose&&(t+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+S+" "),t+=" } "):t+=" {} ";var N=t;t=V.pop(),!e.compositeRule&&m?e.async?t+=" throw new ValidationError(["+N+"]); ":t+=" validate.errors = ["+N+"]; return false; ":t+=" var err = "+N+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" } else { "}else if(K){g||(t+=" var "+E+" = validate.schema"+h+"; ");var z="i"+l,G="schema"+l+"["+z+"]",Y="' + "+G+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(L,G,e.opts.jsonPointers)),g&&(t+=" if ("+E+" && !Array.isArray("+E+")) {  var err =   ",e.createErrors!==!1?(t+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: { missingProperty: '"+Y+"' } ",e.opts.messages!==!1&&(t+=" , message: '",e.opts._errorDataPathProperty?t+="is a required property":t+="should have required property \\'"+Y+"\\'",t+="' "),e.opts.verbose&&(t+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+S+" "),t+=" } "):t+=" {} ",t+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } else if ("+E+" !== undefined) { "),t+=" for (var "+z+" = 0; "+z+" < "+E+".length; "+z+"++) { if ("+S+"["+E+"["+z+"]] === undefined ",Q&&(t+=" || ! Object.prototype.hasOwnProperty.call("+S+", "+E+"["+z+"]) "),t+=") {  var err =   ",e.createErrors!==!1?(t+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: { missingProperty: '"+Y+"' } ",e.opts.messages!==!1&&(t+=" , message: '",e.opts._errorDataPathProperty?t+="is a required property":t+="should have required property \\'"+Y+"\\'",t+="' "),e.opts.verbose&&(t+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+S+" "),t+=" } "):t+=" {} ",t+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } } ",g&&(t+="  }  ")}else{var de=_;if(de)for(var Z,ee=-1,$e=de.length-1;ee<$e;){Z=de[ee+=1];var fe=e.util.getProperty(Z),Y=e.util.escapeQuotes(Z),pe=S+fe;e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(L,Z,e.opts.jsonPointers)),t+=" if ( "+pe+" === undefined ",Q&&(t+=" || ! Object.prototype.hasOwnProperty.call("+S+", '"+e.util.escapeQuotes(Z)+"') "),t+=") {  var err =   ",e.createErrors!==!1?(t+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: { missingProperty: '"+Y+"' } ",e.opts.messages!==!1&&(t+=" , message: '",e.opts._errorDataPathProperty?t+="is a required property":t+="should have required property \\'"+Y+"\\'",t+="' "),e.opts.verbose&&(t+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+S+" "),t+=" } "):t+=" {} ",t+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}e.errorPath=L}else m&&(t+=" if (true) {");return t},"generate_required")});var $c=se((H_,Fc)=>{"use strict";Fc.exports=o(function(e,r,s){var t=" ",l=e.level,u=e.dataLevel,c=e.schema[r],h=e.schemaPath+e.util.getProperty(r),p=e.errSchemaPath+"/"+r,m=!e.opts.allErrors,S="data"+(u||""),P="valid"+l,g=e.opts.$data&&c&&c.$data,b;if(g?(t+=" var schema"+l+" = "+e.util.getData(c.$data,u,e.dataPathArr)+"; ",b="schema"+l):b=c,(c||g)&&e.opts.uniqueItems!==!1){g&&(t+=" var "+P+"; if ("+b+" === false || "+b+" === undefined) "+P+" = true; else if (typeof "+b+" != 'boolean') "+P+" = false; else { "),t+=" var i = "+S+".length , "+P+" = true , j; if (i > 1) { ";var E=e.schema.items&&e.schema.items.type,_=Array.isArray(E);if(!E||E=="object"||E=="array"||_&&(E.indexOf("object")>=0||E.indexOf("array")>=0))t+=" outer: for (;i--;) { for (j = i; j--;) { if (equal("+S+"[i], "+S+"[j])) { "+P+" = false; break outer; } } } ";else{t+=" var itemIndices = {}, item; for (;i--;) { var item = "+S+"[i]; ";var T="checkDataType"+(_?"s":"");t+=" if ("+e.util[T](E,"item",e.opts.strictNumbers,!0)+") continue; ",_&&(t+=` if (typeof item == 'string') item = '"' + item; `),t+=" if (typeof itemIndices[item] == 'number') { "+P+" = false; j = itemIndices[item]; break; } itemIndices[item] = i; } "}t+=" } ",g&&(t+="  }  "),t+=" if (!"+P+") {   ";var $=$||[];$.push(t),t="",e.createErrors!==!1?(t+=" { keyword: 'uniqueItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: { i: i, j: j } ",e.opts.messages!==!1&&(t+=" , message: 'should NOT have duplicate items (items ## ' + j + ' and ' + i + ' are identical)' "),e.opts.verbose&&(t+=" , schema:  ",g?t+="validate.schema"+h:t+=""+c,t+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+S+" "),t+=" } "):t+=" {} ";var k=t;t=$.pop(),!e.compositeRule&&m?e.async?t+=" throw new ValidationError(["+k+"]); ":t+=" validate.errors = ["+k+"]; return false; ":t+=" var err = "+k+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" } ",m&&(t+=" else { ")}else m&&(t+=" if (true) { ");return t},"generate_uniqueItems")});var Nc=se((V_,Lc)=>{"use strict";Lc.exports={$ref:Gu(),allOf:Ku(),anyOf:Xu(),$comment:tc(),const:ac(),contains:nc(),dependencies:ic(),enum:uc(),format:dc(),if:hc(),items:mc(),maximum:Si(),minimum:Si(),maxItems:wi(),minItems:wi(),maxLength:Pi(),minLength:Pi(),maxProperties:Ei(),minProperties:Ei(),multipleOf:Sc(),not:Pc(),oneOf:Rc(),pattern:Tc(),properties:Cc(),propertyNames:kc(),required:Ic(),uniqueItems:$c(),validate:bi()}});var qc=se((Z_,Mc)=>{"use strict";var jc=Nc(),Ri=ma().toHash;Mc.exports=o(function(){var e=[{type:"number",rules:[{maximum:["exclusiveMaximum"]},{minimum:["exclusiveMinimum"]},"multipleOf","format"]},{type:"string",rules:["maxLength","minLength","pattern","format"]},{type:"array",rules:["maxItems","minItems","items","contains","uniqueItems"]},{type:"object",rules:["maxProperties","minProperties","required","dependencies","propertyNames",{properties:["additionalProperties","patternProperties"]}]},{rules:["$ref","const","enum","not","anyOf","oneOf","allOf","if"]}],r=["type","$comment"],s=["$schema","$id","id","$data","$async","title","description","default","definitions","examples","readOnly","writeOnly","contentMediaType","contentEncoding","additionalItems","then","else"],t=["number","integer","string","array","object","boolean","null"];return e.all=Ri(r),e.types=Ri(t),e.forEach(function(l){l.rules=l.rules.map(function(u){var c;if(typeof u=="object"){var h=Object.keys(u)[0];c=u[h],u=h,c.forEach(function(m){r.push(m),e.all[m]=!0})}r.push(u);var p=e.all[u]={keyword:u,code:jc[u],implements:c};return p}),e.all.$comment={keyword:"$comment",code:jc.$comment},l.type&&(e.types[l.type]=l)}),e.keywords=Ri(r.concat(s)),e.custom={},e},"rules")});var Bc=se((G_,Uc)=>{"use strict";var zc=["multipleOf","maximum","exclusiveMaximum","minimum","exclusiveMinimum","maxLength","minLength","pattern","additionalItems","maxItems","minItems","uniqueItems","maxProperties","minProperties","required","additionalProperties","enum","format","const"];Uc.exports=function(a,e){for(var r=0;r<e.length;r++){a=JSON.parse(JSON.stringify(a));var s=e[r].split("/"),t=a,l;for(l=1;l<s.length;l++)t=t[s[l]];for(l=0;l<zc.length;l++){var u=zc[l],c=t[u];c&&(t[u]={anyOf:[c,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]})}}return a}});var Vc=se((Y_,Wc)=>{"use strict";var Wg=zn().MissingRef;Wc.exports=Hc;function Hc(a,e,r){var s=this;if(typeof this._opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");typeof e=="function"&&(r=e,e=void 0);var t=l(a).then(function(){var c=s._addSchema(a,void 0,e);return c.validate||u(c)});return r&&t.then(function(c){r(null,c)},r),t;function l(c){var h=c.$schema;return h&&!s.getSchema(h)?Hc.call(s,{$ref:h},!0):Promise.resolve()}o(l,"loadMetaSchemaOf");function u(c){try{return s._compile(c)}catch(p){if(p instanceof Wg)return h(p);throw p}function h(p){var m=p.missingSchema;if(g(m))throw new Error("Schema "+m+" is loaded but "+p.missingRef+" cannot be resolved");var S=s._loadingSchemas[m];return S||(S=s._loadingSchemas[m]=s._opts.loadSchema(m),S.then(P,P)),S.then(function(b){if(!g(m))return l(b).then(function(){g(m)||s.addSchema(b,m,void 0,e)})}).then(function(){return u(c)});function P(){delete s._loadingSchemas[m]}o(P,"removePromise");function g(b){return s._refs[b]||s._schemas[b]}o(g,"added")}o(h,"loadMissingSchema")}o(u,"_compileAsync")}o(Hc,"compileAsync")});var Qc=se((J_,Zc)=>{"use strict";Zc.exports=o(function(e,r,s){var t=" ",l=e.level,u=e.dataLevel,c=e.schema[r],h=e.schemaPath+e.util.getProperty(r),p=e.errSchemaPath+"/"+r,m=!e.opts.allErrors,S,P="data"+(u||""),g="valid"+l,b="errs__"+l,E=e.opts.$data&&c&&c.$data,_;E?(t+=" var schema"+l+" = "+e.util.getData(c.$data,u,e.dataPathArr)+"; ",_="schema"+l):_=c;var T=this,$="definition"+l,k=T.definition,D="",F,L,K,Q,z;if(E&&k.$data){z="keywordValidate"+l;var G=k.validateSchema;t+=" var "+$+" = RULES.custom['"+r+"'].definition; var "+z+" = "+$+".validate;"}else{if(Q=e.useCustomRule(T,c,e.schema,e),!Q)return;_="validate.schema"+h,z=Q.code,F=k.compile,L=k.inline,K=k.macro}var Y=z+".errors",V="i"+l,N="ruleErr"+l,q=k.async;if(q&&!e.async)throw new Error("async keyword in sync schema");if(L||K||(t+=""+Y+" = null;"),t+="var "+b+" = errors;var "+g+";",E&&k.$data&&(D+="}",t+=" if ("+_+" === undefined) { "+g+" = true; } else { ",G&&(D+="}",t+=" "+g+" = "+$+".validateSchema("+_+"); if ("+g+") { ")),L)k.statements?t+=" "+Q.validate+" ":t+=" "+g+" = "+Q.validate+"; ";else if(K){var Z=e.util.copy(e),D="";Z.level++;var Ee="valid"+Z.level;Z.schema=Q.validate,Z.schemaPath="";var fe=e.compositeRule;e.compositeRule=Z.compositeRule=!0;var pe=e.validate(Z).replace(/validate\.schema/g,z);e.compositeRule=Z.compositeRule=fe,t+=" "+pe}else{var de=de||[];de.push(t),t="",t+="  "+z+".call( ",e.opts.passContext?t+="this":t+="self",F||k.schema===!1?t+=" , "+P+" ":t+=" , "+_+" , "+P+" , validate.schema"+e.schemaPath+" ",t+=" , (dataPath || '')",e.errorPath!='""'&&(t+=" + "+e.errorPath);var ee=u?"data"+(u-1||""):"parentData",$e=u?e.dataPathArr[u]:"parentDataProperty";t+=" , "+ee+" , "+$e+" , rootData )  ";var Ge=t;t=de.pop(),k.errors===!1?(t+=" "+g+" = ",q&&(t+="await "),t+=""+Ge+"; "):q?(Y="customErrors"+l,t+=" var "+Y+" = null; try { "+g+" = await "+Ge+"; } catch (e) { "+g+" = false; if (e instanceof ValidationError) "+Y+" = e.errors; else throw e; } "):t+=" "+Y+" = null; "+g+" = "+Ge+"; "}if(k.modifying&&(t+=" if ("+ee+") "+P+" = "+ee+"["+$e+"];"),t+=""+D,k.valid)m&&(t+=" if (true) { ");else{t+=" if ( ",k.valid===void 0?(t+=" !",K?t+=""+Ee:t+=""+g):t+=" "+!k.valid+" ",t+=") { ",S=T.keyword;var de=de||[];de.push(t),t="";var de=de||[];de.push(t),t="",e.createErrors!==!1?(t+=" { keyword: '"+(S||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: { keyword: '"+T.keyword+"' } ",e.opts.messages!==!1&&(t+=` , message: 'should pass "`+T.keyword+`" keyword validation' `),e.opts.verbose&&(t+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+P+" "),t+=" } "):t+=" {} ";var Xe=t;t=de.pop(),!e.compositeRule&&m?e.async?t+=" throw new ValidationError(["+Xe+"]); ":t+=" validate.errors = ["+Xe+"]; return false; ":t+=" var err = "+Xe+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";var ie=t;t=de.pop(),L?k.errors?k.errors!="full"&&(t+="  for (var "+V+"="+b+"; "+V+"<errors; "+V+"++) { var "+N+" = vErrors["+V+"]; if ("+N+".dataPath === undefined) "+N+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+N+".schemaPath === undefined) { "+N+'.schemaPath = "'+p+'"; } ',e.opts.verbose&&(t+=" "+N+".schema = "+_+"; "+N+".data = "+P+"; "),t+=" } "):k.errors===!1?t+=" "+ie+" ":(t+=" if ("+b+" == errors) { "+ie+" } else {  for (var "+V+"="+b+"; "+V+"<errors; "+V+"++) { var "+N+" = vErrors["+V+"]; if ("+N+".dataPath === undefined) "+N+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+N+".schemaPath === undefined) { "+N+'.schemaPath = "'+p+'"; } ',e.opts.verbose&&(t+=" "+N+".schema = "+_+"; "+N+".data = "+P+"; "),t+=" } } "):K?(t+="   var err =   ",e.createErrors!==!1?(t+=" { keyword: '"+(S||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: { keyword: '"+T.keyword+"' } ",e.opts.messages!==!1&&(t+=` , message: 'should pass "`+T.keyword+`" keyword validation' `),e.opts.verbose&&(t+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+P+" "),t+=" } "):t+=" {} ",t+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&m&&(e.async?t+=" throw new ValidationError(vErrors); ":t+=" validate.errors = vErrors; return false; ")):k.errors===!1?t+=" "+ie+" ":(t+=" if (Array.isArray("+Y+")) { if (vErrors === null) vErrors = "+Y+"; else vErrors = vErrors.concat("+Y+"); errors = vErrors.length;  for (var "+V+"="+b+"; "+V+"<errors; "+V+"++) { var "+N+" = vErrors["+V+"]; if ("+N+".dataPath === undefined) "+N+".dataPath = (dataPath || '') + "+e.errorPath+";  "+N+'.schemaPath = "'+p+'";  ',e.opts.verbose&&(t+=" "+N+".schema = "+_+"; "+N+".data = "+P+"; "),t+=" } } else { "+ie+" } "),t+=" } ",m&&(t+=" else { ")}return t},"generate_custom")});var xi=se((eS,Vg)=>{Vg.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0}});var Kc=se((tS,Yc)=>{"use strict";var Gc=xi();Yc.exports={$id:"https://github.com/ajv-validator/ajv/blob/master/lib/definition_schema.js",definitions:{simpleTypes:Gc.definitions.simpleTypes},type:"object",dependencies:{schema:["validate"],$data:["validate"],statements:["inline"],valid:{not:{required:["macro"]}}},properties:{type:Gc.properties.type,schema:{type:"boolean"},statements:{type:"boolean"},dependencies:{type:"array",items:{type:"string"}},metaSchema:{type:"object"},modifying:{type:"boolean"},valid:{type:"boolean"},$data:{type:"boolean"},async:{type:"boolean"},errors:{anyOf:[{type:"boolean"},{const:"full"}]}}}});var Xc=se((rS,Jc)=>{"use strict";var Zg=/^[a-z_$][a-z0-9_$-]*$/i,Qg=Qc(),Gg=Kc();Jc.exports={add:Yg,get:Kg,remove:Jg,validate:Ti};function Yg(a,e){var r=this.RULES;if(r.keywords[a])throw new Error("Keyword "+a+" is already defined");if(!Zg.test(a))throw new Error("Keyword "+a+" is not a valid identifier");if(e){this.validateKeyword(e,!0);var s=e.type;if(Array.isArray(s))for(var t=0;t<s.length;t++)u(a,s[t],e);else u(a,s,e);var l=e.metaSchema;l&&(e.$data&&this._opts.$data&&(l={anyOf:[l,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]}),e.validateSchema=this.compile(l,!0))}r.keywords[a]=r.all[a]=!0;function u(c,h,p){for(var m,S=0;S<r.length;S++){var P=r[S];if(P.type==h){m=P;break}}m||(m={type:h,rules:[]},r.push(m));var g={keyword:c,definition:p,custom:!0,code:Qg,implements:p.implements};m.rules.push(g),r.custom[c]=g}return o(u,"_addRule"),this}o(Yg,"addKeyword");function Kg(a){var e=this.RULES.custom[a];return e?e.definition:this.RULES.keywords[a]||!1}o(Kg,"getKeyword");function Jg(a){var e=this.RULES;delete e.keywords[a],delete e.all[a],delete e.custom[a];for(var r=0;r<e.length;r++)for(var s=e[r].rules,t=0;t<s.length;t++)if(s[t].keyword==a){s.splice(t,1);break}return this}o(Jg,"removeKeyword");function Ti(a,e){Ti.errors=null;var r=this._validateKeyword=this._validateKeyword||this.compile(Gg,!0);if(r(a))return!0;if(Ti.errors=r.errors,e)throw new Error("custom keyword definition is invalid: "+this.errorsText(r.errors));return!1}o(Ti,"validateKeyword")});var ed=se((sS,Xg)=>{Xg.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON Schema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1}});var cd=se((nS,ud)=>{"use strict";var rd=Iu(),ga=qn(),ev=$u(),ad=fi(),tv=yi(),rv=Zu(),av=qc(),sd=Bc(),nd=ma();ud.exports=Ue;Ue.prototype.validate=nv;Ue.prototype.compile=ov;Ue.prototype.addSchema=iv;Ue.prototype.addMetaSchema=lv;Ue.prototype.validateSchema=uv;Ue.prototype.getSchema=dv;Ue.prototype.removeSchema=hv;Ue.prototype.addFormat=Sv;Ue.prototype.errorsText=_v;Ue.prototype._addSchema=pv;Ue.prototype._compile=mv;Ue.prototype.compileAsync=Vc();var Gn=Xc();Ue.prototype.addKeyword=Gn.add;Ue.prototype.getKeyword=Gn.get;Ue.prototype.removeKeyword=Gn.remove;Ue.prototype.validateKeyword=Gn.validate;var od=zn();Ue.ValidationError=od.Validation;Ue.MissingRefError=od.MissingRef;Ue.$dataMetaSchema=sd;var Qn="http://json-schema.org/draft-07/schema",td=["removeAdditional","useDefaults","coerceTypes","strictDefaults"],sv=["/properties"];function Ue(a){if(!(this instanceof Ue))return new Ue(a);a=this._opts=nd.copy(a)||{},Tv(this),this._schemas={},this._refs={},this._fragments={},this._formats=rv(a.format),this._cache=a.cache||new ev,this._loadingSchemas={},this._compilations=[],this.RULES=av(),this._getId=gv(a),a.loopRequired=a.loopRequired||1/0,a.errorDataPath=="property"&&(a._errorDataPathProperty=!0),a.serialize===void 0&&(a.serialize=tv),this._metaOpts=xv(this),a.formats&&Ev(this),a.keywords&&Rv(this),wv(this),typeof a.meta=="object"&&this.addMetaSchema(a.meta),a.nullable&&this.addKeyword("nullable",{metaSchema:{type:"boolean"}}),Pv(this)}o(Ue,"Ajv");function nv(a,e){var r;if(typeof a=="string"){if(r=this.getSchema(a),!r)throw new Error('no schema with key or ref "'+a+'"')}else{var s=this._addSchema(a);r=s.validate||this._compile(s)}var t=r(e);return r.$async!==!0&&(this.errors=r.errors),t}o(nv,"validate");function ov(a,e){var r=this._addSchema(a,void 0,e);return r.validate||this._compile(r)}o(ov,"compile");function iv(a,e,r,s){if(Array.isArray(a)){for(var t=0;t<a.length;t++)this.addSchema(a[t],void 0,r,s);return this}var l=this._getId(a);if(l!==void 0&&typeof l!="string")throw new Error("schema id must be string");return e=ga.normalizeId(e||l),ld(this,e),this._schemas[e]=this._addSchema(a,r,s,!0),this}o(iv,"addSchema");function lv(a,e,r){return this.addSchema(a,e,r,!0),this}o(lv,"addMetaSchema");function uv(a,e){var r=a.$schema;if(r!==void 0&&typeof r!="string")throw new Error("$schema must be a string");if(r=r||this._opts.defaultMeta||cv(this),!r)return this.logger.warn("meta-schema not available"),this.errors=null,!0;var s=this.validate(r,a);if(!s&&e){var t="schema is invalid: "+this.errorsText();if(this._opts.validateSchema=="log")this.logger.error(t);else throw new Error(t)}return s}o(uv,"validateSchema");function cv(a){var e=a._opts.meta;return a._opts.defaultMeta=typeof e=="object"?a._getId(e)||e:a.getSchema(Qn)?Qn:void 0,a._opts.defaultMeta}o(cv,"defaultMeta");function dv(a){var e=id(this,a);switch(typeof e){case"object":return e.validate||this._compile(e);case"string":return this.getSchema(e);case"undefined":return fv(this,a)}}o(dv,"getSchema");function fv(a,e){var r=ga.schema.call(a,{schema:{}},e);if(r){var s=r.schema,t=r.root,l=r.baseId,u=rd.call(a,s,t,void 0,l);return a._fragments[e]=new ad({ref:e,fragment:!0,schema:s,root:t,baseId:l,validate:u}),u}}o(fv,"_getSchemaFragment");function id(a,e){return e=ga.normalizeId(e),a._schemas[e]||a._refs[e]||a._fragments[e]}o(id,"_getSchemaObj");function hv(a){if(a instanceof RegExp)return Zn(this,this._schemas,a),Zn(this,this._refs,a),this;switch(typeof a){case"undefined":return Zn(this,this._schemas),Zn(this,this._refs),this._cache.clear(),this;case"string":var e=id(this,a);return e&&this._cache.del(e.cacheKey),delete this._schemas[a],delete this._refs[a],this;case"object":var r=this._opts.serialize,s=r?r(a):a;this._cache.del(s);var t=this._getId(a);t&&(t=ga.normalizeId(t),delete this._schemas[t],delete this._refs[t])}return this}o(hv,"removeSchema");function Zn(a,e,r){for(var s in e){var t=e[s];!t.meta&&(!r||r.test(s))&&(a._cache.del(t.cacheKey),delete e[s])}}o(Zn,"_removeAllSchemas");function pv(a,e,r,s){if(typeof a!="object"&&typeof a!="boolean")throw new Error("schema should be object or boolean");var t=this._opts.serialize,l=t?t(a):a,u=this._cache.get(l);if(u)return u;s=s||this._opts.addUsedSchema!==!1;var c=ga.normalizeId(this._getId(a));c&&s&&ld(this,c);var h=this._opts.validateSchema!==!1&&!e,p;h&&!(p=c&&c==ga.normalizeId(a.$schema))&&this.validateSchema(a,!0);var m=ga.ids.call(this,a),S=new ad({id:c,schema:a,localRefs:m,cacheKey:l,meta:r});return c[0]!="#"&&s&&(this._refs[c]=S),this._cache.put(l,S),h&&p&&this.validateSchema(a,!0),S}o(pv,"_addSchema");function mv(a,e){if(a.compiling)return a.validate=t,t.schema=a.schema,t.errors=null,t.root=e||t,a.schema.$async===!0&&(t.$async=!0),t;a.compiling=!0;var r;a.meta&&(r=this._opts,this._opts=this._metaOpts);var s;try{s=rd.call(this,a.schema,e,a.localRefs)}catch(l){throw delete a.validate,l}finally{a.compiling=!1,a.meta&&(this._opts=r)}return a.validate=s,a.refs=s.refs,a.refVal=s.refVal,a.root=s.root,s;function t(){var l=a.validate,u=l.apply(this,arguments);return t.errors=l.errors,u}o(t,"callValidate")}o(mv,"_compile");function gv(a){switch(a.schemaId){case"auto":return bv;case"id":return vv;default:return yv}}o(gv,"chooseGetId");function vv(a){return a.$id&&this.logger.warn("schema $id ignored",a.$id),a.id}o(vv,"_getId");function yv(a){return a.id&&this.logger.warn("schema id ignored",a.id),a.$id}o(yv,"_get$Id");function bv(a){if(a.$id&&a.id&&a.$id!=a.id)throw new Error("schema $id is different from id");return a.$id||a.id}o(bv,"_get$IdOrId");function _v(a,e){if(a=a||this.errors,!a)return"No errors";e=e||{};for(var r=e.separator===void 0?", ":e.separator,s=e.dataVar===void 0?"data":e.dataVar,t="",l=0;l<a.length;l++){var u=a[l];u&&(t+=s+u.dataPath+" "+u.message+r)}return t.slice(0,-r.length)}o(_v,"errorsText");function Sv(a,e){return typeof e=="string"&&(e=new RegExp(e)),this._formats[a]=e,this}o(Sv,"addFormat");function wv(a){var e;if(a._opts.$data&&(e=ed(),a.addMetaSchema(e,e.$id,!0)),a._opts.meta!==!1){var r=xi();a._opts.$data&&(r=sd(r,sv)),a.addMetaSchema(r,Qn,!0),a._refs["http://json-schema.org/schema"]=Qn}}o(wv,"addDefaultMetaSchema");function Pv(a){var e=a._opts.schemas;if(e)if(Array.isArray(e))a.addSchema(e);else for(var r in e)a.addSchema(e[r],r)}o(Pv,"addInitialSchemas");function Ev(a){for(var e in a._opts.formats){var r=a._opts.formats[e];a.addFormat(e,r)}}o(Ev,"addInitialFormats");function Rv(a){for(var e in a._opts.keywords){var r=a._opts.keywords[e];a.addKeyword(e,r)}}o(Rv,"addInitialKeywords");function ld(a,e){if(a._schemas[e]||a._refs[e])throw new Error('schema with key or id "'+e+'" already exists')}o(ld,"checkUnique");function xv(a){for(var e=nd.copy(a._opts),r=0;r<td.length;r++)delete e[td[r]];return e}o(xv,"getMetaSchemaOptions");function Tv(a){var e=a._opts.logger;if(e===!1)a.logger={log:Ai,warn:Ai,error:Ai};else{if(e===void 0&&(e=console),!(typeof e=="object"&&e.log&&e.warn&&e.error))throw new Error("logger must implement log, warn and error methods");a.logger=e}}o(Tv,"setLogger");function Ai(){}o(Ai,"noop")});var ef=se((lo,Xd)=>{(function(a,e){typeof lo=="object"&&typeof Xd<"u"?e(lo):typeof define=="function"&&define.amd?define(["exports"],e):(a=typeof globalThis<"u"?globalThis:a||self,e(a.WebStreamsPolyfill={}))})(lo,(function(a){"use strict";function e(){}o(e,"noop");function r(n){return typeof n=="object"&&n!==null||typeof n=="function"}o(r,"typeIsObject");let s=e;function t(n,i){try{Object.defineProperty(n,"name",{value:i,configurable:!0})}catch{}}o(t,"setFunctionName");let l=Promise,u=Promise.prototype.then,c=Promise.reject.bind(l);function h(n){return new l(n)}o(h,"newPromise");function p(n){return h(i=>i(n))}o(p,"promiseResolvedWith");function m(n){return c(n)}o(m,"promiseRejectedWith");function S(n,i,d){return u.call(n,i,d)}o(S,"PerformPromiseThen");function P(n,i,d){S(S(n,i,d),void 0,s)}o(P,"uponPromise");function g(n,i){P(n,i)}o(g,"uponFulfillment");function b(n,i){P(n,void 0,i)}o(b,"uponRejection");function E(n,i,d){return S(n,i,d)}o(E,"transformPromiseWith");function _(n){S(n,void 0,s)}o(_,"setPromiseIsHandledToTrue");let T=o(n=>{if(typeof queueMicrotask=="function")T=queueMicrotask;else{let i=p(void 0);T=o(d=>S(i,d),"_queueMicrotask")}return T(n)},"_queueMicrotask");function $(n,i,d){if(typeof n!="function")throw new TypeError("Argument is not a function");return Function.prototype.apply.call(n,i,d)}o($,"reflectCall");function k(n,i,d){try{return p($(n,i,d))}catch(v){return m(v)}}o(k,"promiseCall");let D=16384;class F{static{o(this,"SimpleQueue")}constructor(){this._cursor=0,this._size=0,this._front={_elements:[],_next:void 0},this._back=this._front,this._cursor=0,this._size=0}get length(){return this._size}push(i){let d=this._back,v=d;d._elements.length===D-1&&(v={_elements:[],_next:void 0}),d._elements.push(i),v!==d&&(this._back=v,d._next=v),++this._size}shift(){let i=this._front,d=i,v=this._cursor,R=v+1,A=i._elements,I=A[v];return R===D&&(d=i._next,R=0),--this._size,this._cursor=R,i!==d&&(this._front=d),A[v]=void 0,I}forEach(i){let d=this._cursor,v=this._front,R=v._elements;for(;(d!==R.length||v._next!==void 0)&&!(d===R.length&&(v=v._next,R=v._elements,d=0,R.length===0));)i(R[d]),++d}peek(){let i=this._front,d=this._cursor;return i._elements[d]}}let L=Symbol("[[AbortSteps]]"),K=Symbol("[[ErrorSteps]]"),Q=Symbol("[[CancelSteps]]"),z=Symbol("[[PullSteps]]"),G=Symbol("[[ReleaseSteps]]");function Y(n,i){n._ownerReadableStream=i,i._reader=n,i._state==="readable"?Z(n):i._state==="closed"?fe(n):Ee(n,i._storedError)}o(Y,"ReadableStreamReaderGenericInitialize");function V(n,i){let d=n._ownerReadableStream;return Bt(d,i)}o(V,"ReadableStreamReaderGenericCancel");function N(n){let i=n._ownerReadableStream;i._state==="readable"?pe(n,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")):de(n,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")),i._readableStreamController[G](),i._reader=void 0,n._ownerReadableStream=void 0}o(N,"ReadableStreamReaderGenericRelease");function q(n){return new TypeError("Cannot "+n+" a stream using a released reader")}o(q,"readerLockException");function Z(n){n._closedPromise=h((i,d)=>{n._closedPromise_resolve=i,n._closedPromise_reject=d})}o(Z,"defaultReaderClosedPromiseInitialize");function Ee(n,i){Z(n),pe(n,i)}o(Ee,"defaultReaderClosedPromiseInitializeAsRejected");function fe(n){Z(n),ee(n)}o(fe,"defaultReaderClosedPromiseInitializeAsResolved");function pe(n,i){n._closedPromise_reject!==void 0&&(_(n._closedPromise),n._closedPromise_reject(i),n._closedPromise_resolve=void 0,n._closedPromise_reject=void 0)}o(pe,"defaultReaderClosedPromiseReject");function de(n,i){Ee(n,i)}o(de,"defaultReaderClosedPromiseResetToRejected");function ee(n){n._closedPromise_resolve!==void 0&&(n._closedPromise_resolve(void 0),n._closedPromise_resolve=void 0,n._closedPromise_reject=void 0)}o(ee,"defaultReaderClosedPromiseResolve");let $e=Number.isFinite||function(n){return typeof n=="number"&&isFinite(n)},Ge=Math.trunc||function(n){return n<0?Math.ceil(n):Math.floor(n)};function Xe(n){return typeof n=="object"||typeof n=="function"}o(Xe,"isDictionary");function ie(n,i){if(n!==void 0&&!Xe(n))throw new TypeError(`${i} is not an object.`)}o(ie,"assertDictionary");function Pe(n,i){if(typeof n!="function")throw new TypeError(`${i} is not a function.`)}o(Pe,"assertFunction");function We(n){return typeof n=="object"&&n!==null||typeof n=="function"}o(We,"isObject");function Ye(n,i){if(!We(n))throw new TypeError(`${i} is not an object.`)}o(Ye,"assertObject");function Ke(n,i,d){if(n===void 0)throw new TypeError(`Parameter ${i} is required in '${d}'.`)}o(Ke,"assertRequiredArgument");function St(n,i,d){if(n===void 0)throw new TypeError(`${i} is required in '${d}'.`)}o(St,"assertRequiredField");function je(n){return Number(n)}o(je,"convertUnrestrictedDouble");function Le(n){return n===0?0:n}o(Le,"censorNegativeZero");function lr(n){return Le(Ge(n))}o(lr,"integerPart");function Ve(n,i){let v=Number.MAX_SAFE_INTEGER,R=Number(n);if(R=Le(R),!$e(R))throw new TypeError(`${i} is not a finite number`);if(R=lr(R),R<0||R>v)throw new TypeError(`${i} is outside the accepted range of 0 to ${v}, inclusive`);return!$e(R)||R===0?0:R}o(Ve,"convertUnsignedLongLongWithEnforceRange");function _e(n,i){if(!kr(n))throw new TypeError(`${i} is not a ReadableStream.`)}o(_e,"assertReadableStream");function lt(n){return new Be(n)}o(lt,"AcquireReadableStreamDefaultReader");function Et(n,i){n._reader._readRequests.push(i)}o(Et,"ReadableStreamAddReadRequest");function Mt(n,i,d){let R=n._reader._readRequests.shift();d?R._closeSteps():R._chunkSteps(i)}o(Mt,"ReadableStreamFulfillReadRequest");function Rt(n){return n._reader._readRequests.length}o(Rt,"ReadableStreamGetNumReadRequests");function Ze(n){let i=n._reader;return!(i===void 0||!qe(i))}o(Ze,"ReadableStreamHasDefaultReader");class Be{static{o(this,"ReadableStreamDefaultReader")}constructor(i){if(Ke(i,1,"ReadableStreamDefaultReader"),_e(i,"First parameter"),Dr(i))throw new TypeError("This stream has already been locked for exclusive reading by another reader");Y(this,i),this._readRequests=new F}get closed(){return qe(this)?this._closedPromise:m(ur("closed"))}cancel(i=void 0){return qe(this)?this._ownerReadableStream===void 0?m(q("cancel")):V(this,i):m(ur("cancel"))}read(){if(!qe(this))return m(ur("read"));if(this._ownerReadableStream===void 0)return m(q("read from"));let i,d,v=h((A,I)=>{i=A,d=I});return He(this,{_chunkSteps:o(A=>i({value:A,done:!1}),"_chunkSteps"),_closeSteps:o(()=>i({value:void 0,done:!0}),"_closeSteps"),_errorSteps:o(A=>d(A),"_errorSteps")}),v}releaseLock(){if(!qe(this))throw ur("releaseLock");this._ownerReadableStream!==void 0&&xt(this)}}Object.defineProperties(Be.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),t(Be.prototype.cancel,"cancel"),t(Be.prototype.read,"read"),t(Be.prototype.releaseLock,"releaseLock"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(Be.prototype,Symbol.toStringTag,{value:"ReadableStreamDefaultReader",configurable:!0});function qe(n){return!r(n)||!Object.prototype.hasOwnProperty.call(n,"_readRequests")?!1:n instanceof Be}o(qe,"IsReadableStreamDefaultReader");function He(n,i){let d=n._ownerReadableStream;d._disturbed=!0,d._state==="closed"?i._closeSteps():d._state==="errored"?i._errorSteps(d._storedError):d._readableStreamController[z](i)}o(He,"ReadableStreamDefaultReaderRead");function xt(n){N(n);let i=new TypeError("Reader was released");rt(n,i)}o(xt,"ReadableStreamDefaultReaderRelease");function rt(n,i){let d=n._readRequests;n._readRequests=new F,d.forEach(v=>{v._errorSteps(i)})}o(rt,"ReadableStreamDefaultReaderErrorReadRequests");function ur(n){return new TypeError(`ReadableStreamDefaultReader.prototype.${n} can only be used on a ReadableStreamDefaultReader`)}o(ur,"defaultReaderBrandCheckException");let ts=Object.getPrototypeOf(Object.getPrototypeOf(async function*(){}).prototype);class ht{static{o(this,"ReadableStreamAsyncIteratorImpl")}constructor(i,d){this._ongoingPromise=void 0,this._isFinished=!1,this._reader=i,this._preventCancel=d}next(){let i=o(()=>this._nextSteps(),"nextSteps");return this._ongoingPromise=this._ongoingPromise?E(this._ongoingPromise,i,i):i(),this._ongoingPromise}return(i){let d=o(()=>this._returnSteps(i),"returnSteps");return this._ongoingPromise?E(this._ongoingPromise,d,d):d()}_nextSteps(){if(this._isFinished)return Promise.resolve({value:void 0,done:!0});let i=this._reader,d,v,R=h((I,H)=>{d=I,v=H});return He(i,{_chunkSteps:o(I=>{this._ongoingPromise=void 0,T(()=>d({value:I,done:!1}))},"_chunkSteps"),_closeSteps:o(()=>{this._ongoingPromise=void 0,this._isFinished=!0,N(i),d({value:void 0,done:!0})},"_closeSteps"),_errorSteps:o(I=>{this._ongoingPromise=void 0,this._isFinished=!0,N(i),v(I)},"_errorSteps")}),R}_returnSteps(i){if(this._isFinished)return Promise.resolve({value:i,done:!0});this._isFinished=!0;let d=this._reader;if(!this._preventCancel){let v=V(d,i);return N(d),E(v,()=>({value:i,done:!0}))}return N(d),p({value:i,done:!0})}}let Er={next(){return rs(this)?this._asyncIteratorImpl.next():m(Rr("next"))},return(n){return rs(this)?this._asyncIteratorImpl.return(n):m(Rr("return"))}};Object.setPrototypeOf(Er,ts);function Os(n,i){let d=lt(n),v=new ht(d,i),R=Object.create(Er);return R._asyncIteratorImpl=v,R}o(Os,"AcquireReadableStreamAsyncIterator");function rs(n){if(!r(n)||!Object.prototype.hasOwnProperty.call(n,"_asyncIteratorImpl"))return!1;try{return n._asyncIteratorImpl instanceof ht}catch{return!1}}o(rs,"IsReadableStreamAsyncIterator");function Rr(n){return new TypeError(`ReadableStreamAsyncIterator.${n} can only be used on a ReadableSteamAsyncIterator`)}o(Rr,"streamAsyncIteratorBrandCheckException");let as=Number.isNaN||function(n){return n!==n};var ss,ns,wa;function at(n){return n.slice()}o(at,"CreateArrayFromList");function ks(n,i,d,v,R){new Uint8Array(n).set(new Uint8Array(d,v,R),i)}o(ks,"CopyDataBlockBytes");let qt=o(n=>(typeof n.transfer=="function"?qt=o(i=>i.transfer(),"TransferArrayBuffer"):typeof structuredClone=="function"?qt=o(i=>structuredClone(i,{transfer:[i]}),"TransferArrayBuffer"):qt=o(i=>i,"TransferArrayBuffer"),qt(n)),"TransferArrayBuffer"),Gt=o(n=>(typeof n.detached=="boolean"?Gt=o(i=>i.detached,"IsDetachedBuffer"):Gt=o(i=>i.byteLength===0,"IsDetachedBuffer"),Gt(n)),"IsDetachedBuffer");function Ds(n,i,d){if(n.slice)return n.slice(i,d);let v=d-i,R=new ArrayBuffer(v);return ks(R,0,n,i,v),R}o(Ds,"ArrayBufferSlice");function Pa(n,i){let d=n[i];if(d!=null){if(typeof d!="function")throw new TypeError(`${String(i)} is not a function`);return d}}o(Pa,"GetMethod");function Po(n){let i={[Symbol.iterator]:()=>n.iterator},d=(async function*(){return yield*i})(),v=d.next;return{iterator:d,nextMethod:v,done:!1}}o(Po,"CreateAsyncFromSyncIterator");let Yt=(wa=(ss=Symbol.asyncIterator)!==null&&ss!==void 0?ss:(ns=Symbol.for)===null||ns===void 0?void 0:ns.call(Symbol,"Symbol.asyncIterator"))!==null&&wa!==void 0?wa:"@@asyncIterator";function Is(n,i="sync",d){if(d===void 0)if(i==="async"){if(d=Pa(n,Yt),d===void 0){let A=Pa(n,Symbol.iterator),I=Is(n,"sync",A);return Po(I)}}else d=Pa(n,Symbol.iterator);if(d===void 0)throw new TypeError("The object is not iterable");let v=$(d,n,[]);if(!r(v))throw new TypeError("The iterator method must return an object");let R=v.next;return{iterator:v,nextMethod:R,done:!1}}o(Is,"GetIterator");function Fs(n){let i=$(n.nextMethod,n.iterator,[]);if(!r(i))throw new TypeError("The iterator.next() method must return an object");return i}o(Fs,"IteratorNext");function Eo(n){return!!n.done}o(Eo,"IteratorComplete");function os(n){return n.value}o(os,"IteratorValue");function $s(n){return!(typeof n!="number"||as(n)||n<0)}o($s,"IsNonNegativeNumber");function Ls(n){let i=Ds(n.buffer,n.byteOffset,n.byteOffset+n.byteLength);return new Uint8Array(i)}o(Ls,"CloneAsUint8Array");function Ea(n){let i=n._queue.shift();return n._queueTotalSize-=i.size,n._queueTotalSize<0&&(n._queueTotalSize=0),i.value}o(Ea,"DequeueValue");function is(n,i,d){if(!$s(d)||d===1/0)throw new RangeError("Size must be a finite, non-NaN, non-negative number.");n._queue.push({value:i,size:d}),n._queueTotalSize+=d}o(is,"EnqueueValueWithSize");function Ns(n){return n._queue.peek().value}o(Ns,"PeekQueueValue");function w(n){n._queue=new F,n._queueTotalSize=0}o(w,"ResetQueue");function y(n){return n===DataView}o(y,"isDataViewConstructor");function x(n){return y(n.constructor)}o(x,"isDataView");function C(n){return y(n)?1:n.BYTES_PER_ELEMENT}o(C,"arrayBufferViewElementSize");class O{static{o(this,"ReadableStreamBYOBRequest")}constructor(){throw new TypeError("Illegal constructor")}get view(){if(!ve(this))throw dr("view");return this._view}respond(i){if(!ve(this))throw dr("respond");if(Ke(i,1,"respond"),i=Ve(i,"First parameter"),this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");if(Gt(this._view.buffer))throw new TypeError("The BYOB request's buffer has been detached and so cannot be used as a response");Ct(this._associatedReadableByteStreamController,i)}respondWithNewView(i){if(!ve(this))throw dr("respondWithNewView");if(Ke(i,1,"respondWithNewView"),!ArrayBuffer.isView(i))throw new TypeError("You can only respond with array buffer views");if(this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");if(Gt(i.buffer))throw new TypeError("The given view's buffer has been detached and so cannot be used as a response");xa(this._associatedReadableByteStreamController,i)}}Object.defineProperties(O.prototype,{respond:{enumerable:!0},respondWithNewView:{enumerable:!0},view:{enumerable:!0}}),t(O.prototype.respond,"respond"),t(O.prototype.respondWithNewView,"respondWithNewView"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(O.prototype,Symbol.toStringTag,{value:"ReadableStreamBYOBRequest",configurable:!0});class U{static{o(this,"ReadableByteStreamController")}constructor(){throw new TypeError("Illegal constructor")}get byobRequest(){if(!ae(this))throw xr("byobRequest");return er(this)}get desiredSize(){if(!ae(this))throw xr("desiredSize");return Ra(this)}close(){if(!ae(this))throw xr("close");if(this._closeRequested)throw new TypeError("The stream has already been closed; do not close it again!");let i=this._controlledReadableByteStream._state;if(i!=="readable")throw new TypeError(`The stream (in ${i} state) is not in the readable state and cannot be closed`);Xt(this)}enqueue(i){if(!ae(this))throw xr("enqueue");if(Ke(i,1,"enqueue"),!ArrayBuffer.isView(i))throw new TypeError("chunk must be an array buffer view");if(i.byteLength===0)throw new TypeError("chunk must have non-zero byteLength");if(i.buffer.byteLength===0)throw new TypeError("chunk's buffer must have non-zero byteLength");if(this._closeRequested)throw new TypeError("stream is closed or draining");let d=this._controlledReadableByteStream._state;if(d!=="readable")throw new TypeError(`The stream (in ${d} state) is not in the readable state and cannot be enqueued to`);zt(this,i)}error(i=void 0){if(!ae(this))throw xr("error");Qe(this,i)}[Q](i){ze(this),w(this);let d=this._cancelAlgorithm(i);return cr(this),d}[z](i){let d=this._controlledReadableByteStream;if(this._queueTotalSize>0){At(this,i);return}let v=this._autoAllocateChunkSize;if(v!==void 0){let R;try{R=new ArrayBuffer(v)}catch(I){i._errorSteps(I);return}let A={buffer:R,bufferByteLength:v,byteOffset:0,byteLength:v,bytesFilled:0,minimumFill:1,elementSize:1,viewConstructor:Uint8Array,readerType:"default"};this._pendingPullIntos.push(A)}Et(d,i),me(this)}[G](){if(this._pendingPullIntos.length>0){let i=this._pendingPullIntos.peek();i.readerType="none",this._pendingPullIntos=new F,this._pendingPullIntos.push(i)}}}Object.defineProperties(U.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},byobRequest:{enumerable:!0},desiredSize:{enumerable:!0}}),t(U.prototype.close,"close"),t(U.prototype.enqueue,"enqueue"),t(U.prototype.error,"error"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(U.prototype,Symbol.toStringTag,{value:"ReadableByteStreamController",configurable:!0});function ae(n){return!r(n)||!Object.prototype.hasOwnProperty.call(n,"_controlledReadableByteStream")?!1:n instanceof U}o(ae,"IsReadableByteStreamController");function ve(n){return!r(n)||!Object.prototype.hasOwnProperty.call(n,"_associatedReadableByteStreamController")?!1:n instanceof O}o(ve,"IsReadableStreamBYOBRequest");function me(n){if(!Hr(n))return;if(n._pulling){n._pullAgain=!0;return}n._pulling=!0;let d=n._pullAlgorithm();P(d,()=>(n._pulling=!1,n._pullAgain&&(n._pullAgain=!1,me(n)),null),v=>(Qe(n,v),null))}o(me,"ReadableByteStreamControllerCallPullIfNeeded");function ze(n){et(n),n._pendingPullIntos=new F}o(ze,"ReadableByteStreamControllerClearPendingPullIntos");function ge(n,i){let d=!1;n._state==="closed"&&(d=!0);let v=Ce(i);i.readerType==="default"?Mt(n,v,d):Tr(n,v,d)}o(ge,"ReadableByteStreamControllerCommitPullIntoDescriptor");function Ce(n){let i=n.bytesFilled,d=n.elementSize;return new n.viewConstructor(n.buffer,n.byteOffset,i/d)}o(Ce,"ReadableByteStreamControllerConvertPullIntoDescriptor");function Ne(n,i,d,v){n._queue.push({buffer:i,byteOffset:d,byteLength:v}),n._queueTotalSize+=v}o(Ne,"ReadableByteStreamControllerEnqueueChunkToQueue");function Te(n,i,d,v){let R;try{R=Ds(i,d,d+v)}catch(A){throw Qe(n,A),A}Ne(n,R,0,v)}o(Te,"ReadableByteStreamControllerEnqueueClonedChunkToQueue");function Se(n,i){i.bytesFilled>0&&Te(n,i.buffer,i.byteOffset,i.bytesFilled),nt(n)}o(Se,"ReadableByteStreamControllerEnqueueDetachedPullIntoToQueue");function Oe(n,i){let d=Math.min(n._queueTotalSize,i.byteLength-i.bytesFilled),v=i.bytesFilled+d,R=d,A=!1,I=v%i.elementSize,H=v-I;H>=i.minimumFill&&(R=H-i.bytesFilled,A=!0);let oe=n._queue;for(;R>0;){let X=oe.peek(),le=Math.min(R,X.byteLength),he=i.byteOffset+i.bytesFilled;ks(i.buffer,he,X.buffer,X.byteOffset,le),X.byteLength===le?oe.shift():(X.byteOffset+=le,X.byteLength-=le),n._queueTotalSize-=le,Re(n,le,i),R-=le}return A}o(Oe,"ReadableByteStreamControllerFillPullIntoDescriptorFromQueue");function Re(n,i,d){d.bytesFilled+=i}o(Re,"ReadableByteStreamControllerFillHeadPullIntoDescriptor");function Kt(n){n._queueTotalSize===0&&n._closeRequested?(cr(n),ps(n._controlledReadableByteStream)):me(n)}o(Kt,"ReadableByteStreamControllerHandleQueueDrain");function et(n){n._byobRequest!==null&&(n._byobRequest._associatedReadableByteStreamController=void 0,n._byobRequest._view=null,n._byobRequest=null)}o(et,"ReadableByteStreamControllerInvalidateBYOBRequest");function st(n){for(;n._pendingPullIntos.length>0;){if(n._queueTotalSize===0)return;let i=n._pendingPullIntos.peek();Oe(n,i)&&(nt(n),ge(n._controlledReadableByteStream,i))}}o(st,"ReadableByteStreamControllerProcessPullIntoDescriptorsUsingQueue");function xe(n){let i=n._controlledReadableByteStream._reader;for(;i._readRequests.length>0;){if(n._queueTotalSize===0)return;let d=i._readRequests.shift();At(n,d)}}o(xe,"ReadableByteStreamControllerProcessReadRequestsUsingQueue");function ut(n,i,d,v){let R=n._controlledReadableByteStream,A=i.constructor,I=C(A),{byteOffset:H,byteLength:oe}=i,X=d*I,le;try{le=qt(i.buffer)}catch(Ae){v._errorSteps(Ae);return}let he={buffer:le,bufferByteLength:le.byteLength,byteOffset:H,byteLength:oe,bytesFilled:0,minimumFill:X,elementSize:I,viewConstructor:A,readerType:"byob"};if(n._pendingPullIntos.length>0){n._pendingPullIntos.push(he),Ot(R,v);return}if(R._state==="closed"){let Ae=new A(he.buffer,he.byteOffset,0);v._closeSteps(Ae);return}if(n._queueTotalSize>0){if(Oe(n,he)){let Ae=Ce(he);Kt(n),v._chunkSteps(Ae);return}if(n._closeRequested){let Ae=new TypeError("Insufficient bytes to fill elements in the given buffer");Qe(n,Ae),v._errorSteps(Ae);return}}n._pendingPullIntos.push(he),Ot(R,v),me(n)}o(ut,"ReadableByteStreamControllerPullInto");function pt(n,i){i.readerType==="none"&&nt(n);let d=n._controlledReadableByteStream;if(Ar(d))for(;Ta(d)>0;){let v=nt(n);ge(d,v)}}o(pt,"ReadableByteStreamControllerRespondInClosedState");function Tt(n,i,d){if(Re(n,i,d),d.readerType==="none"){Se(n,d),st(n);return}if(d.bytesFilled<d.minimumFill)return;nt(n);let v=d.bytesFilled%d.elementSize;if(v>0){let R=d.byteOffset+d.bytesFilled;Te(n,d.buffer,R-v,v)}d.bytesFilled-=v,ge(n._controlledReadableByteStream,d),st(n)}o(Tt,"ReadableByteStreamControllerRespondInReadableState");function Jt(n,i){let d=n._pendingPullIntos.peek();et(n),n._controlledReadableByteStream._state==="closed"?pt(n,d):Tt(n,i,d),me(n)}o(Jt,"ReadableByteStreamControllerRespondInternal");function nt(n){return n._pendingPullIntos.shift()}o(nt,"ReadableByteStreamControllerShiftPendingPullInto");function Hr(n){let i=n._controlledReadableByteStream;return i._state!=="readable"||n._closeRequested||!n._started?!1:!!(Ze(i)&&Rt(i)>0||Ar(i)&&Ta(i)>0||Ra(n)>0)}o(Hr,"ReadableByteStreamControllerShouldCallPull");function cr(n){n._pullAlgorithm=void 0,n._cancelAlgorithm=void 0}o(cr,"ReadableByteStreamControllerClearAlgorithms");function Xt(n){let i=n._controlledReadableByteStream;if(!(n._closeRequested||i._state!=="readable")){if(n._queueTotalSize>0){n._closeRequested=!0;return}if(n._pendingPullIntos.length>0){let d=n._pendingPullIntos.peek();if(d.bytesFilled%d.elementSize!==0){let v=new TypeError("Insufficient bytes to fill elements in the given buffer");throw Qe(n,v),v}}cr(n),ps(i)}}o(Xt,"ReadableByteStreamControllerClose");function zt(n,i){let d=n._controlledReadableByteStream;if(n._closeRequested||d._state!=="readable")return;let{buffer:v,byteOffset:R,byteLength:A}=i;if(Gt(v))throw new TypeError("chunk's buffer is detached and so cannot be enqueued");let I=qt(v);if(n._pendingPullIntos.length>0){let H=n._pendingPullIntos.peek();if(Gt(H.buffer))throw new TypeError("The BYOB request's buffer has been detached and so cannot be filled with an enqueued chunk");et(n),H.buffer=qt(H.buffer),H.readerType==="none"&&Se(n,H)}if(Ze(d))if(xe(n),Rt(d)===0)Ne(n,I,R,A);else{n._pendingPullIntos.length>0&&nt(n);let H=new Uint8Array(I,R,A);Mt(d,H,!1)}else Ar(d)?(Ne(n,I,R,A),st(n)):Ne(n,I,R,A);me(n)}o(zt,"ReadableByteStreamControllerEnqueue");function Qe(n,i){let d=n._controlledReadableByteStream;d._state==="readable"&&(ze(n),w(n),cr(n),bl(d,i))}o(Qe,"ReadableByteStreamControllerError");function At(n,i){let d=n._queue.shift();n._queueTotalSize-=d.byteLength,Kt(n);let v=new Uint8Array(d.buffer,d.byteOffset,d.byteLength);i._chunkSteps(v)}o(At,"ReadableByteStreamControllerFillReadRequestFromQueue");function er(n){if(n._byobRequest===null&&n._pendingPullIntos.length>0){let i=n._pendingPullIntos.peek(),d=new Uint8Array(i.buffer,i.byteOffset+i.bytesFilled,i.byteLength-i.bytesFilled),v=Object.create(O.prototype);Wr(v,n,d),n._byobRequest=v}return n._byobRequest}o(er,"ReadableByteStreamControllerGetBYOBRequest");function Ra(n){let i=n._controlledReadableByteStream._state;return i==="errored"?null:i==="closed"?0:n._strategyHWM-n._queueTotalSize}o(Ra,"ReadableByteStreamControllerGetDesiredSize");function Ct(n,i){let d=n._pendingPullIntos.peek();if(n._controlledReadableByteStream._state==="closed"){if(i!==0)throw new TypeError("bytesWritten must be 0 when calling respond() on a closed stream")}else{if(i===0)throw new TypeError("bytesWritten must be greater than 0 when calling respond() on a readable stream");if(d.bytesFilled+i>d.byteLength)throw new RangeError("bytesWritten out of range")}d.buffer=qt(d.buffer),Jt(n,i)}o(Ct,"ReadableByteStreamControllerRespond");function xa(n,i){let d=n._pendingPullIntos.peek();if(n._controlledReadableByteStream._state==="closed"){if(i.byteLength!==0)throw new TypeError("The view's length must be 0 when calling respondWithNewView() on a closed stream")}else if(i.byteLength===0)throw new TypeError("The view's length must be greater than 0 when calling respondWithNewView() on a readable stream");if(d.byteOffset+d.bytesFilled!==i.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(d.bufferByteLength!==i.buffer.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");if(d.bytesFilled+i.byteLength>d.byteLength)throw new RangeError("The region specified by view is larger than byobRequest");let R=i.byteLength;d.buffer=qt(i.buffer),Jt(n,R)}o(xa,"ReadableByteStreamControllerRespondWithNewView");function js(n,i,d,v,R,A,I){i._controlledReadableByteStream=n,i._pullAgain=!1,i._pulling=!1,i._byobRequest=null,i._queue=i._queueTotalSize=void 0,w(i),i._closeRequested=!1,i._started=!1,i._strategyHWM=A,i._pullAlgorithm=v,i._cancelAlgorithm=R,i._autoAllocateChunkSize=I,i._pendingPullIntos=new F,n._readableStreamController=i;let H=d();P(p(H),()=>(i._started=!0,me(i),null),oe=>(Qe(i,oe),null))}o(js,"SetUpReadableByteStreamController");function Ms(n,i,d){let v=Object.create(U.prototype),R,A,I;i.start!==void 0?R=o(()=>i.start(v),"startAlgorithm"):R=o(()=>{},"startAlgorithm"),i.pull!==void 0?A=o(()=>i.pull(v),"pullAlgorithm"):A=o(()=>p(void 0),"pullAlgorithm"),i.cancel!==void 0?I=o(oe=>i.cancel(oe),"cancelAlgorithm"):I=o(()=>p(void 0),"cancelAlgorithm");let H=i.autoAllocateChunkSize;if(H===0)throw new TypeError("autoAllocateChunkSize must be greater than 0");js(n,v,R,A,I,d,H)}o(Ms,"SetUpReadableByteStreamControllerFromUnderlyingSource");function Wr(n,i,d){n._associatedReadableByteStreamController=i,n._view=d}o(Wr,"SetUpReadableStreamBYOBRequest");function dr(n){return new TypeError(`ReadableStreamBYOBRequest.prototype.${n} can only be used on a ReadableStreamBYOBRequest`)}o(dr,"byobRequestBrandCheckException");function xr(n){return new TypeError(`ReadableByteStreamController.prototype.${n} can only be used on a ReadableByteStreamController`)}o(xr,"byteStreamControllerBrandCheckException");function Vr(n,i){ie(n,i);let d=n?.mode;return{mode:d===void 0?void 0:Ro(d,`${i} has member 'mode' that`)}}o(Vr,"convertReaderOptions");function Ro(n,i){if(n=`${n}`,n!=="byob")throw new TypeError(`${i} '${n}' is not a valid enumeration value for ReadableStreamReaderMode`);return n}o(Ro,"convertReadableStreamReaderMode");function qs(n,i){var d;ie(n,i);let v=(d=n?.min)!==null&&d!==void 0?d:1;return{min:Ve(v,`${i} has member 'min' that`)}}o(qs,"convertByobReadOptions");function zs(n){return new ct(n)}o(zs,"AcquireReadableStreamBYOBReader");function Ot(n,i){n._reader._readIntoRequests.push(i)}o(Ot,"ReadableStreamAddReadIntoRequest");function Tr(n,i,d){let R=n._reader._readIntoRequests.shift();d?R._closeSteps(i):R._chunkSteps(i)}o(Tr,"ReadableStreamFulfillReadIntoRequest");function Ta(n){return n._reader._readIntoRequests.length}o(Ta,"ReadableStreamGetNumReadIntoRequests");function Ar(n){let i=n._reader;return!(i===void 0||!Cr(i))}o(Ar,"ReadableStreamHasBYOBReader");class ct{static{o(this,"ReadableStreamBYOBReader")}constructor(i){if(Ke(i,1,"ReadableStreamBYOBReader"),_e(i,"First parameter"),Dr(i))throw new TypeError("This stream has already been locked for exclusive reading by another reader");if(!ae(i._readableStreamController))throw new TypeError("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");Y(this,i),this._readIntoRequests=new F}get closed(){return Cr(this)?this._closedPromise:m(Aa("closed"))}cancel(i=void 0){return Cr(this)?this._ownerReadableStream===void 0?m(q("cancel")):V(this,i):m(Aa("cancel"))}read(i,d={}){if(!Cr(this))return m(Aa("read"));if(!ArrayBuffer.isView(i))return m(new TypeError("view must be an array buffer view"));if(i.byteLength===0)return m(new TypeError("view must have non-zero byteLength"));if(i.buffer.byteLength===0)return m(new TypeError("view's buffer must have non-zero byteLength"));if(Gt(i.buffer))return m(new TypeError("view's buffer has been detached"));let v;try{v=qs(d,"options")}catch(X){return m(X)}let R=v.min;if(R===0)return m(new TypeError("options.min must be greater than 0"));if(x(i)){if(R>i.byteLength)return m(new RangeError("options.min must be less than or equal to view's byteLength"))}else if(R>i.length)return m(new RangeError("options.min must be less than or equal to view's length"));if(this._ownerReadableStream===void 0)return m(q("read from"));let A,I,H=h((X,le)=>{A=X,I=le});return fr(this,i,R,{_chunkSteps:o(X=>A({value:X,done:!1}),"_chunkSteps"),_closeSteps:o(X=>A({value:X,done:!0}),"_closeSteps"),_errorSteps:o(X=>I(X),"_errorSteps")}),H}releaseLock(){if(!Cr(this))throw Aa("releaseLock");this._ownerReadableStream!==void 0&&Zr(this)}}Object.defineProperties(ct.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),t(ct.prototype.cancel,"cancel"),t(ct.prototype.read,"read"),t(ct.prototype.releaseLock,"releaseLock"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(ct.prototype,Symbol.toStringTag,{value:"ReadableStreamBYOBReader",configurable:!0});function Cr(n){return!r(n)||!Object.prototype.hasOwnProperty.call(n,"_readIntoRequests")?!1:n instanceof ct}o(Cr,"IsReadableStreamBYOBReader");function fr(n,i,d,v){let R=n._ownerReadableStream;R._disturbed=!0,R._state==="errored"?v._errorSteps(R._storedError):ut(R._readableStreamController,i,d,v)}o(fr,"ReadableStreamBYOBReaderRead");function Zr(n){N(n);let i=new TypeError("Reader was released");ls(n,i)}o(Zr,"ReadableStreamBYOBReaderRelease");function ls(n,i){let d=n._readIntoRequests;n._readIntoRequests=new F,d.forEach(v=>{v._errorSteps(i)})}o(ls,"ReadableStreamBYOBReaderErrorReadIntoRequests");function Aa(n){return new TypeError(`ReadableStreamBYOBReader.prototype.${n} can only be used on a ReadableStreamBYOBReader`)}o(Aa,"byobReaderBrandCheckException");function Qr(n,i){let{highWaterMark:d}=n;if(d===void 0)return i;if(as(d)||d<0)throw new RangeError("Invalid highWaterMark");return d}o(Qr,"ExtractHighWaterMark");function Ca(n){let{size:i}=n;return i||(()=>1)}o(Ca,"ExtractSizeAlgorithm");function us(n,i){ie(n,i);let d=n?.highWaterMark,v=n?.size;return{highWaterMark:d===void 0?void 0:je(d),size:v===void 0?void 0:Vi(v,`${i} has member 'size' that`)}}o(us,"convertQueuingStrategy");function Vi(n,i){return Pe(n,i),d=>je(n(d))}o(Vi,"convertQueuingStrategySize");function Zi(n,i){ie(n,i);let d=n?.abort,v=n?.close,R=n?.start,A=n?.type,I=n?.write;return{abort:d===void 0?void 0:Qi(d,n,`${i} has member 'abort' that`),close:v===void 0?void 0:Gi(v,n,`${i} has member 'close' that`),start:R===void 0?void 0:Yi(R,n,`${i} has member 'start' that`),write:I===void 0?void 0:Ki(I,n,`${i} has member 'write' that`),type:A}}o(Zi,"convertUnderlyingSink");function Qi(n,i,d){return Pe(n,d),v=>k(n,i,[v])}o(Qi,"convertUnderlyingSinkAbortCallback");function Gi(n,i,d){return Pe(n,d),()=>k(n,i,[])}o(Gi,"convertUnderlyingSinkCloseCallback");function Yi(n,i,d){return Pe(n,d),v=>$(n,i,[v])}o(Yi,"convertUnderlyingSinkStartCallback");function Ki(n,i,d){return Pe(n,d),(v,R)=>k(n,i,[v,R])}o(Ki,"convertUnderlyingSinkWriteCallback");function Ji(n,i){if(!Oa(n))throw new TypeError(`${i} is not a WritableStream.`)}o(Ji,"assertWritableStream");function Lf(n){if(typeof n!="object"||n===null)return!1;try{return typeof n.aborted=="boolean"}catch{return!1}}o(Lf,"isAbortSignal");let Nf=typeof AbortController=="function";function jf(){if(Nf)return new AbortController}o(jf,"createAbortController");class Or{static{o(this,"WritableStream")}constructor(i={},d={}){i===void 0?i=null:Ye(i,"First parameter");let v=us(d,"Second parameter"),R=Zi(i,"First parameter");if(el(this),R.type!==void 0)throw new RangeError("Invalid type is specified");let I=Ca(v),H=Qr(v,1);Jf(this,R,H,I)}get locked(){if(!Oa(this))throw Vs("locked");return ka(this)}abort(i=void 0){return Oa(this)?ka(this)?m(new TypeError("Cannot abort a stream that already has a writer")):Us(this,i):m(Vs("abort"))}close(){return Oa(this)?ka(this)?m(new TypeError("Cannot close a stream that already has a writer")):tr(this)?m(new TypeError("Cannot close an already-closing stream")):tl(this):m(Vs("close"))}getWriter(){if(!Oa(this))throw Vs("getWriter");return Xi(this)}}Object.defineProperties(Or.prototype,{abort:{enumerable:!0},close:{enumerable:!0},getWriter:{enumerable:!0},locked:{enumerable:!0}}),t(Or.prototype.abort,"abort"),t(Or.prototype.close,"close"),t(Or.prototype.getWriter,"getWriter"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(Or.prototype,Symbol.toStringTag,{value:"WritableStream",configurable:!0});function Xi(n){return new hr(n)}o(Xi,"AcquireWritableStreamDefaultWriter");function Mf(n,i,d,v,R=1,A=()=>1){let I=Object.create(Or.prototype);el(I);let H=Object.create(Da.prototype);return il(I,H,n,i,d,v,R,A),I}o(Mf,"CreateWritableStream");function el(n){n._state="writable",n._storedError=void 0,n._writer=void 0,n._writableStreamController=void 0,n._writeRequests=new F,n._inFlightWriteRequest=void 0,n._closeRequest=void 0,n._inFlightCloseRequest=void 0,n._pendingAbortRequest=void 0,n._backpressure=!1}o(el,"InitializeWritableStream");function Oa(n){return!r(n)||!Object.prototype.hasOwnProperty.call(n,"_writableStreamController")?!1:n instanceof Or}o(Oa,"IsWritableStream");function ka(n){return n._writer!==void 0}o(ka,"IsWritableStreamLocked");function Us(n,i){var d;if(n._state==="closed"||n._state==="errored")return p(void 0);n._writableStreamController._abortReason=i,(d=n._writableStreamController._abortController)===null||d===void 0||d.abort(i);let v=n._state;if(v==="closed"||v==="errored")return p(void 0);if(n._pendingAbortRequest!==void 0)return n._pendingAbortRequest._promise;let R=!1;v==="erroring"&&(R=!0,i=void 0);let A=h((I,H)=>{n._pendingAbortRequest={_promise:void 0,_resolve:I,_reject:H,_reason:i,_wasAlreadyErroring:R}});return n._pendingAbortRequest._promise=A,R||To(n,i),A}o(Us,"WritableStreamAbort");function tl(n){let i=n._state;if(i==="closed"||i==="errored")return m(new TypeError(`The stream (in ${i} state) is not in the writable state and cannot be closed`));let d=h((R,A)=>{let I={_resolve:R,_reject:A};n._closeRequest=I}),v=n._writer;return v!==void 0&&n._backpressure&&i==="writable"&&$o(v),Xf(n._writableStreamController),d}o(tl,"WritableStreamClose");function qf(n){return h((d,v)=>{let R={_resolve:d,_reject:v};n._writeRequests.push(R)})}o(qf,"WritableStreamAddWriteRequest");function xo(n,i){if(n._state==="writable"){To(n,i);return}Ao(n)}o(xo,"WritableStreamDealWithRejection");function To(n,i){let d=n._writableStreamController;n._state="erroring",n._storedError=i;let v=n._writer;v!==void 0&&al(v,i),!Wf(n)&&d._started&&Ao(n)}o(To,"WritableStreamStartErroring");function Ao(n){n._state="errored",n._writableStreamController[K]();let i=n._storedError;if(n._writeRequests.forEach(R=>{R._reject(i)}),n._writeRequests=new F,n._pendingAbortRequest===void 0){Bs(n);return}let d=n._pendingAbortRequest;if(n._pendingAbortRequest=void 0,d._wasAlreadyErroring){d._reject(i),Bs(n);return}let v=n._writableStreamController[L](d._reason);P(v,()=>(d._resolve(),Bs(n),null),R=>(d._reject(R),Bs(n),null))}o(Ao,"WritableStreamFinishErroring");function zf(n){n._inFlightWriteRequest._resolve(void 0),n._inFlightWriteRequest=void 0}o(zf,"WritableStreamFinishInFlightWrite");function Uf(n,i){n._inFlightWriteRequest._reject(i),n._inFlightWriteRequest=void 0,xo(n,i)}o(Uf,"WritableStreamFinishInFlightWriteWithError");function Bf(n){n._inFlightCloseRequest._resolve(void 0),n._inFlightCloseRequest=void 0,n._state==="erroring"&&(n._storedError=void 0,n._pendingAbortRequest!==void 0&&(n._pendingAbortRequest._resolve(),n._pendingAbortRequest=void 0)),n._state="closed";let d=n._writer;d!==void 0&&dl(d)}o(Bf,"WritableStreamFinishInFlightClose");function Hf(n,i){n._inFlightCloseRequest._reject(i),n._inFlightCloseRequest=void 0,n._pendingAbortRequest!==void 0&&(n._pendingAbortRequest._reject(i),n._pendingAbortRequest=void 0),xo(n,i)}o(Hf,"WritableStreamFinishInFlightCloseWithError");function tr(n){return!(n._closeRequest===void 0&&n._inFlightCloseRequest===void 0)}o(tr,"WritableStreamCloseQueuedOrInFlight");function Wf(n){return!(n._inFlightWriteRequest===void 0&&n._inFlightCloseRequest===void 0)}o(Wf,"WritableStreamHasOperationMarkedInFlight");function Vf(n){n._inFlightCloseRequest=n._closeRequest,n._closeRequest=void 0}o(Vf,"WritableStreamMarkCloseRequestInFlight");function Zf(n){n._inFlightWriteRequest=n._writeRequests.shift()}o(Zf,"WritableStreamMarkFirstWriteRequestInFlight");function Bs(n){n._closeRequest!==void 0&&(n._closeRequest._reject(n._storedError),n._closeRequest=void 0);let i=n._writer;i!==void 0&&Io(i,n._storedError)}o(Bs,"WritableStreamRejectCloseAndClosedPromiseIfNeeded");function Co(n,i){let d=n._writer;d!==void 0&&i!==n._backpressure&&(i?oh(d):$o(d)),n._backpressure=i}o(Co,"WritableStreamUpdateBackpressure");class hr{static{o(this,"WritableStreamDefaultWriter")}constructor(i){if(Ke(i,1,"WritableStreamDefaultWriter"),Ji(i,"First parameter"),ka(i))throw new TypeError("This stream has already been locked for exclusive writing by another writer");this._ownerWritableStream=i,i._writer=this;let d=i._state;if(d==="writable")!tr(i)&&i._backpressure?Qs(this):fl(this),Zs(this);else if(d==="erroring")Fo(this,i._storedError),Zs(this);else if(d==="closed")fl(this),sh(this);else{let v=i._storedError;Fo(this,v),cl(this,v)}}get closed(){return Gr(this)?this._closedPromise:m(Yr("closed"))}get desiredSize(){if(!Gr(this))throw Yr("desiredSize");if(this._ownerWritableStream===void 0)throw ds("desiredSize");return Kf(this)}get ready(){return Gr(this)?this._readyPromise:m(Yr("ready"))}abort(i=void 0){return Gr(this)?this._ownerWritableStream===void 0?m(ds("abort")):Qf(this,i):m(Yr("abort"))}close(){if(!Gr(this))return m(Yr("close"));let i=this._ownerWritableStream;return i===void 0?m(ds("close")):tr(i)?m(new TypeError("Cannot close an already-closing stream")):rl(this)}releaseLock(){if(!Gr(this))throw Yr("releaseLock");this._ownerWritableStream!==void 0&&sl(this)}write(i=void 0){return Gr(this)?this._ownerWritableStream===void 0?m(ds("write to")):nl(this,i):m(Yr("write"))}}Object.defineProperties(hr.prototype,{abort:{enumerable:!0},close:{enumerable:!0},releaseLock:{enumerable:!0},write:{enumerable:!0},closed:{enumerable:!0},desiredSize:{enumerable:!0},ready:{enumerable:!0}}),t(hr.prototype.abort,"abort"),t(hr.prototype.close,"close"),t(hr.prototype.releaseLock,"releaseLock"),t(hr.prototype.write,"write"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(hr.prototype,Symbol.toStringTag,{value:"WritableStreamDefaultWriter",configurable:!0});function Gr(n){return!r(n)||!Object.prototype.hasOwnProperty.call(n,"_ownerWritableStream")?!1:n instanceof hr}o(Gr,"IsWritableStreamDefaultWriter");function Qf(n,i){let d=n._ownerWritableStream;return Us(d,i)}o(Qf,"WritableStreamDefaultWriterAbort");function rl(n){let i=n._ownerWritableStream;return tl(i)}o(rl,"WritableStreamDefaultWriterClose");function Gf(n){let i=n._ownerWritableStream,d=i._state;return tr(i)||d==="closed"?p(void 0):d==="errored"?m(i._storedError):rl(n)}o(Gf,"WritableStreamDefaultWriterCloseWithErrorPropagation");function Yf(n,i){n._closedPromiseState==="pending"?Io(n,i):nh(n,i)}o(Yf,"WritableStreamDefaultWriterEnsureClosedPromiseRejected");function al(n,i){n._readyPromiseState==="pending"?hl(n,i):ih(n,i)}o(al,"WritableStreamDefaultWriterEnsureReadyPromiseRejected");function Kf(n){let i=n._ownerWritableStream,d=i._state;return d==="errored"||d==="erroring"?null:d==="closed"?0:ll(i._writableStreamController)}o(Kf,"WritableStreamDefaultWriterGetDesiredSize");function sl(n){let i=n._ownerWritableStream,d=new TypeError("Writer was released and can no longer be used to monitor the stream's closedness");al(n,d),Yf(n,d),i._writer=void 0,n._ownerWritableStream=void 0}o(sl,"WritableStreamDefaultWriterRelease");function nl(n,i){let d=n._ownerWritableStream,v=d._writableStreamController,R=eh(v,i);if(d!==n._ownerWritableStream)return m(ds("write to"));let A=d._state;if(A==="errored")return m(d._storedError);if(tr(d)||A==="closed")return m(new TypeError("The stream is closing or closed and cannot be written to"));if(A==="erroring")return m(d._storedError);let I=qf(d);return th(v,i,R),I}o(nl,"WritableStreamDefaultWriterWrite");let ol={};class Da{static{o(this,"WritableStreamDefaultController")}constructor(){throw new TypeError("Illegal constructor")}get abortReason(){if(!Oo(this))throw Do("abortReason");return this._abortReason}get signal(){if(!Oo(this))throw Do("signal");if(this._abortController===void 0)throw new TypeError("WritableStreamDefaultController.prototype.signal is not supported");return this._abortController.signal}error(i=void 0){if(!Oo(this))throw Do("error");this._controlledWritableStream._state==="writable"&&ul(this,i)}[L](i){let d=this._abortAlgorithm(i);return Hs(this),d}[K](){w(this)}}Object.defineProperties(Da.prototype,{abortReason:{enumerable:!0},signal:{enumerable:!0},error:{enumerable:!0}}),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(Da.prototype,Symbol.toStringTag,{value:"WritableStreamDefaultController",configurable:!0});function Oo(n){return!r(n)||!Object.prototype.hasOwnProperty.call(n,"_controlledWritableStream")?!1:n instanceof Da}o(Oo,"IsWritableStreamDefaultController");function il(n,i,d,v,R,A,I,H){i._controlledWritableStream=n,n._writableStreamController=i,i._queue=void 0,i._queueTotalSize=void 0,w(i),i._abortReason=void 0,i._abortController=jf(),i._started=!1,i._strategySizeAlgorithm=H,i._strategyHWM=I,i._writeAlgorithm=v,i._closeAlgorithm=R,i._abortAlgorithm=A;let oe=ko(i);Co(n,oe);let X=d(),le=p(X);P(le,()=>(i._started=!0,Ws(i),null),he=>(i._started=!0,xo(n,he),null))}o(il,"SetUpWritableStreamDefaultController");function Jf(n,i,d,v){let R=Object.create(Da.prototype),A,I,H,oe;i.start!==void 0?A=o(()=>i.start(R),"startAlgorithm"):A=o(()=>{},"startAlgorithm"),i.write!==void 0?I=o(X=>i.write(X,R),"writeAlgorithm"):I=o(()=>p(void 0),"writeAlgorithm"),i.close!==void 0?H=o(()=>i.close(),"closeAlgorithm"):H=o(()=>p(void 0),"closeAlgorithm"),i.abort!==void 0?oe=o(X=>i.abort(X),"abortAlgorithm"):oe=o(()=>p(void 0),"abortAlgorithm"),il(n,R,A,I,H,oe,d,v)}o(Jf,"SetUpWritableStreamDefaultControllerFromUnderlyingSink");function Hs(n){n._writeAlgorithm=void 0,n._closeAlgorithm=void 0,n._abortAlgorithm=void 0,n._strategySizeAlgorithm=void 0}o(Hs,"WritableStreamDefaultControllerClearAlgorithms");function Xf(n){is(n,ol,0),Ws(n)}o(Xf,"WritableStreamDefaultControllerClose");function eh(n,i){try{return n._strategySizeAlgorithm(i)}catch(d){return cs(n,d),1}}o(eh,"WritableStreamDefaultControllerGetChunkSize");function ll(n){return n._strategyHWM-n._queueTotalSize}o(ll,"WritableStreamDefaultControllerGetDesiredSize");function th(n,i,d){try{is(n,i,d)}catch(R){cs(n,R);return}let v=n._controlledWritableStream;if(!tr(v)&&v._state==="writable"){let R=ko(n);Co(v,R)}Ws(n)}o(th,"WritableStreamDefaultControllerWrite");function Ws(n){let i=n._controlledWritableStream;if(!n._started||i._inFlightWriteRequest!==void 0)return;if(i._state==="erroring"){Ao(i);return}if(n._queue.length===0)return;let v=Ns(n);v===ol?rh(n):ah(n,v)}o(Ws,"WritableStreamDefaultControllerAdvanceQueueIfNeeded");function cs(n,i){n._controlledWritableStream._state==="writable"&&ul(n,i)}o(cs,"WritableStreamDefaultControllerErrorIfNeeded");function rh(n){let i=n._controlledWritableStream;Vf(i),Ea(n);let d=n._closeAlgorithm();Hs(n),P(d,()=>(Bf(i),null),v=>(Hf(i,v),null))}o(rh,"WritableStreamDefaultControllerProcessClose");function ah(n,i){let d=n._controlledWritableStream;Zf(d);let v=n._writeAlgorithm(i);P(v,()=>{zf(d);let R=d._state;if(Ea(n),!tr(d)&&R==="writable"){let A=ko(n);Co(d,A)}return Ws(n),null},R=>(d._state==="writable"&&Hs(n),Uf(d,R),null))}o(ah,"WritableStreamDefaultControllerProcessWrite");function ko(n){return ll(n)<=0}o(ko,"WritableStreamDefaultControllerGetBackpressure");function ul(n,i){let d=n._controlledWritableStream;Hs(n),To(d,i)}o(ul,"WritableStreamDefaultControllerError");function Vs(n){return new TypeError(`WritableStream.prototype.${n} can only be used on a WritableStream`)}o(Vs,"streamBrandCheckException$2");function Do(n){return new TypeError(`WritableStreamDefaultController.prototype.${n} can only be used on a WritableStreamDefaultController`)}o(Do,"defaultControllerBrandCheckException$2");function Yr(n){return new TypeError(`WritableStreamDefaultWriter.prototype.${n} can only be used on a WritableStreamDefaultWriter`)}o(Yr,"defaultWriterBrandCheckException");function ds(n){return new TypeError("Cannot "+n+" a stream using a released writer")}o(ds,"defaultWriterLockException");function Zs(n){n._closedPromise=h((i,d)=>{n._closedPromise_resolve=i,n._closedPromise_reject=d,n._closedPromiseState="pending"})}o(Zs,"defaultWriterClosedPromiseInitialize");function cl(n,i){Zs(n),Io(n,i)}o(cl,"defaultWriterClosedPromiseInitializeAsRejected");function sh(n){Zs(n),dl(n)}o(sh,"defaultWriterClosedPromiseInitializeAsResolved");function Io(n,i){n._closedPromise_reject!==void 0&&(_(n._closedPromise),n._closedPromise_reject(i),n._closedPromise_resolve=void 0,n._closedPromise_reject=void 0,n._closedPromiseState="rejected")}o(Io,"defaultWriterClosedPromiseReject");function nh(n,i){cl(n,i)}o(nh,"defaultWriterClosedPromiseResetToRejected");function dl(n){n._closedPromise_resolve!==void 0&&(n._closedPromise_resolve(void 0),n._closedPromise_resolve=void 0,n._closedPromise_reject=void 0,n._closedPromiseState="resolved")}o(dl,"defaultWriterClosedPromiseResolve");function Qs(n){n._readyPromise=h((i,d)=>{n._readyPromise_resolve=i,n._readyPromise_reject=d}),n._readyPromiseState="pending"}o(Qs,"defaultWriterReadyPromiseInitialize");function Fo(n,i){Qs(n),hl(n,i)}o(Fo,"defaultWriterReadyPromiseInitializeAsRejected");function fl(n){Qs(n),$o(n)}o(fl,"defaultWriterReadyPromiseInitializeAsResolved");function hl(n,i){n._readyPromise_reject!==void 0&&(_(n._readyPromise),n._readyPromise_reject(i),n._readyPromise_resolve=void 0,n._readyPromise_reject=void 0,n._readyPromiseState="rejected")}o(hl,"defaultWriterReadyPromiseReject");function oh(n){Qs(n)}o(oh,"defaultWriterReadyPromiseReset");function ih(n,i){Fo(n,i)}o(ih,"defaultWriterReadyPromiseResetToRejected");function $o(n){n._readyPromise_resolve!==void 0&&(n._readyPromise_resolve(void 0),n._readyPromise_resolve=void 0,n._readyPromise_reject=void 0,n._readyPromiseState="fulfilled")}o($o,"defaultWriterReadyPromiseResolve");function lh(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof global<"u")return global}o(lh,"getGlobals");let Lo=lh();function uh(n){if(!(typeof n=="function"||typeof n=="object")||n.name!=="DOMException")return!1;try{return new n,!0}catch{return!1}}o(uh,"isDOMExceptionConstructor");function ch(){let n=Lo?.DOMException;return uh(n)?n:void 0}o(ch,"getFromGlobal");function dh(){let n=o(function(d,v){this.message=d||"",this.name=v||"Error",Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)},"DOMException");return t(n,"DOMException"),n.prototype=Object.create(Error.prototype),Object.defineProperty(n.prototype,"constructor",{value:n,writable:!0,configurable:!0}),n}o(dh,"createPolyfill");let fh=ch()||dh();function pl(n,i,d,v,R,A){let I=lt(n),H=Xi(i);n._disturbed=!0;let oe=!1,X=p(void 0);return h((le,he)=>{let Ae;if(A!==void 0){if(Ae=o(()=>{let te=A.reason!==void 0?A.reason:new fh("Aborted","AbortError"),be=[];v||be.push(()=>i._state==="writable"?Us(i,te):p(void 0)),R||be.push(()=>n._state==="readable"?Bt(n,te):p(void 0)),mt(()=>Promise.all(be.map(ke=>ke())),!0,te)},"abortAlgorithm"),A.aborted){Ae();return}A.addEventListener("abort",Ae)}function Ht(){return h((te,be)=>{function ke(wt){wt?te():S(La(),ke,be)}o(ke,"next"),ke(!1)})}o(Ht,"pipeLoop");function La(){return oe?p(!0):S(H._readyPromise,()=>h((te,be)=>{He(I,{_chunkSteps:o(ke=>{X=S(nl(H,ke),void 0,e),te(!1)},"_chunkSteps"),_closeSteps:o(()=>te(!0),"_closeSteps"),_errorSteps:be})}))}if(o(La,"pipeStep"),mr(n,I._closedPromise,te=>(v?kt(!0,te):mt(()=>Us(i,te),!0,te),null)),mr(i,H._closedPromise,te=>(R?kt(!0,te):mt(()=>Bt(n,te),!0,te),null)),dt(n,I._closedPromise,()=>(d?kt():mt(()=>Gf(H)),null)),tr(i)||i._state==="closed"){let te=new TypeError("the destination writable stream closed before all data could be piped to it");R?kt(!0,te):mt(()=>Bt(n,te),!0,te)}_(Ht());function Fr(){let te=X;return S(X,()=>te!==X?Fr():void 0)}o(Fr,"waitForWritesToFinish");function mr(te,be,ke){te._state==="errored"?ke(te._storedError):b(be,ke)}o(mr,"isOrBecomesErrored");function dt(te,be,ke){te._state==="closed"?ke():g(be,ke)}o(dt,"isOrBecomesClosed");function mt(te,be,ke){if(oe)return;oe=!0,i._state==="writable"&&!tr(i)?g(Fr(),wt):wt();function wt(){return P(te(),()=>gr(be,ke),Na=>gr(!0,Na)),null}o(wt,"doTheRest")}o(mt,"shutdownWithAction");function kt(te,be){oe||(oe=!0,i._state==="writable"&&!tr(i)?g(Fr(),()=>gr(te,be)):gr(te,be))}o(kt,"shutdown");function gr(te,be){return sl(H),N(I),A!==void 0&&A.removeEventListener("abort",Ae),te?he(be):le(void 0),null}o(gr,"finalize")})}o(pl,"ReadableStreamPipeTo");class pr{static{o(this,"ReadableStreamDefaultController")}constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!Gs(this))throw Ks("desiredSize");return No(this)}close(){if(!Gs(this))throw Ks("close");if(!Fa(this))throw new TypeError("The stream is not in a state that permits close");Kr(this)}enqueue(i=void 0){if(!Gs(this))throw Ks("enqueue");if(!Fa(this))throw new TypeError("The stream is not in a state that permits enqueue");return Ia(this,i)}error(i=void 0){if(!Gs(this))throw Ks("error");Ut(this,i)}[Q](i){w(this);let d=this._cancelAlgorithm(i);return Ys(this),d}[z](i){let d=this._controlledReadableStream;if(this._queue.length>0){let v=Ea(this);this._closeRequested&&this._queue.length===0?(Ys(this),ps(d)):fs(this),i._chunkSteps(v)}else Et(d,i),fs(this)}[G](){}}Object.defineProperties(pr.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},desiredSize:{enumerable:!0}}),t(pr.prototype.close,"close"),t(pr.prototype.enqueue,"enqueue"),t(pr.prototype.error,"error"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(pr.prototype,Symbol.toStringTag,{value:"ReadableStreamDefaultController",configurable:!0});function Gs(n){return!r(n)||!Object.prototype.hasOwnProperty.call(n,"_controlledReadableStream")?!1:n instanceof pr}o(Gs,"IsReadableStreamDefaultController");function fs(n){if(!ml(n))return;if(n._pulling){n._pullAgain=!0;return}n._pulling=!0;let d=n._pullAlgorithm();P(d,()=>(n._pulling=!1,n._pullAgain&&(n._pullAgain=!1,fs(n)),null),v=>(Ut(n,v),null))}o(fs,"ReadableStreamDefaultControllerCallPullIfNeeded");function ml(n){let i=n._controlledReadableStream;return!Fa(n)||!n._started?!1:!!(Dr(i)&&Rt(i)>0||No(n)>0)}o(ml,"ReadableStreamDefaultControllerShouldCallPull");function Ys(n){n._pullAlgorithm=void 0,n._cancelAlgorithm=void 0,n._strategySizeAlgorithm=void 0}o(Ys,"ReadableStreamDefaultControllerClearAlgorithms");function Kr(n){if(!Fa(n))return;let i=n._controlledReadableStream;n._closeRequested=!0,n._queue.length===0&&(Ys(n),ps(i))}o(Kr,"ReadableStreamDefaultControllerClose");function Ia(n,i){if(!Fa(n))return;let d=n._controlledReadableStream;if(Dr(d)&&Rt(d)>0)Mt(d,i,!1);else{let v;try{v=n._strategySizeAlgorithm(i)}catch(R){throw Ut(n,R),R}try{is(n,i,v)}catch(R){throw Ut(n,R),R}}fs(n)}o(Ia,"ReadableStreamDefaultControllerEnqueue");function Ut(n,i){let d=n._controlledReadableStream;d._state==="readable"&&(w(n),Ys(n),bl(d,i))}o(Ut,"ReadableStreamDefaultControllerError");function No(n){let i=n._controlledReadableStream._state;return i==="errored"?null:i==="closed"?0:n._strategyHWM-n._queueTotalSize}o(No,"ReadableStreamDefaultControllerGetDesiredSize");function hh(n){return!ml(n)}o(hh,"ReadableStreamDefaultControllerHasBackpressure");function Fa(n){let i=n._controlledReadableStream._state;return!n._closeRequested&&i==="readable"}o(Fa,"ReadableStreamDefaultControllerCanCloseOrEnqueue");function gl(n,i,d,v,R,A,I){i._controlledReadableStream=n,i._queue=void 0,i._queueTotalSize=void 0,w(i),i._started=!1,i._closeRequested=!1,i._pullAgain=!1,i._pulling=!1,i._strategySizeAlgorithm=I,i._strategyHWM=A,i._pullAlgorithm=v,i._cancelAlgorithm=R,n._readableStreamController=i;let H=d();P(p(H),()=>(i._started=!0,fs(i),null),oe=>(Ut(i,oe),null))}o(gl,"SetUpReadableStreamDefaultController");function ph(n,i,d,v){let R=Object.create(pr.prototype),A,I,H;i.start!==void 0?A=o(()=>i.start(R),"startAlgorithm"):A=o(()=>{},"startAlgorithm"),i.pull!==void 0?I=o(()=>i.pull(R),"pullAlgorithm"):I=o(()=>p(void 0),"pullAlgorithm"),i.cancel!==void 0?H=o(oe=>i.cancel(oe),"cancelAlgorithm"):H=o(()=>p(void 0),"cancelAlgorithm"),gl(n,R,A,I,H,d,v)}o(ph,"SetUpReadableStreamDefaultControllerFromUnderlyingSource");function Ks(n){return new TypeError(`ReadableStreamDefaultController.prototype.${n} can only be used on a ReadableStreamDefaultController`)}o(Ks,"defaultControllerBrandCheckException$1");function mh(n,i){return ae(n._readableStreamController)?vh(n):gh(n)}o(mh,"ReadableStreamTee");function gh(n,i){let d=lt(n),v=!1,R=!1,A=!1,I=!1,H,oe,X,le,he,Ae=h(dt=>{he=dt});function Ht(){return v?(R=!0,p(void 0)):(v=!0,He(d,{_chunkSteps:o(mt=>{T(()=>{R=!1;let kt=mt,gr=mt;A||Ia(X._readableStreamController,kt),I||Ia(le._readableStreamController,gr),v=!1,R&&Ht()})},"_chunkSteps"),_closeSteps:o(()=>{v=!1,A||Kr(X._readableStreamController),I||Kr(le._readableStreamController),(!A||!I)&&he(void 0)},"_closeSteps"),_errorSteps:o(()=>{v=!1},"_errorSteps")}),p(void 0))}o(Ht,"pullAlgorithm");function La(dt){if(A=!0,H=dt,I){let mt=at([H,oe]),kt=Bt(n,mt);he(kt)}return Ae}o(La,"cancel1Algorithm");function Fr(dt){if(I=!0,oe=dt,A){let mt=at([H,oe]),kt=Bt(n,mt);he(kt)}return Ae}o(Fr,"cancel2Algorithm");function mr(){}return o(mr,"startAlgorithm"),X=hs(mr,Ht,La),le=hs(mr,Ht,Fr),b(d._closedPromise,dt=>(Ut(X._readableStreamController,dt),Ut(le._readableStreamController,dt),(!A||!I)&&he(void 0),null)),[X,le]}o(gh,"ReadableStreamDefaultTee");function vh(n){let i=lt(n),d=!1,v=!1,R=!1,A=!1,I=!1,H,oe,X,le,he,Ae=h(te=>{he=te});function Ht(te){b(te._closedPromise,be=>(te!==i||(Qe(X._readableStreamController,be),Qe(le._readableStreamController,be),(!A||!I)&&he(void 0)),null))}o(Ht,"forwardReaderError");function La(){Cr(i)&&(N(i),i=lt(n),Ht(i)),He(i,{_chunkSteps:o(be=>{T(()=>{v=!1,R=!1;let ke=be,wt=be;if(!A&&!I)try{wt=Ls(be)}catch(Na){Qe(X._readableStreamController,Na),Qe(le._readableStreamController,Na),he(Bt(n,Na));return}A||zt(X._readableStreamController,ke),I||zt(le._readableStreamController,wt),d=!1,v?mr():R&&dt()})},"_chunkSteps"),_closeSteps:o(()=>{d=!1,A||Xt(X._readableStreamController),I||Xt(le._readableStreamController),X._readableStreamController._pendingPullIntos.length>0&&Ct(X._readableStreamController,0),le._readableStreamController._pendingPullIntos.length>0&&Ct(le._readableStreamController,0),(!A||!I)&&he(void 0)},"_closeSteps"),_errorSteps:o(()=>{d=!1},"_errorSteps")})}o(La,"pullWithDefaultReader");function Fr(te,be){qe(i)&&(N(i),i=zs(n),Ht(i));let ke=be?le:X,wt=be?X:le;fr(i,te,1,{_chunkSteps:o(ja=>{T(()=>{v=!1,R=!1;let Ma=be?I:A;if(be?A:I)Ma||xa(ke._readableStreamController,ja);else{let Dl;try{Dl=Ls(ja)}catch(Uo){Qe(ke._readableStreamController,Uo),Qe(wt._readableStreamController,Uo),he(Bt(n,Uo));return}Ma||xa(ke._readableStreamController,ja),zt(wt._readableStreamController,Dl)}d=!1,v?mr():R&&dt()})},"_chunkSteps"),_closeSteps:o(ja=>{d=!1;let Ma=be?I:A,nn=be?A:I;Ma||Xt(ke._readableStreamController),nn||Xt(wt._readableStreamController),ja!==void 0&&(Ma||xa(ke._readableStreamController,ja),!nn&&wt._readableStreamController._pendingPullIntos.length>0&&Ct(wt._readableStreamController,0)),(!Ma||!nn)&&he(void 0)},"_closeSteps"),_errorSteps:o(()=>{d=!1},"_errorSteps")})}o(Fr,"pullWithBYOBReader");function mr(){if(d)return v=!0,p(void 0);d=!0;let te=er(X._readableStreamController);return te===null?La():Fr(te._view,!1),p(void 0)}o(mr,"pull1Algorithm");function dt(){if(d)return R=!0,p(void 0);d=!0;let te=er(le._readableStreamController);return te===null?La():Fr(te._view,!0),p(void 0)}o(dt,"pull2Algorithm");function mt(te){if(A=!0,H=te,I){let be=at([H,oe]),ke=Bt(n,be);he(ke)}return Ae}o(mt,"cancel1Algorithm");function kt(te){if(I=!0,oe=te,A){let be=at([H,oe]),ke=Bt(n,be);he(ke)}return Ae}o(kt,"cancel2Algorithm");function gr(){}return o(gr,"startAlgorithm"),X=yl(gr,mr,mt),le=yl(gr,dt,kt),Ht(i),[X,le]}o(vh,"ReadableByteStreamTee");function yh(n){return r(n)&&typeof n.getReader<"u"}o(yh,"isReadableStreamLike");function bh(n){return yh(n)?Sh(n.getReader()):_h(n)}o(bh,"ReadableStreamFrom");function _h(n){let i,d=Is(n,"async"),v=e;function R(){let I;try{I=Fs(d)}catch(oe){return m(oe)}let H=p(I);return E(H,oe=>{if(!r(oe))throw new TypeError("The promise returned by the iterator.next() method must fulfill with an object");if(Eo(oe))Kr(i._readableStreamController);else{let le=os(oe);Ia(i._readableStreamController,le)}})}o(R,"pullAlgorithm");function A(I){let H=d.iterator,oe;try{oe=Pa(H,"return")}catch(he){return m(he)}if(oe===void 0)return p(void 0);let X;try{X=$(oe,H,[I])}catch(he){return m(he)}let le=p(X);return E(le,he=>{if(!r(he))throw new TypeError("The promise returned by the iterator.return() method must fulfill with an object")})}return o(A,"cancelAlgorithm"),i=hs(v,R,A,0),i}o(_h,"ReadableStreamFromIterable");function Sh(n){let i,d=e;function v(){let A;try{A=n.read()}catch(I){return m(I)}return E(A,I=>{if(!r(I))throw new TypeError("The promise returned by the reader.read() method must fulfill with an object");if(I.done)Kr(i._readableStreamController);else{let H=I.value;Ia(i._readableStreamController,H)}})}o(v,"pullAlgorithm");function R(A){try{return p(n.cancel(A))}catch(I){return m(I)}}return o(R,"cancelAlgorithm"),i=hs(d,v,R,0),i}o(Sh,"ReadableStreamFromDefaultReader");function wh(n,i){ie(n,i);let d=n,v=d?.autoAllocateChunkSize,R=d?.cancel,A=d?.pull,I=d?.start,H=d?.type;return{autoAllocateChunkSize:v===void 0?void 0:Ve(v,`${i} has member 'autoAllocateChunkSize' that`),cancel:R===void 0?void 0:Ph(R,d,`${i} has member 'cancel' that`),pull:A===void 0?void 0:Eh(A,d,`${i} has member 'pull' that`),start:I===void 0?void 0:Rh(I,d,`${i} has member 'start' that`),type:H===void 0?void 0:xh(H,`${i} has member 'type' that`)}}o(wh,"convertUnderlyingDefaultOrByteSource");function Ph(n,i,d){return Pe(n,d),v=>k(n,i,[v])}o(Ph,"convertUnderlyingSourceCancelCallback");function Eh(n,i,d){return Pe(n,d),v=>k(n,i,[v])}o(Eh,"convertUnderlyingSourcePullCallback");function Rh(n,i,d){return Pe(n,d),v=>$(n,i,[v])}o(Rh,"convertUnderlyingSourceStartCallback");function xh(n,i){if(n=`${n}`,n!=="bytes")throw new TypeError(`${i} '${n}' is not a valid enumeration value for ReadableStreamType`);return n}o(xh,"convertReadableStreamType");function Th(n,i){return ie(n,i),{preventCancel:!!n?.preventCancel}}o(Th,"convertIteratorOptions");function vl(n,i){ie(n,i);let d=n?.preventAbort,v=n?.preventCancel,R=n?.preventClose,A=n?.signal;return A!==void 0&&Ah(A,`${i} has member 'signal' that`),{preventAbort:!!d,preventCancel:!!v,preventClose:!!R,signal:A}}o(vl,"convertPipeOptions");function Ah(n,i){if(!Lf(n))throw new TypeError(`${i} is not an AbortSignal.`)}o(Ah,"assertAbortSignal");function Ch(n,i){ie(n,i);let d=n?.readable;St(d,"readable","ReadableWritablePair"),_e(d,`${i} has member 'readable' that`);let v=n?.writable;return St(v,"writable","ReadableWritablePair"),Ji(v,`${i} has member 'writable' that`),{readable:d,writable:v}}o(Ch,"convertReadableWritablePair");class ot{static{o(this,"ReadableStream")}constructor(i={},d={}){i===void 0?i=null:Ye(i,"First parameter");let v=us(d,"Second parameter"),R=wh(i,"First parameter");if(jo(this),R.type==="bytes"){if(v.size!==void 0)throw new RangeError("The strategy for a byte stream cannot have a size function");let A=Qr(v,0);Ms(this,R,A)}else{let A=Ca(v),I=Qr(v,1);ph(this,R,I,A)}}get locked(){if(!kr(this))throw Jr("locked");return Dr(this)}cancel(i=void 0){return kr(this)?Dr(this)?m(new TypeError("Cannot cancel a stream that already has a reader")):Bt(this,i):m(Jr("cancel"))}getReader(i=void 0){if(!kr(this))throw Jr("getReader");return Vr(i,"First parameter").mode===void 0?lt(this):zs(this)}pipeThrough(i,d={}){if(!kr(this))throw Jr("pipeThrough");Ke(i,1,"pipeThrough");let v=Ch(i,"First parameter"),R=vl(d,"Second parameter");if(Dr(this))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(ka(v.writable))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");let A=pl(this,v.writable,R.preventClose,R.preventAbort,R.preventCancel,R.signal);return _(A),v.readable}pipeTo(i,d={}){if(!kr(this))return m(Jr("pipeTo"));if(i===void 0)return m("Parameter 1 is required in 'pipeTo'.");if(!Oa(i))return m(new TypeError("ReadableStream.prototype.pipeTo's first argument must be a WritableStream"));let v;try{v=vl(d,"Second parameter")}catch(R){return m(R)}return Dr(this)?m(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):ka(i)?m(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):pl(this,i,v.preventClose,v.preventAbort,v.preventCancel,v.signal)}tee(){if(!kr(this))throw Jr("tee");let i=mh(this);return at(i)}values(i=void 0){if(!kr(this))throw Jr("values");let d=Th(i,"First parameter");return Os(this,d.preventCancel)}[Yt](i){return this.values(i)}static from(i){return bh(i)}}Object.defineProperties(ot,{from:{enumerable:!0}}),Object.defineProperties(ot.prototype,{cancel:{enumerable:!0},getReader:{enumerable:!0},pipeThrough:{enumerable:!0},pipeTo:{enumerable:!0},tee:{enumerable:!0},values:{enumerable:!0},locked:{enumerable:!0}}),t(ot.from,"from"),t(ot.prototype.cancel,"cancel"),t(ot.prototype.getReader,"getReader"),t(ot.prototype.pipeThrough,"pipeThrough"),t(ot.prototype.pipeTo,"pipeTo"),t(ot.prototype.tee,"tee"),t(ot.prototype.values,"values"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(ot.prototype,Symbol.toStringTag,{value:"ReadableStream",configurable:!0}),Object.defineProperty(ot.prototype,Yt,{value:ot.prototype.values,writable:!0,configurable:!0});function hs(n,i,d,v=1,R=()=>1){let A=Object.create(ot.prototype);jo(A);let I=Object.create(pr.prototype);return gl(A,I,n,i,d,v,R),A}o(hs,"CreateReadableStream");function yl(n,i,d){let v=Object.create(ot.prototype);jo(v);let R=Object.create(U.prototype);return js(v,R,n,i,d,0,void 0),v}o(yl,"CreateReadableByteStream");function jo(n){n._state="readable",n._reader=void 0,n._storedError=void 0,n._disturbed=!1}o(jo,"InitializeReadableStream");function kr(n){return!r(n)||!Object.prototype.hasOwnProperty.call(n,"_readableStreamController")?!1:n instanceof ot}o(kr,"IsReadableStream");function Dr(n){return n._reader!==void 0}o(Dr,"IsReadableStreamLocked");function Bt(n,i){if(n._disturbed=!0,n._state==="closed")return p(void 0);if(n._state==="errored")return m(n._storedError);ps(n);let d=n._reader;if(d!==void 0&&Cr(d)){let R=d._readIntoRequests;d._readIntoRequests=new F,R.forEach(A=>{A._closeSteps(void 0)})}let v=n._readableStreamController[Q](i);return E(v,e)}o(Bt,"ReadableStreamCancel");function ps(n){n._state="closed";let i=n._reader;if(i!==void 0&&(ee(i),qe(i))){let d=i._readRequests;i._readRequests=new F,d.forEach(v=>{v._closeSteps()})}}o(ps,"ReadableStreamClose");function bl(n,i){n._state="errored",n._storedError=i;let d=n._reader;d!==void 0&&(pe(d,i),qe(d)?rt(d,i):ls(d,i))}o(bl,"ReadableStreamError");function Jr(n){return new TypeError(`ReadableStream.prototype.${n} can only be used on a ReadableStream`)}o(Jr,"streamBrandCheckException$1");function _l(n,i){ie(n,i);let d=n?.highWaterMark;return St(d,"highWaterMark","QueuingStrategyInit"),{highWaterMark:je(d)}}o(_l,"convertQueuingStrategyInit");let Sl=o(n=>n.byteLength,"byteLengthSizeFunction");t(Sl,"size");class Js{static{o(this,"ByteLengthQueuingStrategy")}constructor(i){Ke(i,1,"ByteLengthQueuingStrategy"),i=_l(i,"First parameter"),this._byteLengthQueuingStrategyHighWaterMark=i.highWaterMark}get highWaterMark(){if(!Pl(this))throw wl("highWaterMark");return this._byteLengthQueuingStrategyHighWaterMark}get size(){if(!Pl(this))throw wl("size");return Sl}}Object.defineProperties(Js.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(Js.prototype,Symbol.toStringTag,{value:"ByteLengthQueuingStrategy",configurable:!0});function wl(n){return new TypeError(`ByteLengthQueuingStrategy.prototype.${n} can only be used on a ByteLengthQueuingStrategy`)}o(wl,"byteLengthBrandCheckException");function Pl(n){return!r(n)||!Object.prototype.hasOwnProperty.call(n,"_byteLengthQueuingStrategyHighWaterMark")?!1:n instanceof Js}o(Pl,"IsByteLengthQueuingStrategy");let El=o(()=>1,"countSizeFunction");t(El,"size");class Xs{static{o(this,"CountQueuingStrategy")}constructor(i){Ke(i,1,"CountQueuingStrategy"),i=_l(i,"First parameter"),this._countQueuingStrategyHighWaterMark=i.highWaterMark}get highWaterMark(){if(!xl(this))throw Rl("highWaterMark");return this._countQueuingStrategyHighWaterMark}get size(){if(!xl(this))throw Rl("size");return El}}Object.defineProperties(Xs.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(Xs.prototype,Symbol.toStringTag,{value:"CountQueuingStrategy",configurable:!0});function Rl(n){return new TypeError(`CountQueuingStrategy.prototype.${n} can only be used on a CountQueuingStrategy`)}o(Rl,"countBrandCheckException");function xl(n){return!r(n)||!Object.prototype.hasOwnProperty.call(n,"_countQueuingStrategyHighWaterMark")?!1:n instanceof Xs}o(xl,"IsCountQueuingStrategy");function Oh(n,i){ie(n,i);let d=n?.cancel,v=n?.flush,R=n?.readableType,A=n?.start,I=n?.transform,H=n?.writableType;return{cancel:d===void 0?void 0:Fh(d,n,`${i} has member 'cancel' that`),flush:v===void 0?void 0:kh(v,n,`${i} has member 'flush' that`),readableType:R,start:A===void 0?void 0:Dh(A,n,`${i} has member 'start' that`),transform:I===void 0?void 0:Ih(I,n,`${i} has member 'transform' that`),writableType:H}}o(Oh,"convertTransformer");function kh(n,i,d){return Pe(n,d),v=>k(n,i,[v])}o(kh,"convertTransformerFlushCallback");function Dh(n,i,d){return Pe(n,d),v=>$(n,i,[v])}o(Dh,"convertTransformerStartCallback");function Ih(n,i,d){return Pe(n,d),(v,R)=>k(n,i,[v,R])}o(Ih,"convertTransformerTransformCallback");function Fh(n,i,d){return Pe(n,d),v=>k(n,i,[v])}o(Fh,"convertTransformerCancelCallback");class en{static{o(this,"TransformStream")}constructor(i={},d={},v={}){i===void 0&&(i=null);let R=us(d,"Second parameter"),A=us(v,"Third parameter"),I=Oh(i,"First parameter");if(I.readableType!==void 0)throw new RangeError("Invalid readableType specified");if(I.writableType!==void 0)throw new RangeError("Invalid writableType specified");let H=Qr(A,0),oe=Ca(A),X=Qr(R,1),le=Ca(R),he,Ae=h(Ht=>{he=Ht});$h(this,Ae,X,le,H,oe),Nh(this,I),I.start!==void 0?he(I.start(this._transformStreamController)):he(void 0)}get readable(){if(!Tl(this))throw kl("readable");return this._readable}get writable(){if(!Tl(this))throw kl("writable");return this._writable}}Object.defineProperties(en.prototype,{readable:{enumerable:!0},writable:{enumerable:!0}}),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(en.prototype,Symbol.toStringTag,{value:"TransformStream",configurable:!0});function $h(n,i,d,v,R,A){function I(){return i}o(I,"startAlgorithm");function H(Ae){return qh(n,Ae)}o(H,"writeAlgorithm");function oe(Ae){return zh(n,Ae)}o(oe,"abortAlgorithm");function X(){return Uh(n)}o(X,"closeAlgorithm"),n._writable=Mf(I,H,X,oe,d,v);function le(){return Bh(n)}o(le,"pullAlgorithm");function he(Ae){return Hh(n,Ae)}o(he,"cancelAlgorithm"),n._readable=hs(I,le,he,R,A),n._backpressure=void 0,n._backpressureChangePromise=void 0,n._backpressureChangePromise_resolve=void 0,tn(n,!0),n._transformStreamController=void 0}o($h,"InitializeTransformStream");function Tl(n){return!r(n)||!Object.prototype.hasOwnProperty.call(n,"_transformStreamController")?!1:n instanceof en}o(Tl,"IsTransformStream");function Al(n,i){Ut(n._readable._readableStreamController,i),Mo(n,i)}o(Al,"TransformStreamError");function Mo(n,i){an(n._transformStreamController),cs(n._writable._writableStreamController,i),qo(n)}o(Mo,"TransformStreamErrorWritableAndUnblockWrite");function qo(n){n._backpressure&&tn(n,!1)}o(qo,"TransformStreamUnblockWrite");function tn(n,i){n._backpressureChangePromise!==void 0&&n._backpressureChangePromise_resolve(),n._backpressureChangePromise=h(d=>{n._backpressureChangePromise_resolve=d}),n._backpressure=i}o(tn,"TransformStreamSetBackpressure");class Ir{static{o(this,"TransformStreamDefaultController")}constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!rn(this))throw sn("desiredSize");let i=this._controlledTransformStream._readable._readableStreamController;return No(i)}enqueue(i=void 0){if(!rn(this))throw sn("enqueue");Cl(this,i)}error(i=void 0){if(!rn(this))throw sn("error");jh(this,i)}terminate(){if(!rn(this))throw sn("terminate");Mh(this)}}Object.defineProperties(Ir.prototype,{enqueue:{enumerable:!0},error:{enumerable:!0},terminate:{enumerable:!0},desiredSize:{enumerable:!0}}),t(Ir.prototype.enqueue,"enqueue"),t(Ir.prototype.error,"error"),t(Ir.prototype.terminate,"terminate"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(Ir.prototype,Symbol.toStringTag,{value:"TransformStreamDefaultController",configurable:!0});function rn(n){return!r(n)||!Object.prototype.hasOwnProperty.call(n,"_controlledTransformStream")?!1:n instanceof Ir}o(rn,"IsTransformStreamDefaultController");function Lh(n,i,d,v,R){i._controlledTransformStream=n,n._transformStreamController=i,i._transformAlgorithm=d,i._flushAlgorithm=v,i._cancelAlgorithm=R,i._finishPromise=void 0,i._finishPromise_resolve=void 0,i._finishPromise_reject=void 0}o(Lh,"SetUpTransformStreamDefaultController");function Nh(n,i){let d=Object.create(Ir.prototype),v,R,A;i.transform!==void 0?v=o(I=>i.transform(I,d),"transformAlgorithm"):v=o(I=>{try{return Cl(d,I),p(void 0)}catch(H){return m(H)}},"transformAlgorithm"),i.flush!==void 0?R=o(()=>i.flush(d),"flushAlgorithm"):R=o(()=>p(void 0),"flushAlgorithm"),i.cancel!==void 0?A=o(I=>i.cancel(I),"cancelAlgorithm"):A=o(()=>p(void 0),"cancelAlgorithm"),Lh(n,d,v,R,A)}o(Nh,"SetUpTransformStreamDefaultControllerFromTransformer");function an(n){n._transformAlgorithm=void 0,n._flushAlgorithm=void 0,n._cancelAlgorithm=void 0}o(an,"TransformStreamDefaultControllerClearAlgorithms");function Cl(n,i){let d=n._controlledTransformStream,v=d._readable._readableStreamController;if(!Fa(v))throw new TypeError("Readable side is not in a state that permits enqueue");try{Ia(v,i)}catch(A){throw Mo(d,A),d._readable._storedError}hh(v)!==d._backpressure&&tn(d,!0)}o(Cl,"TransformStreamDefaultControllerEnqueue");function jh(n,i){Al(n._controlledTransformStream,i)}o(jh,"TransformStreamDefaultControllerError");function Ol(n,i){let d=n._transformAlgorithm(i);return E(d,void 0,v=>{throw Al(n._controlledTransformStream,v),v})}o(Ol,"TransformStreamDefaultControllerPerformTransform");function Mh(n){let i=n._controlledTransformStream,d=i._readable._readableStreamController;Kr(d);let v=new TypeError("TransformStream terminated");Mo(i,v)}o(Mh,"TransformStreamDefaultControllerTerminate");function qh(n,i){let d=n._transformStreamController;if(n._backpressure){let v=n._backpressureChangePromise;return E(v,()=>{let R=n._writable;if(R._state==="erroring")throw R._storedError;return Ol(d,i)})}return Ol(d,i)}o(qh,"TransformStreamDefaultSinkWriteAlgorithm");function zh(n,i){let d=n._transformStreamController;if(d._finishPromise!==void 0)return d._finishPromise;let v=n._readable;d._finishPromise=h((A,I)=>{d._finishPromise_resolve=A,d._finishPromise_reject=I});let R=d._cancelAlgorithm(i);return an(d),P(R,()=>(v._state==="errored"?$a(d,v._storedError):(Ut(v._readableStreamController,i),zo(d)),null),A=>(Ut(v._readableStreamController,A),$a(d,A),null)),d._finishPromise}o(zh,"TransformStreamDefaultSinkAbortAlgorithm");function Uh(n){let i=n._transformStreamController;if(i._finishPromise!==void 0)return i._finishPromise;let d=n._readable;i._finishPromise=h((R,A)=>{i._finishPromise_resolve=R,i._finishPromise_reject=A});let v=i._flushAlgorithm();return an(i),P(v,()=>(d._state==="errored"?$a(i,d._storedError):(Kr(d._readableStreamController),zo(i)),null),R=>(Ut(d._readableStreamController,R),$a(i,R),null)),i._finishPromise}o(Uh,"TransformStreamDefaultSinkCloseAlgorithm");function Bh(n){return tn(n,!1),n._backpressureChangePromise}o(Bh,"TransformStreamDefaultSourcePullAlgorithm");function Hh(n,i){let d=n._transformStreamController;if(d._finishPromise!==void 0)return d._finishPromise;let v=n._writable;d._finishPromise=h((A,I)=>{d._finishPromise_resolve=A,d._finishPromise_reject=I});let R=d._cancelAlgorithm(i);return an(d),P(R,()=>(v._state==="errored"?$a(d,v._storedError):(cs(v._writableStreamController,i),qo(n),zo(d)),null),A=>(cs(v._writableStreamController,A),qo(n),$a(d,A),null)),d._finishPromise}o(Hh,"TransformStreamDefaultSourceCancelAlgorithm");function sn(n){return new TypeError(`TransformStreamDefaultController.prototype.${n} can only be used on a TransformStreamDefaultController`)}o(sn,"defaultControllerBrandCheckException");function zo(n){n._finishPromise_resolve!==void 0&&(n._finishPromise_resolve(),n._finishPromise_resolve=void 0,n._finishPromise_reject=void 0)}o(zo,"defaultControllerFinishPromiseResolve");function $a(n,i){n._finishPromise_reject!==void 0&&(_(n._finishPromise),n._finishPromise_reject(i),n._finishPromise_resolve=void 0,n._finishPromise_reject=void 0)}o($a,"defaultControllerFinishPromiseReject");function kl(n){return new TypeError(`TransformStream.prototype.${n} can only be used on a TransformStream`)}o(kl,"streamBrandCheckException"),a.ByteLengthQueuingStrategy=Js,a.CountQueuingStrategy=Xs,a.ReadableByteStreamController=U,a.ReadableStream=ot,a.ReadableStreamBYOBReader=ct,a.ReadableStreamBYOBRequest=O,a.ReadableStreamDefaultController=pr,a.ReadableStreamDefaultReader=Be,a.TransformStream=en,a.TransformStreamDefaultController=Ir,a.WritableStream=Or,a.WritableStreamDefaultController=Da,a.WritableStreamDefaultWriter=hr}))});var tf=se(()=>{if(!globalThis.ReadableStream)try{let a=ln("node:process"),{emitWarning:e}=a;try{a.emitWarning=()=>{},Object.assign(globalThis,ln("node:stream/web")),a.emitWarning=e}catch(r){throw a.emitWarning=e,r}}catch{Object.assign(globalThis,ef())}try{let{Blob:a}=ln("buffer");a&&!a.prototype.stream&&(a.prototype.stream=o(function(r){let s=0,t=this;return new ReadableStream({type:"bytes",async pull(l){let c=await t.slice(s,Math.min(t.size,s+65536)).arrayBuffer();s+=c.byteLength,l.enqueue(new Uint8Array(c)),s===t.size&&l.close()}})},"name"))}catch{}});async function*$i(a,e=!0){for(let r of a)if("stream"in r)yield*r.stream();else if(ArrayBuffer.isView(r))if(e){let s=r.byteOffset,t=r.byteOffset+r.byteLength;for(;s!==t;){let l=Math.min(t-s,rf),u=r.buffer.slice(s,s+l);s+=u.byteLength,yield new Uint8Array(u)}}else yield r;else{let s=0,t=r;for(;s!==t.size;){let u=await t.slice(s,Math.min(t.size,s+rf)).arrayBuffer();s+=u.byteLength,yield new Uint8Array(u)}}}var yE,rf,af,Kv,Sr,Rs=ms(()=>{yE=Bo(tf(),1);rf=65536;o($i,"toIterator");af=class Li{static{o(this,"Blob")}#e=[];#t="";#r=0;#a="transparent";constructor(e=[],r={}){if(typeof e!="object"||e===null)throw new TypeError("Failed to construct 'Blob': The provided value cannot be converted to a sequence.");if(typeof e[Symbol.iterator]!="function")throw new TypeError("Failed to construct 'Blob': The object must have a callable @@iterator property.");if(typeof r!="object"&&typeof r!="function")throw new TypeError("Failed to construct 'Blob': parameter 2 cannot convert to dictionary.");r===null&&(r={});let s=new TextEncoder;for(let l of e){let u;ArrayBuffer.isView(l)?u=new Uint8Array(l.buffer.slice(l.byteOffset,l.byteOffset+l.byteLength)):l instanceof ArrayBuffer?u=new Uint8Array(l.slice(0)):l instanceof Li?u=l:u=s.encode(`${l}`),this.#r+=ArrayBuffer.isView(u)?u.byteLength:u.size,this.#e.push(u)}this.#a=`${r.endings===void 0?"transparent":r.endings}`;let t=r.type===void 0?"":String(r.type);this.#t=/^[\x20-\x7E]*$/.test(t)?t:""}get size(){return this.#r}get type(){return this.#t}async text(){let e=new TextDecoder,r="";for await(let s of $i(this.#e,!1))r+=e.decode(s,{stream:!0});return r+=e.decode(),r}async arrayBuffer(){let e=new Uint8Array(this.size),r=0;for await(let s of $i(this.#e,!1))e.set(s,r),r+=s.length;return e.buffer}stream(){let e=$i(this.#e,!0);return new globalThis.ReadableStream({type:"bytes",async pull(r){let s=await e.next();s.done?r.close():r.enqueue(s.value)},async cancel(){await e.return()}})}slice(e=0,r=this.size,s=""){let{size:t}=this,l=e<0?Math.max(t+e,0):Math.min(e,t),u=r<0?Math.max(t+r,0):Math.min(r,t),c=Math.max(u-l,0),h=this.#e,p=[],m=0;for(let P of h){if(m>=c)break;let g=ArrayBuffer.isView(P)?P.byteLength:P.size;if(l&&g<=l)l-=g,u-=g;else{let b;ArrayBuffer.isView(P)?(b=P.subarray(l,Math.min(g,u)),m+=b.byteLength):(b=P.slice(l,Math.min(g,u)),m+=b.size),u-=g,p.push(b),l=0}}let S=new Li([],{type:String(s).toLowerCase()});return S.#r=c,S.#e=p,S}get[Symbol.toStringTag](){return"Blob"}static[Symbol.hasInstance](e){return e&&typeof e=="object"&&typeof e.constructor=="function"&&(typeof e.stream=="function"||typeof e.arrayBuffer=="function")&&/^(Blob|File)$/.test(e[Symbol.toStringTag])}};Object.defineProperties(af.prototype,{size:{enumerable:!0},type:{enumerable:!0},slice:{enumerable:!0}});Kv=af,Sr=Kv});var Jv,Xv,Ya,Ni=ms(()=>{Rs();Jv=class extends Sr{static{o(this,"File")}#e=0;#t="";constructor(e,r,s={}){if(arguments.length<2)throw new TypeError(`Failed to construct 'File': 2 arguments required, but only ${arguments.length} present.`);super(e,s),s===null&&(s={});let t=s.lastModified===void 0?Date.now():Number(s.lastModified);Number.isNaN(t)||(this.#e=t),this.#t=String(r)}get name(){return this.#t}get lastModified(){return this.#e}get[Symbol.toStringTag](){return"File"}static[Symbol.hasInstance](e){return!!e&&e instanceof Sr&&/^(File)$/.test(e[Symbol.toStringTag])}},Xv=Jv,Ya=Xv});function of(a,e=Sr){var r=`${sf()}${sf()}`.replace(/\./g,"").slice(-28).padStart(32,"-"),s=[],t=`--${r}\r
Content-Disposition: form-data; name="`;return a.forEach((l,u)=>typeof l=="string"?s.push(t+ji(u)+`"\r
\r
${l.replace(/\r(?!\n)|(?<!\r)\n/g,`\r
`)}\r
`):s.push(t+ji(u)+`"; filename="${ji(l.name,1)}"\r
Content-Type: ${l.type||"application/octet-stream"}\r
\r
`,l,`\r
`)),s.push(`--${r}--`),new e(s,{type:"multipart/form-data; boundary="+r})}var xs,ey,ty,sf,ry,nf,ji,va,ya,uo=ms(()=>{Rs();Ni();({toStringTag:xs,iterator:ey,hasInstance:ty}=Symbol),sf=Math.random,ry="append,set,get,getAll,delete,keys,values,entries,forEach,constructor".split(","),nf=o((a,e,r)=>(a+="",/^(Blob|File)$/.test(e&&e[xs])?[(r=r!==void 0?r+"":e[xs]=="File"?e.name:"blob",a),e.name!==r||e[xs]=="blob"?new Ya([e],r,e):e]:[a,e+""]),"f"),ji=o((a,e)=>(e?a:a.replace(/\r?\n|\r/g,`\r
`)).replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22"),"e"),va=o((a,e,r)=>{if(e.length<r)throw new TypeError(`Failed to execute '${a}' on 'FormData': ${r} arguments required, but only ${e.length} present.`)},"x"),ya=class{static{o(this,"FormData")}#e=[];constructor(...e){if(e.length)throw new TypeError("Failed to construct 'FormData': parameter 1 is not of type 'HTMLFormElement'.")}get[xs](){return"FormData"}[ey](){return this.entries()}static[ty](e){return e&&typeof e=="object"&&e[xs]==="FormData"&&!ry.some(r=>typeof e[r]!="function")}append(...e){va("append",arguments,2),this.#e.push(nf(...e))}delete(e){va("delete",arguments,1),e+="",this.#e=this.#e.filter(([r])=>r!==e)}get(e){va("get",arguments,1),e+="";for(var r=this.#e,s=r.length,t=0;t<s;t++)if(r[t][0]===e)return r[t][1];return null}getAll(e,r){return va("getAll",arguments,1),r=[],e+="",this.#e.forEach(s=>s[0]===e&&r.push(s[1])),r}has(e){return va("has",arguments,1),e+="",this.#e.some(r=>r[0]===e)}forEach(e,r){va("forEach",arguments,1);for(var[s,t]of this)e.call(r,t,s,this)}set(...e){va("set",arguments,2);var r=[],s=!0;e=nf(...e),this.#e.forEach(t=>{t[0]===e[0]?s&&(s=!r.push(e)):r.push(t)}),s&&r.push(e),this.#e=r}*entries(){yield*this.#e}*keys(){for(var[e]of this)yield e}*values(){for(var[,e]of this)yield e}};o(of,"formDataToBlob")});var ff=se((NE,df)=>{if(!globalThis.DOMException)try{let{MessageChannel:a}=ln("worker_threads"),e=new a().port1,r=new ArrayBuffer;e.postMessage(r,[r,r])}catch(a){a.constructor.name==="DOMException"&&(globalThis.DOMException=a.constructor)}df.exports=globalThis.DOMException});import{statSync as ME,createReadStream as qE,promises as ay}from"node:fs";var sy,BE,qi=ms(()=>{sy=Bo(ff(),1);Ni();Rs();({stat:BE}=ay)});var pf={};Il(pf,{toFormData:()=>dy});function cy(a){let e=a.match(/\bfilename=("(.*?)"|([^()<>@,;:\\"/[\]?={}\s\t]+))($|;\s)/i);if(!e)return;let r=e[2]||e[3]||"",s=r.slice(r.lastIndexOf("\\")+1);return s=s.replace(/%22/g,'"'),s=s.replace(/&#(\d{4});/g,(t,l)=>String.fromCharCode(l)),s}async function dy(a,e){if(!/multipart/i.test(e))throw new TypeError("Failed to fetch");let r=e.match(/boundary=(?:"([^"]+)"|([^;]+))/i);if(!r)throw new TypeError("no or bad content-type header, no multipart boundary");let s=new zi(r[1]||r[2]),t,l,u,c,h,p,m=[],S=new ya,P=o(T=>{u+=_.decode(T,{stream:!0})},"onPartData"),g=o(T=>{m.push(T)},"appendToFile"),b=o(()=>{let T=new Ya(m,p,{type:h});S.append(c,T)},"appendFileToFormData"),E=o(()=>{S.append(c,u)},"appendEntryToFormData"),_=new TextDecoder("utf-8");_.decode(),s.onPartBegin=function(){s.onPartData=P,s.onPartEnd=E,t="",l="",u="",c="",h="",p=null,m.length=0},s.onHeaderField=function(T){t+=_.decode(T,{stream:!0})},s.onHeaderValue=function(T){l+=_.decode(T,{stream:!0})},s.onHeaderEnd=function(){if(l+=_.decode(),t=t.toLowerCase(),t==="content-disposition"){let T=l.match(/\bname=("([^"]*)"|([^()<>@,;:\\"/[\]?={}\s\t]+))/i);T&&(c=T[2]||T[3]||""),p=cy(l),p&&(s.onPartData=g,s.onPartEnd=b)}else t==="content-type"&&(h=l);l="",t=""};for await(let T of a)s.write(T);return s.end(),S}var or,Fe,hf,Ur,fo,ho,ny,As,oy,iy,ly,uy,ba,zi,mf=ms(()=>{qi();uo();or=0,Fe={START_BOUNDARY:or++,HEADER_FIELD_START:or++,HEADER_FIELD:or++,HEADER_VALUE_START:or++,HEADER_VALUE:or++,HEADER_VALUE_ALMOST_DONE:or++,HEADERS_ALMOST_DONE:or++,PART_DATA_START:or++,PART_DATA:or++,END:or++},hf=1,Ur={PART_BOUNDARY:hf,LAST_BOUNDARY:hf*=2},fo=10,ho=13,ny=32,As=45,oy=58,iy=97,ly=122,uy=o(a=>a|32,"lower"),ba=o(()=>{},"noop"),zi=class{static{o(this,"MultipartParser")}constructor(e){this.index=0,this.flags=0,this.onHeaderEnd=ba,this.onHeaderField=ba,this.onHeadersEnd=ba,this.onHeaderValue=ba,this.onPartBegin=ba,this.onPartData=ba,this.onPartEnd=ba,this.boundaryChars={},e=`\r
--`+e;let r=new Uint8Array(e.length);for(let s=0;s<e.length;s++)r[s]=e.charCodeAt(s),this.boundaryChars[r[s]]=!0;this.boundary=r,this.lookbehind=new Uint8Array(this.boundary.length+8),this.state=Fe.START_BOUNDARY}write(e){let r=0,s=e.length,t=this.index,{lookbehind:l,boundary:u,boundaryChars:c,index:h,state:p,flags:m}=this,S=this.boundary.length,P=S-1,g=e.length,b,E,_=o(D=>{this[D+"Mark"]=r},"mark"),T=o(D=>{delete this[D+"Mark"]},"clear"),$=o((D,F,L,K)=>{(F===void 0||F!==L)&&this[D](K&&K.subarray(F,L))},"callback"),k=o((D,F)=>{let L=D+"Mark";L in this&&(F?($(D,this[L],r,e),delete this[L]):($(D,this[L],e.length,e),this[L]=0))},"dataCallback");for(r=0;r<s;r++)switch(b=e[r],p){case Fe.START_BOUNDARY:if(h===u.length-2){if(b===As)m|=Ur.LAST_BOUNDARY;else if(b!==ho)return;h++;break}else if(h-1===u.length-2){if(m&Ur.LAST_BOUNDARY&&b===As)p=Fe.END,m=0;else if(!(m&Ur.LAST_BOUNDARY)&&b===fo)h=0,$("onPartBegin"),p=Fe.HEADER_FIELD_START;else return;break}b!==u[h+2]&&(h=-2),b===u[h+2]&&h++;break;case Fe.HEADER_FIELD_START:p=Fe.HEADER_FIELD,_("onHeaderField"),h=0;case Fe.HEADER_FIELD:if(b===ho){T("onHeaderField"),p=Fe.HEADERS_ALMOST_DONE;break}if(h++,b===As)break;if(b===oy){if(h===1)return;k("onHeaderField",!0),p=Fe.HEADER_VALUE_START;break}if(E=uy(b),E<iy||E>ly)return;break;case Fe.HEADER_VALUE_START:if(b===ny)break;_("onHeaderValue"),p=Fe.HEADER_VALUE;case Fe.HEADER_VALUE:b===ho&&(k("onHeaderValue",!0),$("onHeaderEnd"),p=Fe.HEADER_VALUE_ALMOST_DONE);break;case Fe.HEADER_VALUE_ALMOST_DONE:if(b!==fo)return;p=Fe.HEADER_FIELD_START;break;case Fe.HEADERS_ALMOST_DONE:if(b!==fo)return;$("onHeadersEnd"),p=Fe.PART_DATA_START;break;case Fe.PART_DATA_START:p=Fe.PART_DATA,_("onPartData");case Fe.PART_DATA:if(t=h,h===0){for(r+=P;r<g&&!(e[r]in c);)r+=S;r-=P,b=e[r]}if(h<u.length)u[h]===b?(h===0&&k("onPartData",!0),h++):h=0;else if(h===u.length)h++,b===ho?m|=Ur.PART_BOUNDARY:b===As?m|=Ur.LAST_BOUNDARY:h=0;else if(h-1===u.length)if(m&Ur.PART_BOUNDARY){if(h=0,b===fo){m&=~Ur.PART_BOUNDARY,$("onPartEnd"),$("onPartBegin"),p=Fe.HEADER_FIELD_START;break}}else m&Ur.LAST_BOUNDARY&&b===As?($("onPartEnd"),p=Fe.END,m=0):h=0;if(h>0)l[h-1]=b;else if(t>0){let D=new Uint8Array(l.buffer,l.byteOffset,l.byteLength);$("onPartData",0,t,D),t=0,_("onPartData"),r--}break;case Fe.END:break;default:throw new Error(`Unexpected state entered: ${p}`)}k("onHeaderField"),k("onHeaderValue"),k("onPartData"),this.index=h,this.state=p,this.flags=m}end(){if(this.state===Fe.HEADER_FIELD_START&&this.index===0||this.state===Fe.PART_DATA&&this.index===this.boundary.length)this.onPartEnd();else if(this.state!==Fe.END)throw new Error("MultipartParser.end(): stream ended unexpectedly")}};o(cy,"_fileName");o(dy,"toFormData")});var f={};Il(f,{BRAND:()=>wp,DIRTY:()=>Xr,EMPTY_PATH:()=>ep,INVALID:()=>re,NEVER:()=>om,OK:()=>it,ParseStatus:()=>tt,Schema:()=>ce,ZodAny:()=>Nr,ZodArray:()=>_r,ZodBigInt:()=>ta,ZodBoolean:()=>ra,ZodBranded:()=>vs,ZodCatch:()=>ha,ZodDate:()=>aa,ZodDefault:()=>fa,ZodDiscriminatedUnion:()=>dn,ZodEffects:()=>Ft,ZodEnum:()=>ca,ZodError:()=>gt,ZodFirstPartyTypeKind:()=>M,ZodFunction:()=>hn,ZodIntersection:()=>ia,ZodIssueCode:()=>j,ZodLazy:()=>la,ZodLiteral:()=>ua,ZodMap:()=>Wa,ZodNaN:()=>Za,ZodNativeEnum:()=>da,ZodNever:()=>Wt,ZodNull:()=>na,ZodNullable:()=>sr,ZodNumber:()=>ea,ZodObject:()=>vt,ZodOptional:()=>Dt,ZodParsedType:()=>W,ZodPipeline:()=>ys,ZodPromise:()=>jr,ZodReadonly:()=>pa,ZodRecord:()=>fn,ZodSchema:()=>ce,ZodSet:()=>Va,ZodString:()=>Lr,ZodSymbol:()=>Ba,ZodTransformer:()=>Ft,ZodTuple:()=>ar,ZodType:()=>ce,ZodUndefined:()=>sa,ZodUnion:()=>oa,ZodUnknown:()=>br,ZodVoid:()=>Ha,addIssueToContext:()=>B,any:()=>kp,array:()=>$p,bigint:()=>xp,boolean:()=>Hl,coerce:()=>nm,custom:()=>zl,date:()=>Tp,datetimeRegex:()=>Ml,defaultErrorMap:()=>vr,discriminatedUnion:()=>Mp,effect:()=>Kp,enum:()=>Qp,function:()=>Wp,getErrorMap:()=>qa,getParsedType:()=>rr,instanceof:()=>Ep,intersection:()=>qp,isAborted:()=>un,isAsync:()=>za,isDirty:()=>cn,isValid:()=>$r,late:()=>Pp,lazy:()=>Vp,literal:()=>Zp,makeIssue:()=>gs,map:()=>Bp,nan:()=>Rp,nativeEnum:()=>Gp,never:()=>Ip,null:()=>Op,nullable:()=>Xp,number:()=>Bl,object:()=>Lp,objectUtil:()=>Ho,oboolean:()=>sm,onumber:()=>am,optional:()=>Jp,ostring:()=>rm,pipeline:()=>tm,preprocess:()=>em,promise:()=>Yp,quotelessJson:()=>Kh,record:()=>Up,set:()=>Hp,setErrorMap:()=>Xh,strictObject:()=>Np,string:()=>Ul,symbol:()=>Ap,transformer:()=>Kp,tuple:()=>zp,undefined:()=>Cp,union:()=>jp,unknown:()=>Dp,util:()=>ye,void:()=>Fp});var ye;(function(a){a.assertEqual=t=>{};function e(t){}o(e,"assertIs"),a.assertIs=e;function r(t){throw new Error}o(r,"assertNever"),a.assertNever=r,a.arrayToEnum=t=>{let l={};for(let u of t)l[u]=u;return l},a.getValidEnumValues=t=>{let l=a.objectKeys(t).filter(c=>typeof t[t[c]]!="number"),u={};for(let c of l)u[c]=t[c];return a.objectValues(u)},a.objectValues=t=>a.objectKeys(t).map(function(l){return t[l]}),a.objectKeys=typeof Object.keys=="function"?t=>Object.keys(t):t=>{let l=[];for(let u in t)Object.prototype.hasOwnProperty.call(t,u)&&l.push(u);return l},a.find=(t,l)=>{for(let u of t)if(l(u))return u},a.isInteger=typeof Number.isInteger=="function"?t=>Number.isInteger(t):t=>typeof t=="number"&&Number.isFinite(t)&&Math.floor(t)===t;function s(t,l=" | "){return t.map(u=>typeof u=="string"?`'${u}'`:u).join(l)}o(s,"joinValues"),a.joinValues=s,a.jsonStringifyReplacer=(t,l)=>typeof l=="bigint"?l.toString():l})(ye||(ye={}));var Ho;(function(a){a.mergeShapes=(e,r)=>({...e,...r})})(Ho||(Ho={}));var W=ye.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),rr=o(a=>{switch(typeof a){case"undefined":return W.undefined;case"string":return W.string;case"number":return Number.isNaN(a)?W.nan:W.number;case"boolean":return W.boolean;case"function":return W.function;case"bigint":return W.bigint;case"symbol":return W.symbol;case"object":return Array.isArray(a)?W.array:a===null?W.null:a.then&&typeof a.then=="function"&&a.catch&&typeof a.catch=="function"?W.promise:typeof Map<"u"&&a instanceof Map?W.map:typeof Set<"u"&&a instanceof Set?W.set:typeof Date<"u"&&a instanceof Date?W.date:W.object;default:return W.unknown}},"getParsedType");var j=ye.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),Kh=o(a=>JSON.stringify(a,null,2).replace(/"([^"]+)":/g,"$1:"),"quotelessJson"),gt=class a extends Error{static{o(this,"ZodError")}get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=s=>{this.issues=[...this.issues,s]},this.addIssues=(s=[])=>{this.issues=[...this.issues,...s]};let r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}format(e){let r=e||function(l){return l.message},s={_errors:[]},t=o(l=>{for(let u of l.issues)if(u.code==="invalid_union")u.unionErrors.map(t);else if(u.code==="invalid_return_type")t(u.returnTypeError);else if(u.code==="invalid_arguments")t(u.argumentsError);else if(u.path.length===0)s._errors.push(r(u));else{let c=s,h=0;for(;h<u.path.length;){let p=u.path[h];h===u.path.length-1?(c[p]=c[p]||{_errors:[]},c[p]._errors.push(r(u))):c[p]=c[p]||{_errors:[]},c=c[p],h++}}},"processError");return t(this),s}static assert(e){if(!(e instanceof a))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,ye.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){let r={},s=[];for(let t of this.issues)if(t.path.length>0){let l=t.path[0];r[l]=r[l]||[],r[l].push(e(t))}else s.push(e(t));return{formErrors:s,fieldErrors:r}}get formErrors(){return this.flatten()}};gt.create=a=>new gt(a);var Jh=o((a,e)=>{let r;switch(a.code){case j.invalid_type:a.received===W.undefined?r="Required":r=`Expected ${a.expected}, received ${a.received}`;break;case j.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(a.expected,ye.jsonStringifyReplacer)}`;break;case j.unrecognized_keys:r=`Unrecognized key(s) in object: ${ye.joinValues(a.keys,", ")}`;break;case j.invalid_union:r="Invalid input";break;case j.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${ye.joinValues(a.options)}`;break;case j.invalid_enum_value:r=`Invalid enum value. Expected ${ye.joinValues(a.options)}, received '${a.received}'`;break;case j.invalid_arguments:r="Invalid function arguments";break;case j.invalid_return_type:r="Invalid function return type";break;case j.invalid_date:r="Invalid date";break;case j.invalid_string:typeof a.validation=="object"?"includes"in a.validation?(r=`Invalid input: must include "${a.validation.includes}"`,typeof a.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${a.validation.position}`)):"startsWith"in a.validation?r=`Invalid input: must start with "${a.validation.startsWith}"`:"endsWith"in a.validation?r=`Invalid input: must end with "${a.validation.endsWith}"`:ye.assertNever(a.validation):a.validation!=="regex"?r=`Invalid ${a.validation}`:r="Invalid";break;case j.too_small:a.type==="array"?r=`Array must contain ${a.exact?"exactly":a.inclusive?"at least":"more than"} ${a.minimum} element(s)`:a.type==="string"?r=`String must contain ${a.exact?"exactly":a.inclusive?"at least":"over"} ${a.minimum} character(s)`:a.type==="number"?r=`Number must be ${a.exact?"exactly equal to ":a.inclusive?"greater than or equal to ":"greater than "}${a.minimum}`:a.type==="bigint"?r=`Number must be ${a.exact?"exactly equal to ":a.inclusive?"greater than or equal to ":"greater than "}${a.minimum}`:a.type==="date"?r=`Date must be ${a.exact?"exactly equal to ":a.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(a.minimum))}`:r="Invalid input";break;case j.too_big:a.type==="array"?r=`Array must contain ${a.exact?"exactly":a.inclusive?"at most":"less than"} ${a.maximum} element(s)`:a.type==="string"?r=`String must contain ${a.exact?"exactly":a.inclusive?"at most":"under"} ${a.maximum} character(s)`:a.type==="number"?r=`Number must be ${a.exact?"exactly":a.inclusive?"less than or equal to":"less than"} ${a.maximum}`:a.type==="bigint"?r=`BigInt must be ${a.exact?"exactly":a.inclusive?"less than or equal to":"less than"} ${a.maximum}`:a.type==="date"?r=`Date must be ${a.exact?"exactly":a.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(a.maximum))}`:r="Invalid input";break;case j.custom:r="Invalid input";break;case j.invalid_intersection_types:r="Intersection results could not be merged";break;case j.not_multiple_of:r=`Number must be a multiple of ${a.multipleOf}`;break;case j.not_finite:r="Number must be finite";break;default:r=e.defaultError,ye.assertNever(a)}return{message:r}},"errorMap"),vr=Jh;var Fl=vr;function Xh(a){Fl=a}o(Xh,"setErrorMap");function qa(){return Fl}o(qa,"getErrorMap");var gs=o(a=>{let{data:e,path:r,errorMaps:s,issueData:t}=a,l=[...r,...t.path||[]],u={...t,path:l};if(t.message!==void 0)return{...t,path:l,message:t.message};let c="",h=s.filter(p=>!!p).slice().reverse();for(let p of h)c=p(u,{data:e,defaultError:c}).message;return{...t,path:l,message:c}},"makeIssue"),ep=[];function B(a,e){let r=qa(),s=gs({issueData:e,data:a.data,path:a.path,errorMaps:[a.common.contextualErrorMap,a.schemaErrorMap,r,r===vr?void 0:vr].filter(t=>!!t)});a.common.issues.push(s)}o(B,"addIssueToContext");var tt=class a{static{o(this,"ParseStatus")}constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){let s=[];for(let t of r){if(t.status==="aborted")return re;t.status==="dirty"&&e.dirty(),s.push(t.value)}return{status:e.value,value:s}}static async mergeObjectAsync(e,r){let s=[];for(let t of r){let l=await t.key,u=await t.value;s.push({key:l,value:u})}return a.mergeObjectSync(e,s)}static mergeObjectSync(e,r){let s={};for(let t of r){let{key:l,value:u}=t;if(l.status==="aborted"||u.status==="aborted")return re;l.status==="dirty"&&e.dirty(),u.status==="dirty"&&e.dirty(),l.value!=="__proto__"&&(typeof u.value<"u"||t.alwaysSet)&&(s[l.value]=u.value)}return{status:e.value,value:s}}},re=Object.freeze({status:"aborted"}),Xr=o(a=>({status:"dirty",value:a}),"DIRTY"),it=o(a=>({status:"valid",value:a}),"OK"),un=o(a=>a.status==="aborted","isAborted"),cn=o(a=>a.status==="dirty","isDirty"),$r=o(a=>a.status==="valid","isValid"),za=o(a=>typeof Promise<"u"&&a instanceof Promise,"isAsync");var J;(function(a){a.errToObj=e=>typeof e=="string"?{message:e}:e||{},a.toString=e=>typeof e=="string"?e:e?.message})(J||(J={}));var It=class{static{o(this,"ParseInputLazyPath")}constructor(e,r,s,t){this._cachedPath=[],this.parent=e,this.data=r,this._path=s,this._key=t}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},$l=o((a,e)=>{if($r(e))return{success:!0,data:e.value};if(!a.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let r=new gt(a.common.issues);return this._error=r,this._error}}},"handleResult");function ue(a){if(!a)return{};let{errorMap:e,invalid_type_error:r,required_error:s,description:t}=a;if(e&&(r||s))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:t}:{errorMap:o((u,c)=>{let{message:h}=a;return u.code==="invalid_enum_value"?{message:h??c.defaultError}:typeof c.data>"u"?{message:h??s??c.defaultError}:u.code!=="invalid_type"?{message:c.defaultError}:{message:h??r??c.defaultError}},"customMap"),description:t}}o(ue,"processCreateParams");var ce=class{static{o(this,"ZodType")}get description(){return this._def.description}_getType(e){return rr(e.data)}_getOrReturnCtx(e,r){return r||{common:e.parent.common,data:e.data,parsedType:rr(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new tt,ctx:{common:e.parent.common,data:e.data,parsedType:rr(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let r=this._parse(e);if(za(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(e){let r=this._parse(e);return Promise.resolve(r)}parse(e,r){let s=this.safeParse(e,r);if(s.success)return s.data;throw s.error}safeParse(e,r){let s={common:{issues:[],async:r?.async??!1,contextualErrorMap:r?.errorMap},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:rr(e)},t=this._parseSync({data:e,path:s.path,parent:s});return $l(s,t)}"~validate"(e){let r={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:rr(e)};if(!this["~standard"].async)try{let s=this._parseSync({data:e,path:[],parent:r});return $r(s)?{value:s.value}:{issues:r.common.issues}}catch(s){s?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),r.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:r}).then(s=>$r(s)?{value:s.value}:{issues:r.common.issues})}async parseAsync(e,r){let s=await this.safeParseAsync(e,r);if(s.success)return s.data;throw s.error}async safeParseAsync(e,r){let s={common:{issues:[],contextualErrorMap:r?.errorMap,async:!0},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:rr(e)},t=this._parse({data:e,path:s.path,parent:s}),l=await(za(t)?t:Promise.resolve(t));return $l(s,l)}refine(e,r){let s=o(t=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(t):r,"getIssueProperties");return this._refinement((t,l)=>{let u=e(t),c=o(()=>l.addIssue({code:j.custom,...s(t)}),"setError");return typeof Promise<"u"&&u instanceof Promise?u.then(h=>h?!0:(c(),!1)):u?!0:(c(),!1)})}refinement(e,r){return this._refinement((s,t)=>e(s)?!0:(t.addIssue(typeof r=="function"?r(s,t):r),!1))}_refinement(e){return new Ft({schema:this,typeName:M.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:o(r=>this["~validate"](r),"validate")}}optional(){return Dt.create(this,this._def)}nullable(){return sr.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return _r.create(this)}promise(){return jr.create(this,this._def)}or(e){return oa.create([this,e],this._def)}and(e){return ia.create(this,e,this._def)}transform(e){return new Ft({...ue(this._def),schema:this,typeName:M.ZodEffects,effect:{type:"transform",transform:e}})}default(e){let r=typeof e=="function"?e:()=>e;return new fa({...ue(this._def),innerType:this,defaultValue:r,typeName:M.ZodDefault})}brand(){return new vs({typeName:M.ZodBranded,type:this,...ue(this._def)})}catch(e){let r=typeof e=="function"?e:()=>e;return new ha({...ue(this._def),innerType:this,catchValue:r,typeName:M.ZodCatch})}describe(e){let r=this.constructor;return new r({...this._def,description:e})}pipe(e){return ys.create(this,e)}readonly(){return pa.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},tp=/^c[^\s-]{8,}$/i,rp=/^[0-9a-z]+$/,ap=/^[0-9A-HJKMNP-TV-Z]{26}$/i,sp=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,np=/^[a-z0-9_-]{21}$/i,op=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,ip=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,lp=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,up="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",Wo,cp=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,dp=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,fp=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,hp=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,pp=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,mp=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,Nl="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",gp=new RegExp(`^${Nl}$`);function jl(a){let e="[0-5]\\d";a.precision?e=`${e}\\.\\d{${a.precision}}`:a.precision==null&&(e=`${e}(\\.\\d+)?`);let r=a.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${r}`}o(jl,"timeRegexSource");function vp(a){return new RegExp(`^${jl(a)}$`)}o(vp,"timeRegex");function Ml(a){let e=`${Nl}T${jl(a)}`,r=[];return r.push(a.local?"Z?":"Z"),a.offset&&r.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${r.join("|")})`,new RegExp(`^${e}$`)}o(Ml,"datetimeRegex");function yp(a,e){return!!((e==="v4"||!e)&&cp.test(a)||(e==="v6"||!e)&&fp.test(a))}o(yp,"isValidIP");function bp(a,e){if(!op.test(a))return!1;try{let[r]=a.split(".");if(!r)return!1;let s=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),t=JSON.parse(atob(s));return!(typeof t!="object"||t===null||"typ"in t&&t?.typ!=="JWT"||!t.alg||e&&t.alg!==e)}catch{return!1}}o(bp,"isValidJWT");function _p(a,e){return!!((e==="v4"||!e)&&dp.test(a)||(e==="v6"||!e)&&hp.test(a))}o(_p,"isValidCidr");var Lr=class a extends ce{static{o(this,"ZodString")}_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==W.string){let l=this._getOrReturnCtx(e);return B(l,{code:j.invalid_type,expected:W.string,received:l.parsedType}),re}let s=new tt,t;for(let l of this._def.checks)if(l.kind==="min")e.data.length<l.value&&(t=this._getOrReturnCtx(e,t),B(t,{code:j.too_small,minimum:l.value,type:"string",inclusive:!0,exact:!1,message:l.message}),s.dirty());else if(l.kind==="max")e.data.length>l.value&&(t=this._getOrReturnCtx(e,t),B(t,{code:j.too_big,maximum:l.value,type:"string",inclusive:!0,exact:!1,message:l.message}),s.dirty());else if(l.kind==="length"){let u=e.data.length>l.value,c=e.data.length<l.value;(u||c)&&(t=this._getOrReturnCtx(e,t),u?B(t,{code:j.too_big,maximum:l.value,type:"string",inclusive:!0,exact:!0,message:l.message}):c&&B(t,{code:j.too_small,minimum:l.value,type:"string",inclusive:!0,exact:!0,message:l.message}),s.dirty())}else if(l.kind==="email")lp.test(e.data)||(t=this._getOrReturnCtx(e,t),B(t,{validation:"email",code:j.invalid_string,message:l.message}),s.dirty());else if(l.kind==="emoji")Wo||(Wo=new RegExp(up,"u")),Wo.test(e.data)||(t=this._getOrReturnCtx(e,t),B(t,{validation:"emoji",code:j.invalid_string,message:l.message}),s.dirty());else if(l.kind==="uuid")sp.test(e.data)||(t=this._getOrReturnCtx(e,t),B(t,{validation:"uuid",code:j.invalid_string,message:l.message}),s.dirty());else if(l.kind==="nanoid")np.test(e.data)||(t=this._getOrReturnCtx(e,t),B(t,{validation:"nanoid",code:j.invalid_string,message:l.message}),s.dirty());else if(l.kind==="cuid")tp.test(e.data)||(t=this._getOrReturnCtx(e,t),B(t,{validation:"cuid",code:j.invalid_string,message:l.message}),s.dirty());else if(l.kind==="cuid2")rp.test(e.data)||(t=this._getOrReturnCtx(e,t),B(t,{validation:"cuid2",code:j.invalid_string,message:l.message}),s.dirty());else if(l.kind==="ulid")ap.test(e.data)||(t=this._getOrReturnCtx(e,t),B(t,{validation:"ulid",code:j.invalid_string,message:l.message}),s.dirty());else if(l.kind==="url")try{new URL(e.data)}catch{t=this._getOrReturnCtx(e,t),B(t,{validation:"url",code:j.invalid_string,message:l.message}),s.dirty()}else l.kind==="regex"?(l.regex.lastIndex=0,l.regex.test(e.data)||(t=this._getOrReturnCtx(e,t),B(t,{validation:"regex",code:j.invalid_string,message:l.message}),s.dirty())):l.kind==="trim"?e.data=e.data.trim():l.kind==="includes"?e.data.includes(l.value,l.position)||(t=this._getOrReturnCtx(e,t),B(t,{code:j.invalid_string,validation:{includes:l.value,position:l.position},message:l.message}),s.dirty()):l.kind==="toLowerCase"?e.data=e.data.toLowerCase():l.kind==="toUpperCase"?e.data=e.data.toUpperCase():l.kind==="startsWith"?e.data.startsWith(l.value)||(t=this._getOrReturnCtx(e,t),B(t,{code:j.invalid_string,validation:{startsWith:l.value},message:l.message}),s.dirty()):l.kind==="endsWith"?e.data.endsWith(l.value)||(t=this._getOrReturnCtx(e,t),B(t,{code:j.invalid_string,validation:{endsWith:l.value},message:l.message}),s.dirty()):l.kind==="datetime"?Ml(l).test(e.data)||(t=this._getOrReturnCtx(e,t),B(t,{code:j.invalid_string,validation:"datetime",message:l.message}),s.dirty()):l.kind==="date"?gp.test(e.data)||(t=this._getOrReturnCtx(e,t),B(t,{code:j.invalid_string,validation:"date",message:l.message}),s.dirty()):l.kind==="time"?vp(l).test(e.data)||(t=this._getOrReturnCtx(e,t),B(t,{code:j.invalid_string,validation:"time",message:l.message}),s.dirty()):l.kind==="duration"?ip.test(e.data)||(t=this._getOrReturnCtx(e,t),B(t,{validation:"duration",code:j.invalid_string,message:l.message}),s.dirty()):l.kind==="ip"?yp(e.data,l.version)||(t=this._getOrReturnCtx(e,t),B(t,{validation:"ip",code:j.invalid_string,message:l.message}),s.dirty()):l.kind==="jwt"?bp(e.data,l.alg)||(t=this._getOrReturnCtx(e,t),B(t,{validation:"jwt",code:j.invalid_string,message:l.message}),s.dirty()):l.kind==="cidr"?_p(e.data,l.version)||(t=this._getOrReturnCtx(e,t),B(t,{validation:"cidr",code:j.invalid_string,message:l.message}),s.dirty()):l.kind==="base64"?pp.test(e.data)||(t=this._getOrReturnCtx(e,t),B(t,{validation:"base64",code:j.invalid_string,message:l.message}),s.dirty()):l.kind==="base64url"?mp.test(e.data)||(t=this._getOrReturnCtx(e,t),B(t,{validation:"base64url",code:j.invalid_string,message:l.message}),s.dirty()):ye.assertNever(l);return{status:s.value,value:e.data}}_regex(e,r,s){return this.refinement(t=>e.test(t),{validation:r,code:j.invalid_string,...J.errToObj(s)})}_addCheck(e){return new a({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...J.errToObj(e)})}url(e){return this._addCheck({kind:"url",...J.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...J.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...J.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...J.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...J.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...J.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...J.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...J.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...J.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...J.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...J.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...J.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:e?.offset??!1,local:e?.local??!1,...J.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...J.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...J.errToObj(e)})}regex(e,r){return this._addCheck({kind:"regex",regex:e,...J.errToObj(r)})}includes(e,r){return this._addCheck({kind:"includes",value:e,position:r?.position,...J.errToObj(r?.message)})}startsWith(e,r){return this._addCheck({kind:"startsWith",value:e,...J.errToObj(r)})}endsWith(e,r){return this._addCheck({kind:"endsWith",value:e,...J.errToObj(r)})}min(e,r){return this._addCheck({kind:"min",value:e,...J.errToObj(r)})}max(e,r){return this._addCheck({kind:"max",value:e,...J.errToObj(r)})}length(e,r){return this._addCheck({kind:"length",value:e,...J.errToObj(r)})}nonempty(e){return this.min(1,J.errToObj(e))}trim(){return new a({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new a({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new a({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};Lr.create=a=>new Lr({checks:[],typeName:M.ZodString,coerce:a?.coerce??!1,...ue(a)});function Sp(a,e){let r=(a.toString().split(".")[1]||"").length,s=(e.toString().split(".")[1]||"").length,t=r>s?r:s,l=Number.parseInt(a.toFixed(t).replace(".","")),u=Number.parseInt(e.toFixed(t).replace(".",""));return l%u/10**t}o(Sp,"floatSafeRemainder");var ea=class a extends ce{static{o(this,"ZodNumber")}constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==W.number){let l=this._getOrReturnCtx(e);return B(l,{code:j.invalid_type,expected:W.number,received:l.parsedType}),re}let s,t=new tt;for(let l of this._def.checks)l.kind==="int"?ye.isInteger(e.data)||(s=this._getOrReturnCtx(e,s),B(s,{code:j.invalid_type,expected:"integer",received:"float",message:l.message}),t.dirty()):l.kind==="min"?(l.inclusive?e.data<l.value:e.data<=l.value)&&(s=this._getOrReturnCtx(e,s),B(s,{code:j.too_small,minimum:l.value,type:"number",inclusive:l.inclusive,exact:!1,message:l.message}),t.dirty()):l.kind==="max"?(l.inclusive?e.data>l.value:e.data>=l.value)&&(s=this._getOrReturnCtx(e,s),B(s,{code:j.too_big,maximum:l.value,type:"number",inclusive:l.inclusive,exact:!1,message:l.message}),t.dirty()):l.kind==="multipleOf"?Sp(e.data,l.value)!==0&&(s=this._getOrReturnCtx(e,s),B(s,{code:j.not_multiple_of,multipleOf:l.value,message:l.message}),t.dirty()):l.kind==="finite"?Number.isFinite(e.data)||(s=this._getOrReturnCtx(e,s),B(s,{code:j.not_finite,message:l.message}),t.dirty()):ye.assertNever(l);return{status:t.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,J.toString(r))}gt(e,r){return this.setLimit("min",e,!1,J.toString(r))}lte(e,r){return this.setLimit("max",e,!0,J.toString(r))}lt(e,r){return this.setLimit("max",e,!1,J.toString(r))}setLimit(e,r,s,t){return new a({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:s,message:J.toString(t)}]})}_addCheck(e){return new a({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:J.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:J.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:J.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:J.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:J.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:J.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:J.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:J.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:J.toString(e)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&ye.isInteger(e.value))}get isFinite(){let e=null,r=null;for(let s of this._def.checks){if(s.kind==="finite"||s.kind==="int"||s.kind==="multipleOf")return!0;s.kind==="min"?(r===null||s.value>r)&&(r=s.value):s.kind==="max"&&(e===null||s.value<e)&&(e=s.value)}return Number.isFinite(r)&&Number.isFinite(e)}};ea.create=a=>new ea({checks:[],typeName:M.ZodNumber,coerce:a?.coerce||!1,...ue(a)});var ta=class a extends ce{static{o(this,"ZodBigInt")}constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==W.bigint)return this._getInvalidInput(e);let s,t=new tt;for(let l of this._def.checks)l.kind==="min"?(l.inclusive?e.data<l.value:e.data<=l.value)&&(s=this._getOrReturnCtx(e,s),B(s,{code:j.too_small,type:"bigint",minimum:l.value,inclusive:l.inclusive,message:l.message}),t.dirty()):l.kind==="max"?(l.inclusive?e.data>l.value:e.data>=l.value)&&(s=this._getOrReturnCtx(e,s),B(s,{code:j.too_big,type:"bigint",maximum:l.value,inclusive:l.inclusive,message:l.message}),t.dirty()):l.kind==="multipleOf"?e.data%l.value!==BigInt(0)&&(s=this._getOrReturnCtx(e,s),B(s,{code:j.not_multiple_of,multipleOf:l.value,message:l.message}),t.dirty()):ye.assertNever(l);return{status:t.value,value:e.data}}_getInvalidInput(e){let r=this._getOrReturnCtx(e);return B(r,{code:j.invalid_type,expected:W.bigint,received:r.parsedType}),re}gte(e,r){return this.setLimit("min",e,!0,J.toString(r))}gt(e,r){return this.setLimit("min",e,!1,J.toString(r))}lte(e,r){return this.setLimit("max",e,!0,J.toString(r))}lt(e,r){return this.setLimit("max",e,!1,J.toString(r))}setLimit(e,r,s,t){return new a({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:s,message:J.toString(t)}]})}_addCheck(e){return new a({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:J.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:J.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:J.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:J.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:J.toString(r)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};ta.create=a=>new ta({checks:[],typeName:M.ZodBigInt,coerce:a?.coerce??!1,...ue(a)});var ra=class extends ce{static{o(this,"ZodBoolean")}_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==W.boolean){let s=this._getOrReturnCtx(e);return B(s,{code:j.invalid_type,expected:W.boolean,received:s.parsedType}),re}return it(e.data)}};ra.create=a=>new ra({typeName:M.ZodBoolean,coerce:a?.coerce||!1,...ue(a)});var aa=class a extends ce{static{o(this,"ZodDate")}_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==W.date){let l=this._getOrReturnCtx(e);return B(l,{code:j.invalid_type,expected:W.date,received:l.parsedType}),re}if(Number.isNaN(e.data.getTime())){let l=this._getOrReturnCtx(e);return B(l,{code:j.invalid_date}),re}let s=new tt,t;for(let l of this._def.checks)l.kind==="min"?e.data.getTime()<l.value&&(t=this._getOrReturnCtx(e,t),B(t,{code:j.too_small,message:l.message,inclusive:!0,exact:!1,minimum:l.value,type:"date"}),s.dirty()):l.kind==="max"?e.data.getTime()>l.value&&(t=this._getOrReturnCtx(e,t),B(t,{code:j.too_big,message:l.message,inclusive:!0,exact:!1,maximum:l.value,type:"date"}),s.dirty()):ye.assertNever(l);return{status:s.value,value:new Date(e.data.getTime())}}_addCheck(e){return new a({...this._def,checks:[...this._def.checks,e]})}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:J.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:J.toString(r)})}get minDate(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}};aa.create=a=>new aa({checks:[],coerce:a?.coerce||!1,typeName:M.ZodDate,...ue(a)});var Ba=class extends ce{static{o(this,"ZodSymbol")}_parse(e){if(this._getType(e)!==W.symbol){let s=this._getOrReturnCtx(e);return B(s,{code:j.invalid_type,expected:W.symbol,received:s.parsedType}),re}return it(e.data)}};Ba.create=a=>new Ba({typeName:M.ZodSymbol,...ue(a)});var sa=class extends ce{static{o(this,"ZodUndefined")}_parse(e){if(this._getType(e)!==W.undefined){let s=this._getOrReturnCtx(e);return B(s,{code:j.invalid_type,expected:W.undefined,received:s.parsedType}),re}return it(e.data)}};sa.create=a=>new sa({typeName:M.ZodUndefined,...ue(a)});var na=class extends ce{static{o(this,"ZodNull")}_parse(e){if(this._getType(e)!==W.null){let s=this._getOrReturnCtx(e);return B(s,{code:j.invalid_type,expected:W.null,received:s.parsedType}),re}return it(e.data)}};na.create=a=>new na({typeName:M.ZodNull,...ue(a)});var Nr=class extends ce{static{o(this,"ZodAny")}constructor(){super(...arguments),this._any=!0}_parse(e){return it(e.data)}};Nr.create=a=>new Nr({typeName:M.ZodAny,...ue(a)});var br=class extends ce{static{o(this,"ZodUnknown")}constructor(){super(...arguments),this._unknown=!0}_parse(e){return it(e.data)}};br.create=a=>new br({typeName:M.ZodUnknown,...ue(a)});var Wt=class extends ce{static{o(this,"ZodNever")}_parse(e){let r=this._getOrReturnCtx(e);return B(r,{code:j.invalid_type,expected:W.never,received:r.parsedType}),re}};Wt.create=a=>new Wt({typeName:M.ZodNever,...ue(a)});var Ha=class extends ce{static{o(this,"ZodVoid")}_parse(e){if(this._getType(e)!==W.undefined){let s=this._getOrReturnCtx(e);return B(s,{code:j.invalid_type,expected:W.void,received:s.parsedType}),re}return it(e.data)}};Ha.create=a=>new Ha({typeName:M.ZodVoid,...ue(a)});var _r=class a extends ce{static{o(this,"ZodArray")}_parse(e){let{ctx:r,status:s}=this._processInputParams(e),t=this._def;if(r.parsedType!==W.array)return B(r,{code:j.invalid_type,expected:W.array,received:r.parsedType}),re;if(t.exactLength!==null){let u=r.data.length>t.exactLength.value,c=r.data.length<t.exactLength.value;(u||c)&&(B(r,{code:u?j.too_big:j.too_small,minimum:c?t.exactLength.value:void 0,maximum:u?t.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:t.exactLength.message}),s.dirty())}if(t.minLength!==null&&r.data.length<t.minLength.value&&(B(r,{code:j.too_small,minimum:t.minLength.value,type:"array",inclusive:!0,exact:!1,message:t.minLength.message}),s.dirty()),t.maxLength!==null&&r.data.length>t.maxLength.value&&(B(r,{code:j.too_big,maximum:t.maxLength.value,type:"array",inclusive:!0,exact:!1,message:t.maxLength.message}),s.dirty()),r.common.async)return Promise.all([...r.data].map((u,c)=>t.type._parseAsync(new It(r,u,r.path,c)))).then(u=>tt.mergeArray(s,u));let l=[...r.data].map((u,c)=>t.type._parseSync(new It(r,u,r.path,c)));return tt.mergeArray(s,l)}get element(){return this._def.type}min(e,r){return new a({...this._def,minLength:{value:e,message:J.toString(r)}})}max(e,r){return new a({...this._def,maxLength:{value:e,message:J.toString(r)}})}length(e,r){return new a({...this._def,exactLength:{value:e,message:J.toString(r)}})}nonempty(e){return this.min(1,e)}};_r.create=(a,e)=>new _r({type:a,minLength:null,maxLength:null,exactLength:null,typeName:M.ZodArray,...ue(e)});function Ua(a){if(a instanceof vt){let e={};for(let r in a.shape){let s=a.shape[r];e[r]=Dt.create(Ua(s))}return new vt({...a._def,shape:o(()=>e,"shape")})}else return a instanceof _r?new _r({...a._def,type:Ua(a.element)}):a instanceof Dt?Dt.create(Ua(a.unwrap())):a instanceof sr?sr.create(Ua(a.unwrap())):a instanceof ar?ar.create(a.items.map(e=>Ua(e))):a}o(Ua,"deepPartialify");var vt=class a extends ce{static{o(this,"ZodObject")}constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let e=this._def.shape(),r=ye.objectKeys(e);return this._cached={shape:e,keys:r},this._cached}_parse(e){if(this._getType(e)!==W.object){let p=this._getOrReturnCtx(e);return B(p,{code:j.invalid_type,expected:W.object,received:p.parsedType}),re}let{status:s,ctx:t}=this._processInputParams(e),{shape:l,keys:u}=this._getCached(),c=[];if(!(this._def.catchall instanceof Wt&&this._def.unknownKeys==="strip"))for(let p in t.data)u.includes(p)||c.push(p);let h=[];for(let p of u){let m=l[p],S=t.data[p];h.push({key:{status:"valid",value:p},value:m._parse(new It(t,S,t.path,p)),alwaysSet:p in t.data})}if(this._def.catchall instanceof Wt){let p=this._def.unknownKeys;if(p==="passthrough")for(let m of c)h.push({key:{status:"valid",value:m},value:{status:"valid",value:t.data[m]}});else if(p==="strict")c.length>0&&(B(t,{code:j.unrecognized_keys,keys:c}),s.dirty());else if(p!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let p=this._def.catchall;for(let m of c){let S=t.data[m];h.push({key:{status:"valid",value:m},value:p._parse(new It(t,S,t.path,m)),alwaysSet:m in t.data})}}return t.common.async?Promise.resolve().then(async()=>{let p=[];for(let m of h){let S=await m.key,P=await m.value;p.push({key:S,value:P,alwaysSet:m.alwaysSet})}return p}).then(p=>tt.mergeObjectSync(s,p)):tt.mergeObjectSync(s,h)}get shape(){return this._def.shape()}strict(e){return J.errToObj,new a({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:o((r,s)=>{let t=this._def.errorMap?.(r,s).message??s.defaultError;return r.code==="unrecognized_keys"?{message:J.errToObj(e).message??t}:{message:t}},"errorMap")}:{}})}strip(){return new a({...this._def,unknownKeys:"strip"})}passthrough(){return new a({...this._def,unknownKeys:"passthrough"})}extend(e){return new a({...this._def,shape:o(()=>({...this._def.shape(),...e}),"shape")})}merge(e){return new a({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:o(()=>({...this._def.shape(),...e._def.shape()}),"shape"),typeName:M.ZodObject})}setKey(e,r){return this.augment({[e]:r})}catchall(e){return new a({...this._def,catchall:e})}pick(e){let r={};for(let s of ye.objectKeys(e))e[s]&&this.shape[s]&&(r[s]=this.shape[s]);return new a({...this._def,shape:o(()=>r,"shape")})}omit(e){let r={};for(let s of ye.objectKeys(this.shape))e[s]||(r[s]=this.shape[s]);return new a({...this._def,shape:o(()=>r,"shape")})}deepPartial(){return Ua(this)}partial(e){let r={};for(let s of ye.objectKeys(this.shape)){let t=this.shape[s];e&&!e[s]?r[s]=t:r[s]=t.optional()}return new a({...this._def,shape:o(()=>r,"shape")})}required(e){let r={};for(let s of ye.objectKeys(this.shape))if(e&&!e[s])r[s]=this.shape[s];else{let l=this.shape[s];for(;l instanceof Dt;)l=l._def.innerType;r[s]=l}return new a({...this._def,shape:o(()=>r,"shape")})}keyof(){return ql(ye.objectKeys(this.shape))}};vt.create=(a,e)=>new vt({shape:o(()=>a,"shape"),unknownKeys:"strip",catchall:Wt.create(),typeName:M.ZodObject,...ue(e)});vt.strictCreate=(a,e)=>new vt({shape:o(()=>a,"shape"),unknownKeys:"strict",catchall:Wt.create(),typeName:M.ZodObject,...ue(e)});vt.lazycreate=(a,e)=>new vt({shape:a,unknownKeys:"strip",catchall:Wt.create(),typeName:M.ZodObject,...ue(e)});var oa=class extends ce{static{o(this,"ZodUnion")}_parse(e){let{ctx:r}=this._processInputParams(e),s=this._def.options;function t(l){for(let c of l)if(c.result.status==="valid")return c.result;for(let c of l)if(c.result.status==="dirty")return r.common.issues.push(...c.ctx.common.issues),c.result;let u=l.map(c=>new gt(c.ctx.common.issues));return B(r,{code:j.invalid_union,unionErrors:u}),re}if(o(t,"handleResults"),r.common.async)return Promise.all(s.map(async l=>{let u={...r,common:{...r.common,issues:[]},parent:null};return{result:await l._parseAsync({data:r.data,path:r.path,parent:u}),ctx:u}})).then(t);{let l,u=[];for(let h of s){let p={...r,common:{...r.common,issues:[]},parent:null},m=h._parseSync({data:r.data,path:r.path,parent:p});if(m.status==="valid")return m;m.status==="dirty"&&!l&&(l={result:m,ctx:p}),p.common.issues.length&&u.push(p.common.issues)}if(l)return r.common.issues.push(...l.ctx.common.issues),l.result;let c=u.map(h=>new gt(h));return B(r,{code:j.invalid_union,unionErrors:c}),re}}get options(){return this._def.options}};oa.create=(a,e)=>new oa({options:a,typeName:M.ZodUnion,...ue(e)});var yr=o(a=>a instanceof la?yr(a.schema):a instanceof Ft?yr(a.innerType()):a instanceof ua?[a.value]:a instanceof ca?a.options:a instanceof da?ye.objectValues(a.enum):a instanceof fa?yr(a._def.innerType):a instanceof sa?[void 0]:a instanceof na?[null]:a instanceof Dt?[void 0,...yr(a.unwrap())]:a instanceof sr?[null,...yr(a.unwrap())]:a instanceof vs||a instanceof pa?yr(a.unwrap()):a instanceof ha?yr(a._def.innerType):[],"getDiscriminator"),dn=class a extends ce{static{o(this,"ZodDiscriminatedUnion")}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==W.object)return B(r,{code:j.invalid_type,expected:W.object,received:r.parsedType}),re;let s=this.discriminator,t=r.data[s],l=this.optionsMap.get(t);return l?r.common.async?l._parseAsync({data:r.data,path:r.path,parent:r}):l._parseSync({data:r.data,path:r.path,parent:r}):(B(r,{code:j.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[s]}),re)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,r,s){let t=new Map;for(let l of r){let u=yr(l.shape[e]);if(!u.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let c of u){if(t.has(c))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(c)}`);t.set(c,l)}}return new a({typeName:M.ZodDiscriminatedUnion,discriminator:e,options:r,optionsMap:t,...ue(s)})}};function Vo(a,e){let r=rr(a),s=rr(e);if(a===e)return{valid:!0,data:a};if(r===W.object&&s===W.object){let t=ye.objectKeys(e),l=ye.objectKeys(a).filter(c=>t.indexOf(c)!==-1),u={...a,...e};for(let c of l){let h=Vo(a[c],e[c]);if(!h.valid)return{valid:!1};u[c]=h.data}return{valid:!0,data:u}}else if(r===W.array&&s===W.array){if(a.length!==e.length)return{valid:!1};let t=[];for(let l=0;l<a.length;l++){let u=a[l],c=e[l],h=Vo(u,c);if(!h.valid)return{valid:!1};t.push(h.data)}return{valid:!0,data:t}}else return r===W.date&&s===W.date&&+a==+e?{valid:!0,data:a}:{valid:!1}}o(Vo,"mergeValues");var ia=class extends ce{static{o(this,"ZodIntersection")}_parse(e){let{status:r,ctx:s}=this._processInputParams(e),t=o((l,u)=>{if(un(l)||un(u))return re;let c=Vo(l.value,u.value);return c.valid?((cn(l)||cn(u))&&r.dirty(),{status:r.value,value:c.data}):(B(s,{code:j.invalid_intersection_types}),re)},"handleParsed");return s.common.async?Promise.all([this._def.left._parseAsync({data:s.data,path:s.path,parent:s}),this._def.right._parseAsync({data:s.data,path:s.path,parent:s})]).then(([l,u])=>t(l,u)):t(this._def.left._parseSync({data:s.data,path:s.path,parent:s}),this._def.right._parseSync({data:s.data,path:s.path,parent:s}))}};ia.create=(a,e,r)=>new ia({left:a,right:e,typeName:M.ZodIntersection,...ue(r)});var ar=class a extends ce{static{o(this,"ZodTuple")}_parse(e){let{status:r,ctx:s}=this._processInputParams(e);if(s.parsedType!==W.array)return B(s,{code:j.invalid_type,expected:W.array,received:s.parsedType}),re;if(s.data.length<this._def.items.length)return B(s,{code:j.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),re;!this._def.rest&&s.data.length>this._def.items.length&&(B(s,{code:j.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());let l=[...s.data].map((u,c)=>{let h=this._def.items[c]||this._def.rest;return h?h._parse(new It(s,u,s.path,c)):null}).filter(u=>!!u);return s.common.async?Promise.all(l).then(u=>tt.mergeArray(r,u)):tt.mergeArray(r,l)}get items(){return this._def.items}rest(e){return new a({...this._def,rest:e})}};ar.create=(a,e)=>{if(!Array.isArray(a))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ar({items:a,typeName:M.ZodTuple,rest:null,...ue(e)})};var fn=class a extends ce{static{o(this,"ZodRecord")}get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:s}=this._processInputParams(e);if(s.parsedType!==W.object)return B(s,{code:j.invalid_type,expected:W.object,received:s.parsedType}),re;let t=[],l=this._def.keyType,u=this._def.valueType;for(let c in s.data)t.push({key:l._parse(new It(s,c,s.path,c)),value:u._parse(new It(s,s.data[c],s.path,c)),alwaysSet:c in s.data});return s.common.async?tt.mergeObjectAsync(r,t):tt.mergeObjectSync(r,t)}get element(){return this._def.valueType}static create(e,r,s){return r instanceof ce?new a({keyType:e,valueType:r,typeName:M.ZodRecord,...ue(s)}):new a({keyType:Lr.create(),valueType:e,typeName:M.ZodRecord,...ue(r)})}},Wa=class extends ce{static{o(this,"ZodMap")}get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:s}=this._processInputParams(e);if(s.parsedType!==W.map)return B(s,{code:j.invalid_type,expected:W.map,received:s.parsedType}),re;let t=this._def.keyType,l=this._def.valueType,u=[...s.data.entries()].map(([c,h],p)=>({key:t._parse(new It(s,c,s.path,[p,"key"])),value:l._parse(new It(s,h,s.path,[p,"value"]))}));if(s.common.async){let c=new Map;return Promise.resolve().then(async()=>{for(let h of u){let p=await h.key,m=await h.value;if(p.status==="aborted"||m.status==="aborted")return re;(p.status==="dirty"||m.status==="dirty")&&r.dirty(),c.set(p.value,m.value)}return{status:r.value,value:c}})}else{let c=new Map;for(let h of u){let p=h.key,m=h.value;if(p.status==="aborted"||m.status==="aborted")return re;(p.status==="dirty"||m.status==="dirty")&&r.dirty(),c.set(p.value,m.value)}return{status:r.value,value:c}}}};Wa.create=(a,e,r)=>new Wa({valueType:e,keyType:a,typeName:M.ZodMap,...ue(r)});var Va=class a extends ce{static{o(this,"ZodSet")}_parse(e){let{status:r,ctx:s}=this._processInputParams(e);if(s.parsedType!==W.set)return B(s,{code:j.invalid_type,expected:W.set,received:s.parsedType}),re;let t=this._def;t.minSize!==null&&s.data.size<t.minSize.value&&(B(s,{code:j.too_small,minimum:t.minSize.value,type:"set",inclusive:!0,exact:!1,message:t.minSize.message}),r.dirty()),t.maxSize!==null&&s.data.size>t.maxSize.value&&(B(s,{code:j.too_big,maximum:t.maxSize.value,type:"set",inclusive:!0,exact:!1,message:t.maxSize.message}),r.dirty());let l=this._def.valueType;function u(h){let p=new Set;for(let m of h){if(m.status==="aborted")return re;m.status==="dirty"&&r.dirty(),p.add(m.value)}return{status:r.value,value:p}}o(u,"finalizeSet");let c=[...s.data.values()].map((h,p)=>l._parse(new It(s,h,s.path,p)));return s.common.async?Promise.all(c).then(h=>u(h)):u(c)}min(e,r){return new a({...this._def,minSize:{value:e,message:J.toString(r)}})}max(e,r){return new a({...this._def,maxSize:{value:e,message:J.toString(r)}})}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}};Va.create=(a,e)=>new Va({valueType:a,minSize:null,maxSize:null,typeName:M.ZodSet,...ue(e)});var hn=class a extends ce{static{o(this,"ZodFunction")}constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==W.function)return B(r,{code:j.invalid_type,expected:W.function,received:r.parsedType}),re;function s(c,h){return gs({data:c,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,qa(),vr].filter(p=>!!p),issueData:{code:j.invalid_arguments,argumentsError:h}})}o(s,"makeArgsIssue");function t(c,h){return gs({data:c,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,qa(),vr].filter(p=>!!p),issueData:{code:j.invalid_return_type,returnTypeError:h}})}o(t,"makeReturnsIssue");let l={errorMap:r.common.contextualErrorMap},u=r.data;if(this._def.returns instanceof jr){let c=this;return it(async function(...h){let p=new gt([]),m=await c._def.args.parseAsync(h,l).catch(g=>{throw p.addIssue(s(h,g)),p}),S=await Reflect.apply(u,this,m);return await c._def.returns._def.type.parseAsync(S,l).catch(g=>{throw p.addIssue(t(S,g)),p})})}else{let c=this;return it(function(...h){let p=c._def.args.safeParse(h,l);if(!p.success)throw new gt([s(h,p.error)]);let m=Reflect.apply(u,this,p.data),S=c._def.returns.safeParse(m,l);if(!S.success)throw new gt([t(m,S.error)]);return S.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new a({...this._def,args:ar.create(e).rest(br.create())})}returns(e){return new a({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,r,s){return new a({args:e||ar.create([]).rest(br.create()),returns:r||br.create(),typeName:M.ZodFunction,...ue(s)})}},la=class extends ce{static{o(this,"ZodLazy")}get schema(){return this._def.getter()}_parse(e){let{ctx:r}=this._processInputParams(e);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}};la.create=(a,e)=>new la({getter:a,typeName:M.ZodLazy,...ue(e)});var ua=class extends ce{static{o(this,"ZodLiteral")}_parse(e){if(e.data!==this._def.value){let r=this._getOrReturnCtx(e);return B(r,{received:r.data,code:j.invalid_literal,expected:this._def.value}),re}return{status:"valid",value:e.data}}get value(){return this._def.value}};ua.create=(a,e)=>new ua({value:a,typeName:M.ZodLiteral,...ue(e)});function ql(a,e){return new ca({values:a,typeName:M.ZodEnum,...ue(e)})}o(ql,"createZodEnum");var ca=class a extends ce{static{o(this,"ZodEnum")}_parse(e){if(typeof e.data!="string"){let r=this._getOrReturnCtx(e),s=this._def.values;return B(r,{expected:ye.joinValues(s),received:r.parsedType,code:j.invalid_type}),re}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){let r=this._getOrReturnCtx(e),s=this._def.values;return B(r,{received:r.data,code:j.invalid_enum_value,options:s}),re}return it(e.data)}get options(){return this._def.values}get enum(){let e={};for(let r of this._def.values)e[r]=r;return e}get Values(){let e={};for(let r of this._def.values)e[r]=r;return e}get Enum(){let e={};for(let r of this._def.values)e[r]=r;return e}extract(e,r=this._def){return a.create(e,{...this._def,...r})}exclude(e,r=this._def){return a.create(this.options.filter(s=>!e.includes(s)),{...this._def,...r})}};ca.create=ql;var da=class extends ce{static{o(this,"ZodNativeEnum")}_parse(e){let r=ye.getValidEnumValues(this._def.values),s=this._getOrReturnCtx(e);if(s.parsedType!==W.string&&s.parsedType!==W.number){let t=ye.objectValues(r);return B(s,{expected:ye.joinValues(t),received:s.parsedType,code:j.invalid_type}),re}if(this._cache||(this._cache=new Set(ye.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){let t=ye.objectValues(r);return B(s,{received:s.data,code:j.invalid_enum_value,options:t}),re}return it(e.data)}get enum(){return this._def.values}};da.create=(a,e)=>new da({values:a,typeName:M.ZodNativeEnum,...ue(e)});var jr=class extends ce{static{o(this,"ZodPromise")}unwrap(){return this._def.type}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==W.promise&&r.common.async===!1)return B(r,{code:j.invalid_type,expected:W.promise,received:r.parsedType}),re;let s=r.parsedType===W.promise?r.data:Promise.resolve(r.data);return it(s.then(t=>this._def.type.parseAsync(t,{path:r.path,errorMap:r.common.contextualErrorMap})))}};jr.create=(a,e)=>new jr({type:a,typeName:M.ZodPromise,...ue(e)});var Ft=class extends ce{static{o(this,"ZodEffects")}innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===M.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:r,ctx:s}=this._processInputParams(e),t=this._def.effect||null,l={addIssue:o(u=>{B(s,u),u.fatal?r.abort():r.dirty()},"addIssue"),get path(){return s.path}};if(l.addIssue=l.addIssue.bind(l),t.type==="preprocess"){let u=t.transform(s.data,l);if(s.common.async)return Promise.resolve(u).then(async c=>{if(r.value==="aborted")return re;let h=await this._def.schema._parseAsync({data:c,path:s.path,parent:s});return h.status==="aborted"?re:h.status==="dirty"?Xr(h.value):r.value==="dirty"?Xr(h.value):h});{if(r.value==="aborted")return re;let c=this._def.schema._parseSync({data:u,path:s.path,parent:s});return c.status==="aborted"?re:c.status==="dirty"?Xr(c.value):r.value==="dirty"?Xr(c.value):c}}if(t.type==="refinement"){let u=o(c=>{let h=t.refinement(c,l);if(s.common.async)return Promise.resolve(h);if(h instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return c},"executeRefinement");if(s.common.async===!1){let c=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});return c.status==="aborted"?re:(c.status==="dirty"&&r.dirty(),u(c.value),{status:r.value,value:c.value})}else return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(c=>c.status==="aborted"?re:(c.status==="dirty"&&r.dirty(),u(c.value).then(()=>({status:r.value,value:c.value}))))}if(t.type==="transform")if(s.common.async===!1){let u=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});if(!$r(u))return re;let c=t.transform(u.value,l);if(c instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:c}}else return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(u=>$r(u)?Promise.resolve(t.transform(u.value,l)).then(c=>({status:r.value,value:c})):re);ye.assertNever(t)}};Ft.create=(a,e,r)=>new Ft({schema:a,typeName:M.ZodEffects,effect:e,...ue(r)});Ft.createWithPreprocess=(a,e,r)=>new Ft({schema:e,effect:{type:"preprocess",transform:a},typeName:M.ZodEffects,...ue(r)});var Dt=class extends ce{static{o(this,"ZodOptional")}_parse(e){return this._getType(e)===W.undefined?it(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};Dt.create=(a,e)=>new Dt({innerType:a,typeName:M.ZodOptional,...ue(e)});var sr=class extends ce{static{o(this,"ZodNullable")}_parse(e){return this._getType(e)===W.null?it(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};sr.create=(a,e)=>new sr({innerType:a,typeName:M.ZodNullable,...ue(e)});var fa=class extends ce{static{o(this,"ZodDefault")}_parse(e){let{ctx:r}=this._processInputParams(e),s=r.data;return r.parsedType===W.undefined&&(s=this._def.defaultValue()),this._def.innerType._parse({data:s,path:r.path,parent:r})}removeDefault(){return this._def.innerType}};fa.create=(a,e)=>new fa({innerType:a,typeName:M.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...ue(e)});var ha=class extends ce{static{o(this,"ZodCatch")}_parse(e){let{ctx:r}=this._processInputParams(e),s={...r,common:{...r.common,issues:[]}},t=this._def.innerType._parse({data:s.data,path:s.path,parent:{...s}});return za(t)?t.then(l=>({status:"valid",value:l.status==="valid"?l.value:this._def.catchValue({get error(){return new gt(s.common.issues)},input:s.data})})):{status:"valid",value:t.status==="valid"?t.value:this._def.catchValue({get error(){return new gt(s.common.issues)},input:s.data})}}removeCatch(){return this._def.innerType}};ha.create=(a,e)=>new ha({innerType:a,typeName:M.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...ue(e)});var Za=class extends ce{static{o(this,"ZodNaN")}_parse(e){if(this._getType(e)!==W.nan){let s=this._getOrReturnCtx(e);return B(s,{code:j.invalid_type,expected:W.nan,received:s.parsedType}),re}return{status:"valid",value:e.data}}};Za.create=a=>new Za({typeName:M.ZodNaN,...ue(a)});var wp=Symbol("zod_brand"),vs=class extends ce{static{o(this,"ZodBranded")}_parse(e){let{ctx:r}=this._processInputParams(e),s=r.data;return this._def.type._parse({data:s,path:r.path,parent:r})}unwrap(){return this._def.type}},ys=class a extends ce{static{o(this,"ZodPipeline")}_parse(e){let{status:r,ctx:s}=this._processInputParams(e);if(s.common.async)return o(async()=>{let l=await this._def.in._parseAsync({data:s.data,path:s.path,parent:s});return l.status==="aborted"?re:l.status==="dirty"?(r.dirty(),Xr(l.value)):this._def.out._parseAsync({data:l.value,path:s.path,parent:s})},"handleAsync")();{let t=this._def.in._parseSync({data:s.data,path:s.path,parent:s});return t.status==="aborted"?re:t.status==="dirty"?(r.dirty(),{status:"dirty",value:t.value}):this._def.out._parseSync({data:t.value,path:s.path,parent:s})}}static create(e,r){return new a({in:e,out:r,typeName:M.ZodPipeline})}},pa=class extends ce{static{o(this,"ZodReadonly")}_parse(e){let r=this._def.innerType._parse(e),s=o(t=>($r(t)&&(t.value=Object.freeze(t.value)),t),"freeze");return za(r)?r.then(t=>s(t)):s(r)}unwrap(){return this._def.innerType}};pa.create=(a,e)=>new pa({innerType:a,typeName:M.ZodReadonly,...ue(e)});function Ll(a,e){let r=typeof a=="function"?a(e):typeof a=="string"?{message:a}:a;return typeof r=="string"?{message:r}:r}o(Ll,"cleanParams");function zl(a,e={},r){return a?Nr.create().superRefine((s,t)=>{let l=a(s);if(l instanceof Promise)return l.then(u=>{if(!u){let c=Ll(e,s),h=c.fatal??r??!0;t.addIssue({code:"custom",...c,fatal:h})}});if(!l){let u=Ll(e,s),c=u.fatal??r??!0;t.addIssue({code:"custom",...u,fatal:c})}}):Nr.create()}o(zl,"custom");var Pp={object:vt.lazycreate},M;(function(a){a.ZodString="ZodString",a.ZodNumber="ZodNumber",a.ZodNaN="ZodNaN",a.ZodBigInt="ZodBigInt",a.ZodBoolean="ZodBoolean",a.ZodDate="ZodDate",a.ZodSymbol="ZodSymbol",a.ZodUndefined="ZodUndefined",a.ZodNull="ZodNull",a.ZodAny="ZodAny",a.ZodUnknown="ZodUnknown",a.ZodNever="ZodNever",a.ZodVoid="ZodVoid",a.ZodArray="ZodArray",a.ZodObject="ZodObject",a.ZodUnion="ZodUnion",a.ZodDiscriminatedUnion="ZodDiscriminatedUnion",a.ZodIntersection="ZodIntersection",a.ZodTuple="ZodTuple",a.ZodRecord="ZodRecord",a.ZodMap="ZodMap",a.ZodSet="ZodSet",a.ZodFunction="ZodFunction",a.ZodLazy="ZodLazy",a.ZodLiteral="ZodLiteral",a.ZodEnum="ZodEnum",a.ZodEffects="ZodEffects",a.ZodNativeEnum="ZodNativeEnum",a.ZodOptional="ZodOptional",a.ZodNullable="ZodNullable",a.ZodDefault="ZodDefault",a.ZodCatch="ZodCatch",a.ZodPromise="ZodPromise",a.ZodBranded="ZodBranded",a.ZodPipeline="ZodPipeline",a.ZodReadonly="ZodReadonly"})(M||(M={}));var Ep=o((a,e={message:`Input not instance of ${a.name}`})=>zl(r=>r instanceof a,e),"instanceOfType"),Ul=Lr.create,Bl=ea.create,Rp=Za.create,xp=ta.create,Hl=ra.create,Tp=aa.create,Ap=Ba.create,Cp=sa.create,Op=na.create,kp=Nr.create,Dp=br.create,Ip=Wt.create,Fp=Ha.create,$p=_r.create,Lp=vt.create,Np=vt.strictCreate,jp=oa.create,Mp=dn.create,qp=ia.create,zp=ar.create,Up=fn.create,Bp=Wa.create,Hp=Va.create,Wp=hn.create,Vp=la.create,Zp=ua.create,Qp=ca.create,Gp=da.create,Yp=jr.create,Kp=Ft.create,Jp=Dt.create,Xp=sr.create,em=Ft.createWithPreprocess,tm=ys.create,rm=o(()=>Ul().optional(),"ostring"),am=o(()=>Bl().optional(),"onumber"),sm=o(()=>Hl().optional(),"oboolean"),nm={string:o((a=>Lr.create({...a,coerce:!0})),"string"),number:o((a=>ea.create({...a,coerce:!0})),"number"),boolean:o((a=>ra.create({...a,coerce:!0})),"boolean"),bigint:o((a=>ta.create({...a,coerce:!0})),"bigint"),date:o((a=>aa.create({...a,coerce:!0})),"date")};var om=re;var Zo="2025-06-18";var Wl=[Zo,"2025-03-26","2024-11-05","2024-10-07"],pn="2.0",Vl=f.union([f.string(),f.number().int()]),Zl=f.string(),im=f.object({progressToken:f.optional(Vl)}).passthrough(),$t=f.object({_meta:f.optional(im)}).passthrough(),yt=f.object({method:f.string(),params:f.optional($t)}),bs=f.object({_meta:f.optional(f.object({}).passthrough())}).passthrough(),nr=f.object({method:f.string(),params:f.optional(bs)}),Lt=f.object({_meta:f.optional(f.object({}).passthrough())}).passthrough(),mn=f.union([f.string(),f.number().int()]),Ql=f.object({jsonrpc:f.literal(pn),id:mn}).merge(yt).strict(),Gl=o(a=>Ql.safeParse(a).success,"isJSONRPCRequest"),Yl=f.object({jsonrpc:f.literal(pn)}).merge(nr).strict(),Kl=o(a=>Yl.safeParse(a).success,"isJSONRPCNotification"),Jl=f.object({jsonrpc:f.literal(pn),id:mn,result:Lt}).strict(),Qo=o(a=>Jl.safeParse(a).success,"isJSONRPCResponse"),De;(function(a){a[a.ConnectionClosed=-32e3]="ConnectionClosed",a[a.RequestTimeout=-32001]="RequestTimeout",a[a.ParseError=-32700]="ParseError",a[a.InvalidRequest=-32600]="InvalidRequest",a[a.MethodNotFound=-32601]="MethodNotFound",a[a.InvalidParams=-32602]="InvalidParams",a[a.InternalError=-32603]="InternalError"})(De||(De={}));var Xl=f.object({jsonrpc:f.literal(pn),id:mn,error:f.object({code:f.number().int(),message:f.string(),data:f.optional(f.unknown())})}).strict(),eu=o(a=>Xl.safeParse(a).success,"isJSONRPCError"),tu=f.union([Ql,Yl,Jl,Xl]),gn=Lt.strict(),vn=nr.extend({method:f.literal("notifications/cancelled"),params:bs.extend({requestId:mn,reason:f.string().optional()})}),yn=f.object({src:f.string(),mimeType:f.optional(f.string()),sizes:f.optional(f.string())}).passthrough(),_s=f.object({name:f.string(),title:f.optional(f.string())}).passthrough(),ru=_s.extend({version:f.string(),websiteUrl:f.optional(f.string()),icons:f.optional(f.array(yn))}),lm=f.object({experimental:f.optional(f.object({}).passthrough()),sampling:f.optional(f.object({}).passthrough()),elicitation:f.optional(f.object({}).passthrough()),roots:f.optional(f.object({listChanged:f.optional(f.boolean())}).passthrough())}).passthrough(),Go=yt.extend({method:f.literal("initialize"),params:$t.extend({protocolVersion:f.string(),capabilities:lm,clientInfo:ru})});var um=f.object({experimental:f.optional(f.object({}).passthrough()),logging:f.optional(f.object({}).passthrough()),completions:f.optional(f.object({}).passthrough()),prompts:f.optional(f.object({listChanged:f.optional(f.boolean())}).passthrough()),resources:f.optional(f.object({subscribe:f.optional(f.boolean()),listChanged:f.optional(f.boolean())}).passthrough()),tools:f.optional(f.object({listChanged:f.optional(f.boolean())}).passthrough())}).passthrough(),cm=Lt.extend({protocolVersion:f.string(),capabilities:um,serverInfo:ru,instructions:f.optional(f.string())}),Yo=nr.extend({method:f.literal("notifications/initialized")});var bn=yt.extend({method:f.literal("ping")}),dm=f.object({progress:f.number(),total:f.optional(f.number()),message:f.optional(f.string())}).passthrough(),_n=nr.extend({method:f.literal("notifications/progress"),params:bs.merge(dm).extend({progressToken:Vl})}),Sn=yt.extend({params:$t.extend({cursor:f.optional(Zl)}).optional()}),wn=Lt.extend({nextCursor:f.optional(Zl)}),au=f.object({uri:f.string(),mimeType:f.optional(f.string()),_meta:f.optional(f.object({}).passthrough())}).passthrough(),su=au.extend({text:f.string()}),Ko=f.string().refine(a=>{try{return atob(a),!0}catch{return!1}},{message:"Invalid Base64 string"}),nu=au.extend({blob:Ko}),ou=_s.extend({uri:f.string(),description:f.optional(f.string()),mimeType:f.optional(f.string()),icons:f.optional(f.array(yn)),_meta:f.optional(f.object({}).passthrough())}),fm=_s.extend({uriTemplate:f.string(),description:f.optional(f.string()),mimeType:f.optional(f.string()),_meta:f.optional(f.object({}).passthrough())}),Pn=Sn.extend({method:f.literal("resources/list")}),hm=wn.extend({resources:f.array(ou)}),En=Sn.extend({method:f.literal("resources/templates/list")}),pm=wn.extend({resourceTemplates:f.array(fm)}),Rn=yt.extend({method:f.literal("resources/read"),params:$t.extend({uri:f.string()})}),mm=Lt.extend({contents:f.array(f.union([su,nu]))}),gm=nr.extend({method:f.literal("notifications/resources/list_changed")}),vm=yt.extend({method:f.literal("resources/subscribe"),params:$t.extend({uri:f.string()})}),ym=yt.extend({method:f.literal("resources/unsubscribe"),params:$t.extend({uri:f.string()})}),bm=nr.extend({method:f.literal("notifications/resources/updated"),params:bs.extend({uri:f.string()})}),_m=f.object({name:f.string(),description:f.optional(f.string()),required:f.optional(f.boolean())}).passthrough(),Sm=_s.extend({description:f.optional(f.string()),arguments:f.optional(f.array(_m)),icons:f.optional(f.array(yn)),_meta:f.optional(f.object({}).passthrough())}),xn=Sn.extend({method:f.literal("prompts/list")}),wm=wn.extend({prompts:f.array(Sm)}),Tn=yt.extend({method:f.literal("prompts/get"),params:$t.extend({name:f.string(),arguments:f.optional(f.record(f.string()))})}),Jo=f.object({type:f.literal("text"),text:f.string(),_meta:f.optional(f.object({}).passthrough())}).passthrough(),Xo=f.object({type:f.literal("image"),data:Ko,mimeType:f.string(),_meta:f.optional(f.object({}).passthrough())}).passthrough(),ei=f.object({type:f.literal("audio"),data:Ko,mimeType:f.string(),_meta:f.optional(f.object({}).passthrough())}).passthrough(),Pm=f.object({type:f.literal("resource"),resource:f.union([su,nu]),_meta:f.optional(f.object({}).passthrough())}).passthrough(),Em=ou.extend({type:f.literal("resource_link")}),iu=f.union([Jo,Xo,ei,Em,Pm]),Rm=f.object({role:f.enum(["user","assistant"]),content:iu}).passthrough(),xm=Lt.extend({description:f.optional(f.string()),messages:f.array(Rm)}),Tm=nr.extend({method:f.literal("notifications/prompts/list_changed")}),Am=f.object({title:f.optional(f.string()),readOnlyHint:f.optional(f.boolean()),destructiveHint:f.optional(f.boolean()),idempotentHint:f.optional(f.boolean()),openWorldHint:f.optional(f.boolean())}).passthrough(),Cm=_s.extend({description:f.optional(f.string()),inputSchema:f.object({type:f.literal("object"),properties:f.optional(f.object({}).passthrough()),required:f.optional(f.array(f.string()))}).passthrough(),outputSchema:f.optional(f.object({type:f.literal("object"),properties:f.optional(f.object({}).passthrough()),required:f.optional(f.array(f.string()))}).passthrough()),annotations:f.optional(Am),icons:f.optional(f.array(yn)),_meta:f.optional(f.object({}).passthrough())}),An=Sn.extend({method:f.literal("tools/list")}),Om=wn.extend({tools:f.array(Cm)}),lu=Lt.extend({content:f.array(iu).default([]),structuredContent:f.object({}).passthrough().optional(),isError:f.optional(f.boolean())}),vb=lu.or(Lt.extend({toolResult:f.unknown()})),Cn=yt.extend({method:f.literal("tools/call"),params:$t.extend({name:f.string(),arguments:f.optional(f.record(f.unknown()))})}),km=nr.extend({method:f.literal("notifications/tools/list_changed")}),Ss=f.enum(["debug","info","notice","warning","error","critical","alert","emergency"]),ti=yt.extend({method:f.literal("logging/setLevel"),params:$t.extend({level:Ss})}),Dm=nr.extend({method:f.literal("notifications/message"),params:bs.extend({level:Ss,logger:f.optional(f.string()),data:f.unknown()})}),Im=f.object({name:f.string().optional()}).passthrough(),Fm=f.object({hints:f.optional(f.array(Im)),costPriority:f.optional(f.number().min(0).max(1)),speedPriority:f.optional(f.number().min(0).max(1)),intelligencePriority:f.optional(f.number().min(0).max(1))}).passthrough(),$m=f.object({role:f.enum(["user","assistant"]),content:f.union([Jo,Xo,ei])}).passthrough(),Lm=yt.extend({method:f.literal("sampling/createMessage"),params:$t.extend({messages:f.array($m),systemPrompt:f.optional(f.string()),includeContext:f.optional(f.enum(["none","thisServer","allServers"])),temperature:f.optional(f.number()),maxTokens:f.number().int(),stopSequences:f.optional(f.array(f.string())),metadata:f.optional(f.object({}).passthrough()),modelPreferences:f.optional(Fm)})}),ri=Lt.extend({model:f.string(),stopReason:f.optional(f.enum(["endTurn","stopSequence","maxTokens"]).or(f.string())),role:f.enum(["user","assistant"]),content:f.discriminatedUnion("type",[Jo,Xo,ei])}),Nm=f.object({type:f.literal("boolean"),title:f.optional(f.string()),description:f.optional(f.string()),default:f.optional(f.boolean())}).passthrough(),jm=f.object({type:f.literal("string"),title:f.optional(f.string()),description:f.optional(f.string()),minLength:f.optional(f.number()),maxLength:f.optional(f.number()),format:f.optional(f.enum(["email","uri","date","date-time"]))}).passthrough(),Mm=f.object({type:f.enum(["number","integer"]),title:f.optional(f.string()),description:f.optional(f.string()),minimum:f.optional(f.number()),maximum:f.optional(f.number())}).passthrough(),qm=f.object({type:f.literal("string"),title:f.optional(f.string()),description:f.optional(f.string()),enum:f.array(f.string()),enumNames:f.optional(f.array(f.string()))}).passthrough(),zm=f.union([Nm,jm,Mm,qm]),Um=yt.extend({method:f.literal("elicitation/create"),params:$t.extend({message:f.string(),requestedSchema:f.object({type:f.literal("object"),properties:f.record(f.string(),zm),required:f.optional(f.array(f.string()))}).passthrough()})}),ai=Lt.extend({action:f.enum(["accept","decline","cancel"]),content:f.optional(f.record(f.string(),f.unknown()))}),Bm=f.object({type:f.literal("ref/resource"),uri:f.string()}).passthrough();var Hm=f.object({type:f.literal("ref/prompt"),name:f.string()}).passthrough(),On=yt.extend({method:f.literal("completion/complete"),params:$t.extend({ref:f.union([Hm,Bm]),argument:f.object({name:f.string(),value:f.string()}).passthrough(),context:f.optional(f.object({arguments:f.optional(f.record(f.string(),f.string()))}))})}),Wm=Lt.extend({completion:f.object({values:f.array(f.string()).max(100),total:f.optional(f.number().int()),hasMore:f.optional(f.boolean())}).passthrough()}),Vm=f.object({uri:f.string().startsWith("file://"),name:f.optional(f.string()),_meta:f.optional(f.object({}).passthrough())}).passthrough(),Zm=yt.extend({method:f.literal("roots/list")}),si=Lt.extend({roots:f.array(Vm)}),Qm=nr.extend({method:f.literal("notifications/roots/list_changed")}),yb=f.union([bn,Go,On,ti,Tn,xn,Pn,En,Rn,vm,ym,Cn,An]),bb=f.union([vn,_n,Yo,Qm]),_b=f.union([gn,ri,ai,si]),Sb=f.union([bn,Lm,Um,Zm]),wb=f.union([vn,_n,Dm,bm,gm,km,Tm]),Pb=f.union([gn,cm,Wm,xm,wm,hm,pm,mm,lu,Om]),Ie=class extends Error{static{o(this,"McpError")}constructor(e,r,s){super(`MCP error ${e}: ${r}`),this.code=e,this.data=s,this.name="McpError"}};var Gm=6e4,kn=class{static{o(this,"Protocol")}constructor(e){this._options=e,this._requestMessageId=0,this._requestHandlers=new Map,this._requestHandlerAbortControllers=new Map,this._notificationHandlers=new Map,this._responseHandlers=new Map,this._progressHandlers=new Map,this._timeoutInfo=new Map,this._pendingDebouncedNotifications=new Set,this.setNotificationHandler(vn,r=>{let s=this._requestHandlerAbortControllers.get(r.params.requestId);s?.abort(r.params.reason)}),this.setNotificationHandler(_n,r=>{this._onprogress(r)}),this.setRequestHandler(bn,r=>({}))}_setupTimeout(e,r,s,t,l=!1){this._timeoutInfo.set(e,{timeoutId:setTimeout(t,r),startTime:Date.now(),timeout:r,maxTotalTimeout:s,resetTimeoutOnProgress:l,onTimeout:t})}_resetTimeout(e){let r=this._timeoutInfo.get(e);if(!r)return!1;let s=Date.now()-r.startTime;if(r.maxTotalTimeout&&s>=r.maxTotalTimeout)throw this._timeoutInfo.delete(e),new Ie(De.RequestTimeout,"Maximum total timeout exceeded",{maxTotalTimeout:r.maxTotalTimeout,totalElapsed:s});return clearTimeout(r.timeoutId),r.timeoutId=setTimeout(r.onTimeout,r.timeout),!0}_cleanupTimeout(e){let r=this._timeoutInfo.get(e);r&&(clearTimeout(r.timeoutId),this._timeoutInfo.delete(e))}async connect(e){var r,s,t;this._transport=e;let l=(r=this.transport)===null||r===void 0?void 0:r.onclose;this._transport.onclose=()=>{l?.(),this._onclose()};let u=(s=this.transport)===null||s===void 0?void 0:s.onerror;this._transport.onerror=h=>{u?.(h),this._onerror(h)};let c=(t=this._transport)===null||t===void 0?void 0:t.onmessage;this._transport.onmessage=(h,p)=>{c?.(h,p),Qo(h)||eu(h)?this._onresponse(h):Gl(h)?this._onrequest(h,p):Kl(h)?this._onnotification(h):this._onerror(new Error(`Unknown message type: ${JSON.stringify(h)}`))},await this._transport.start()}_onclose(){var e;let r=this._responseHandlers;this._responseHandlers=new Map,this._progressHandlers.clear(),this._pendingDebouncedNotifications.clear(),this._transport=void 0,(e=this.onclose)===null||e===void 0||e.call(this);let s=new Ie(De.ConnectionClosed,"Connection closed");for(let t of r.values())t(s)}_onerror(e){var r;(r=this.onerror)===null||r===void 0||r.call(this,e)}_onnotification(e){var r;let s=(r=this._notificationHandlers.get(e.method))!==null&&r!==void 0?r:this.fallbackNotificationHandler;s!==void 0&&Promise.resolve().then(()=>s(e)).catch(t=>this._onerror(new Error(`Uncaught error in notification handler: ${t}`)))}_onrequest(e,r){var s,t;let l=(s=this._requestHandlers.get(e.method))!==null&&s!==void 0?s:this.fallbackRequestHandler,u=this._transport;if(l===void 0){u?.send({jsonrpc:"2.0",id:e.id,error:{code:De.MethodNotFound,message:"Method not found"}}).catch(p=>this._onerror(new Error(`Failed to send an error response: ${p}`)));return}let c=new AbortController;this._requestHandlerAbortControllers.set(e.id,c);let h={signal:c.signal,sessionId:u?.sessionId,_meta:(t=e.params)===null||t===void 0?void 0:t._meta,sendNotification:o(p=>this.notification(p,{relatedRequestId:e.id}),"sendNotification"),sendRequest:o((p,m,S)=>this.request(p,m,{...S,relatedRequestId:e.id}),"sendRequest"),authInfo:r?.authInfo,requestId:e.id,requestInfo:r?.requestInfo};Promise.resolve().then(()=>l(e,h)).then(p=>{if(!c.signal.aborted)return u?.send({result:p,jsonrpc:"2.0",id:e.id})},p=>{var m;if(!c.signal.aborted)return u?.send({jsonrpc:"2.0",id:e.id,error:{code:Number.isSafeInteger(p.code)?p.code:De.InternalError,message:(m=p.message)!==null&&m!==void 0?m:"Internal error"}})}).catch(p=>this._onerror(new Error(`Failed to send response: ${p}`))).finally(()=>{this._requestHandlerAbortControllers.delete(e.id)})}_onprogress(e){let{progressToken:r,...s}=e.params,t=Number(r),l=this._progressHandlers.get(t);if(!l){this._onerror(new Error(`Received a progress notification for an unknown token: ${JSON.stringify(e)}`));return}let u=this._responseHandlers.get(t),c=this._timeoutInfo.get(t);if(c&&u&&c.resetTimeoutOnProgress)try{this._resetTimeout(t)}catch(h){u(h);return}l(s)}_onresponse(e){let r=Number(e.id),s=this._responseHandlers.get(r);if(s===void 0){this._onerror(new Error(`Received a response for an unknown message ID: ${JSON.stringify(e)}`));return}if(this._responseHandlers.delete(r),this._progressHandlers.delete(r),this._cleanupTimeout(r),Qo(e))s(e);else{let t=new Ie(e.error.code,e.error.message,e.error.data);s(t)}}get transport(){return this._transport}async close(){var e;await((e=this._transport)===null||e===void 0?void 0:e.close())}request(e,r,s){let{relatedRequestId:t,resumptionToken:l,onresumptiontoken:u}=s??{};return new Promise((c,h)=>{var p,m,S,P,g,b;if(!this._transport){h(new Error("Not connected"));return}((p=this._options)===null||p===void 0?void 0:p.enforceStrictCapabilities)===!0&&this.assertCapabilityForMethod(e.method),(m=s?.signal)===null||m===void 0||m.throwIfAborted();let E=this._requestMessageId++,_={...e,jsonrpc:"2.0",id:E};s?.onprogress&&(this._progressHandlers.set(E,s.onprogress),_.params={...e.params,_meta:{...((S=e.params)===null||S===void 0?void 0:S._meta)||{},progressToken:E}});let T=o(D=>{var F;this._responseHandlers.delete(E),this._progressHandlers.delete(E),this._cleanupTimeout(E),(F=this._transport)===null||F===void 0||F.send({jsonrpc:"2.0",method:"notifications/cancelled",params:{requestId:E,reason:String(D)}},{relatedRequestId:t,resumptionToken:l,onresumptiontoken:u}).catch(L=>this._onerror(new Error(`Failed to send cancellation: ${L}`))),h(D)},"cancel");this._responseHandlers.set(E,D=>{var F;if(!(!((F=s?.signal)===null||F===void 0)&&F.aborted)){if(D instanceof Error)return h(D);try{let L=r.parse(D.result);c(L)}catch(L){h(L)}}}),(P=s?.signal)===null||P===void 0||P.addEventListener("abort",()=>{var D;T((D=s?.signal)===null||D===void 0?void 0:D.reason)});let $=(g=s?.timeout)!==null&&g!==void 0?g:Gm,k=o(()=>T(new Ie(De.RequestTimeout,"Request timed out",{timeout:$})),"timeoutHandler");this._setupTimeout(E,$,s?.maxTotalTimeout,k,(b=s?.resetTimeoutOnProgress)!==null&&b!==void 0?b:!1),this._transport.send(_,{relatedRequestId:t,resumptionToken:l,onresumptiontoken:u}).catch(D=>{this._cleanupTimeout(E),h(D)})})}async notification(e,r){var s,t;if(!this._transport)throw new Error("Not connected");if(this.assertNotificationCapability(e.method),((t=(s=this._options)===null||s===void 0?void 0:s.debouncedNotificationMethods)!==null&&t!==void 0?t:[]).includes(e.method)&&!e.params&&!r?.relatedRequestId){if(this._pendingDebouncedNotifications.has(e.method))return;this._pendingDebouncedNotifications.add(e.method),Promise.resolve().then(()=>{var h;if(this._pendingDebouncedNotifications.delete(e.method),!this._transport)return;let p={...e,jsonrpc:"2.0"};(h=this._transport)===null||h===void 0||h.send(p,r).catch(m=>this._onerror(m))});return}let c={...e,jsonrpc:"2.0"};await this._transport.send(c,r)}setRequestHandler(e,r){let s=e.shape.method.value;this.assertRequestHandlerCapability(s),this._requestHandlers.set(s,(t,l)=>Promise.resolve(r(e.parse(t),l)))}removeRequestHandler(e){this._requestHandlers.delete(e)}assertCanSetRequestHandler(e){if(this._requestHandlers.has(e))throw new Error(`A request handler for ${e} already exists, which would be overridden`)}setNotificationHandler(e,r){this._notificationHandlers.set(e.shape.method.value,s=>Promise.resolve(r(e.parse(s))))}removeNotificationHandler(e){this._notificationHandlers.delete(e)}};function uu(a,e){return Object.entries(e).reduce((r,[s,t])=>(t&&typeof t=="object"?r[s]=r[s]?{...r[s],...t}:t:r[s]=t,r),{...a})}o(uu,"mergeCapabilities");var dd=Bo(cd(),1);var Yn=class extends kn{static{o(this,"Server")}constructor(e,r){var s;super(r),this._serverInfo=e,this._loggingLevels=new Map,this.LOG_LEVEL_SEVERITY=new Map(Ss.options.map((t,l)=>[t,l])),this.isMessageIgnored=(t,l)=>{let u=this._loggingLevels.get(l);return u?this.LOG_LEVEL_SEVERITY.get(t)<this.LOG_LEVEL_SEVERITY.get(u):!1},this._capabilities=(s=r?.capabilities)!==null&&s!==void 0?s:{},this._instructions=r?.instructions,this.setRequestHandler(Go,t=>this._oninitialize(t)),this.setNotificationHandler(Yo,()=>{var t;return(t=this.oninitialized)===null||t===void 0?void 0:t.call(this)}),this._capabilities.logging&&this.setRequestHandler(ti,async(t,l)=>{var u;let c=l.sessionId||((u=l.requestInfo)===null||u===void 0?void 0:u.headers["mcp-session-id"])||void 0,{level:h}=t.params,p=Ss.safeParse(h);return p.success&&this._loggingLevels.set(c,p.data),{}})}registerCapabilities(e){if(this.transport)throw new Error("Cannot register capabilities after connecting to transport");this._capabilities=uu(this._capabilities,e)}assertCapabilityForMethod(e){var r,s,t;switch(e){case"sampling/createMessage":if(!(!((r=this._clientCapabilities)===null||r===void 0)&&r.sampling))throw new Error(`Client does not support sampling (required for ${e})`);break;case"elicitation/create":if(!(!((s=this._clientCapabilities)===null||s===void 0)&&s.elicitation))throw new Error(`Client does not support elicitation (required for ${e})`);break;case"roots/list":if(!(!((t=this._clientCapabilities)===null||t===void 0)&&t.roots))throw new Error(`Client does not support listing roots (required for ${e})`);break;case"ping":break}}assertNotificationCapability(e){switch(e){case"notifications/message":if(!this._capabilities.logging)throw new Error(`Server does not support logging (required for ${e})`);break;case"notifications/resources/updated":case"notifications/resources/list_changed":if(!this._capabilities.resources)throw new Error(`Server does not support notifying about resources (required for ${e})`);break;case"notifications/tools/list_changed":if(!this._capabilities.tools)throw new Error(`Server does not support notifying of tool list changes (required for ${e})`);break;case"notifications/prompts/list_changed":if(!this._capabilities.prompts)throw new Error(`Server does not support notifying of prompt list changes (required for ${e})`);break;case"notifications/cancelled":break;case"notifications/progress":break}}assertRequestHandlerCapability(e){switch(e){case"sampling/createMessage":if(!this._capabilities.sampling)throw new Error(`Server does not support sampling (required for ${e})`);break;case"logging/setLevel":if(!this._capabilities.logging)throw new Error(`Server does not support logging (required for ${e})`);break;case"prompts/get":case"prompts/list":if(!this._capabilities.prompts)throw new Error(`Server does not support prompts (required for ${e})`);break;case"resources/list":case"resources/templates/list":case"resources/read":if(!this._capabilities.resources)throw new Error(`Server does not support resources (required for ${e})`);break;case"tools/call":case"tools/list":if(!this._capabilities.tools)throw new Error(`Server does not support tools (required for ${e})`);break;case"ping":case"initialize":break}}async _oninitialize(e){let r=e.params.protocolVersion;return this._clientCapabilities=e.params.capabilities,this._clientVersion=e.params.clientInfo,{protocolVersion:Wl.includes(r)?r:Zo,capabilities:this.getCapabilities(),serverInfo:this._serverInfo,...this._instructions&&{instructions:this._instructions}}}getClientCapabilities(){return this._clientCapabilities}getClientVersion(){return this._clientVersion}getCapabilities(){return this._capabilities}async ping(){return this.request({method:"ping"},gn)}async createMessage(e,r){return this.request({method:"sampling/createMessage",params:e},ri,r)}async elicitInput(e,r){let s=await this.request({method:"elicitation/create",params:e},ai,r);if(s.action==="accept"&&s.content)try{let t=new dd.default,l=t.compile(e.requestedSchema);if(!l(s.content))throw new Ie(De.InvalidParams,`Elicitation response content does not match requested schema: ${t.errorsText(l.errors)}`)}catch(t){throw t instanceof Ie?t:new Ie(De.InternalError,`Error validating elicitation response: ${t}`)}return s}async listRoots(e,r){return this.request({method:"roots/list",params:e},si,r)}async sendLoggingMessage(e,r){if(this._capabilities.logging&&!this.isMessageIgnored(e.level,r))return this.notification({method:"notifications/message",params:e})}async sendResourceUpdated(e){return this.notification({method:"notifications/resources/updated",params:e})}async sendResourceListChanged(){return this.notification({method:"notifications/resources/list_changed"})}async sendToolListChanged(){return this.notification({method:"notifications/tools/list_changed"})}async sendPromptListChanged(){return this.notification({method:"notifications/prompts/list_changed"})}};var hd=Symbol("Let zodToJsonSchema decide on which parser to use");var fd={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref",openAiAnyTypeName:"OpenAiAnyType"},pd=o(a=>typeof a=="string"?{...fd,name:a}:{...fd,...a},"getDefaultOptions");var md=o(a=>{let e=pd(a),r=e.name!==void 0?[...e.basePath,e.definitionPath,e.name]:e.basePath;return{...e,flags:{hasReferencedOpenAiAnyType:!1},currentPath:r,propertyPath:void 0,seen:new Map(Object.entries(e.definitions).map(([s,t])=>[t._def,{def:t._def,path:[...e.basePath,e.definitionPath,s],jsonSchema:void 0}]))}},"getRefs");function Ci(a,e,r,s){s?.errorMessages&&r&&(a.errorMessage={...a.errorMessage,[e]:r})}o(Ci,"addErrorMessage");function we(a,e,r,s,t){a[e]=r,Ci(a,e,s,t)}o(we,"setResponseValueAndErrors");var Kn=o((a,e)=>{let r=0;for(;r<a.length&&r<e.length&&a[r]===e[r];r++);return[(a.length-r).toString(),...e.slice(r)].join("/")},"getRelativePath");function Me(a){if(a.target!=="openAi")return{};let e=[...a.basePath,a.definitionPath,a.openAiAnyTypeName];return a.flags.hasReferencedOpenAiAnyType=!0,{$ref:a.$refStrategy==="relative"?Kn(e,a.currentPath):e.join("/")}}o(Me,"parseAnyDef");function gd(a,e){let r={type:"array"};return a.type?._def&&a.type?._def?.typeName!==M.ZodAny&&(r.items=ne(a.type._def,{...e,currentPath:[...e.currentPath,"items"]})),a.minLength&&we(r,"minItems",a.minLength.value,a.minLength.message,e),a.maxLength&&we(r,"maxItems",a.maxLength.value,a.maxLength.message,e),a.exactLength&&(we(r,"minItems",a.exactLength.value,a.exactLength.message,e),we(r,"maxItems",a.exactLength.value,a.exactLength.message,e)),r}o(gd,"parseArrayDef");function vd(a,e){let r={type:"integer",format:"int64"};if(!a.checks)return r;for(let s of a.checks)switch(s.kind){case"min":e.target==="jsonSchema7"?s.inclusive?we(r,"minimum",s.value,s.message,e):we(r,"exclusiveMinimum",s.value,s.message,e):(s.inclusive||(r.exclusiveMinimum=!0),we(r,"minimum",s.value,s.message,e));break;case"max":e.target==="jsonSchema7"?s.inclusive?we(r,"maximum",s.value,s.message,e):we(r,"exclusiveMaximum",s.value,s.message,e):(s.inclusive||(r.exclusiveMaximum=!0),we(r,"maximum",s.value,s.message,e));break;case"multipleOf":we(r,"multipleOf",s.value,s.message,e);break}return r}o(vd,"parseBigintDef");function yd(){return{type:"boolean"}}o(yd,"parseBooleanDef");function Jn(a,e){return ne(a.type._def,e)}o(Jn,"parseBrandedDef");var bd=o((a,e)=>ne(a.innerType._def,e),"parseCatchDef");function Oi(a,e,r){let s=r??e.dateStrategy;if(Array.isArray(s))return{anyOf:s.map((t,l)=>Oi(a,e,t))};switch(s){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return Av(a,e)}}o(Oi,"parseDateDef");var Av=o((a,e)=>{let r={type:"integer",format:"unix-time"};if(e.target==="openApi3")return r;for(let s of a.checks)switch(s.kind){case"min":we(r,"minimum",s.value,s.message,e);break;case"max":we(r,"maximum",s.value,s.message,e);break}return r},"integerDateParser");function _d(a,e){return{...ne(a.innerType._def,e),default:a.defaultValue()}}o(_d,"parseDefaultDef");function Sd(a,e){return e.effectStrategy==="input"?ne(a.schema._def,e):Me(e)}o(Sd,"parseEffectsDef");function wd(a){return{type:"string",enum:Array.from(a.values)}}o(wd,"parseEnumDef");var Cv=o(a=>"type"in a&&a.type==="string"?!1:"allOf"in a,"isJsonSchema7AllOfType");function Pd(a,e){let r=[ne(a.left._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),ne(a.right._def,{...e,currentPath:[...e.currentPath,"allOf","1"]})].filter(l=>!!l),s=e.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0,t=[];return r.forEach(l=>{if(Cv(l))t.push(...l.allOf),l.unevaluatedProperties===void 0&&(s=void 0);else{let u=l;if("additionalProperties"in l&&l.additionalProperties===!1){let{additionalProperties:c,...h}=l;u=h}else s=void 0;t.push(u)}}),t.length?{allOf:t,...s}:void 0}o(Pd,"parseIntersectionDef");function Ed(a,e){let r=typeof a.value;return r!=="bigint"&&r!=="number"&&r!=="boolean"&&r!=="string"?{type:Array.isArray(a.value)?"array":"object"}:e.target==="openApi3"?{type:r==="bigint"?"integer":r,enum:[a.value]}:{type:r==="bigint"?"integer":r,const:a.value}}o(Ed,"parseLiteralDef");var ki,Vt={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:o(()=>(ki===void 0&&(ki=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),ki),"emoji"),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function Xn(a,e){let r={type:"string"};if(a.checks)for(let s of a.checks)switch(s.kind){case"min":we(r,"minLength",typeof r.minLength=="number"?Math.max(r.minLength,s.value):s.value,s.message,e);break;case"max":we(r,"maxLength",typeof r.maxLength=="number"?Math.min(r.maxLength,s.value):s.value,s.message,e);break;case"email":switch(e.emailStrategy){case"format:email":Zt(r,"email",s.message,e);break;case"format:idn-email":Zt(r,"idn-email",s.message,e);break;case"pattern:zod":ft(r,Vt.email,s.message,e);break}break;case"url":Zt(r,"uri",s.message,e);break;case"uuid":Zt(r,"uuid",s.message,e);break;case"regex":ft(r,s.regex,s.message,e);break;case"cuid":ft(r,Vt.cuid,s.message,e);break;case"cuid2":ft(r,Vt.cuid2,s.message,e);break;case"startsWith":ft(r,RegExp(`^${Di(s.value,e)}`),s.message,e);break;case"endsWith":ft(r,RegExp(`${Di(s.value,e)}$`),s.message,e);break;case"datetime":Zt(r,"date-time",s.message,e);break;case"date":Zt(r,"date",s.message,e);break;case"time":Zt(r,"time",s.message,e);break;case"duration":Zt(r,"duration",s.message,e);break;case"length":we(r,"minLength",typeof r.minLength=="number"?Math.max(r.minLength,s.value):s.value,s.message,e),we(r,"maxLength",typeof r.maxLength=="number"?Math.min(r.maxLength,s.value):s.value,s.message,e);break;case"includes":{ft(r,RegExp(Di(s.value,e)),s.message,e);break}case"ip":{s.version!=="v6"&&Zt(r,"ipv4",s.message,e),s.version!=="v4"&&Zt(r,"ipv6",s.message,e);break}case"base64url":ft(r,Vt.base64url,s.message,e);break;case"jwt":ft(r,Vt.jwt,s.message,e);break;case"cidr":{s.version!=="v6"&&ft(r,Vt.ipv4Cidr,s.message,e),s.version!=="v4"&&ft(r,Vt.ipv6Cidr,s.message,e);break}case"emoji":ft(r,Vt.emoji(),s.message,e);break;case"ulid":{ft(r,Vt.ulid,s.message,e);break}case"base64":{switch(e.base64Strategy){case"format:binary":{Zt(r,"binary",s.message,e);break}case"contentEncoding:base64":{we(r,"contentEncoding","base64",s.message,e);break}case"pattern:zod":{ft(r,Vt.base64,s.message,e);break}}break}case"nanoid":ft(r,Vt.nanoid,s.message,e);case"toLowerCase":case"toUpperCase":case"trim":break;default:}return r}o(Xn,"parseStringDef");function Di(a,e){return e.patternStrategy==="escape"?kv(a):a}o(Di,"escapeLiteralCheckValue");var Ov=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function kv(a){let e="";for(let r=0;r<a.length;r++)Ov.has(a[r])||(e+="\\"),e+=a[r];return e}o(kv,"escapeNonAlphaNumeric");function Zt(a,e,r,s){a.format||a.anyOf?.some(t=>t.format)?(a.anyOf||(a.anyOf=[]),a.format&&(a.anyOf.push({format:a.format,...a.errorMessage&&s.errorMessages&&{errorMessage:{format:a.errorMessage.format}}}),delete a.format,a.errorMessage&&(delete a.errorMessage.format,Object.keys(a.errorMessage).length===0&&delete a.errorMessage)),a.anyOf.push({format:e,...r&&s.errorMessages&&{errorMessage:{format:r}}})):we(a,"format",e,r,s)}o(Zt,"addFormat");function ft(a,e,r,s){a.pattern||a.allOf?.some(t=>t.pattern)?(a.allOf||(a.allOf=[]),a.pattern&&(a.allOf.push({pattern:a.pattern,...a.errorMessage&&s.errorMessages&&{errorMessage:{pattern:a.errorMessage.pattern}}}),delete a.pattern,a.errorMessage&&(delete a.errorMessage.pattern,Object.keys(a.errorMessage).length===0&&delete a.errorMessage)),a.allOf.push({pattern:Rd(e,s),...r&&s.errorMessages&&{errorMessage:{pattern:r}}})):we(a,"pattern",Rd(e,s),r,s)}o(ft,"addPattern");function Rd(a,e){if(!e.applyRegexFlags||!a.flags)return a.source;let r={i:a.flags.includes("i"),m:a.flags.includes("m"),s:a.flags.includes("s")},s=r.i?a.source.toLowerCase():a.source,t="",l=!1,u=!1,c=!1;for(let h=0;h<s.length;h++){if(l){t+=s[h],l=!1;continue}if(r.i){if(u){if(s[h].match(/[a-z]/)){c?(t+=s[h],t+=`${s[h-2]}-${s[h]}`.toUpperCase(),c=!1):s[h+1]==="-"&&s[h+2]?.match(/[a-z]/)?(t+=s[h],c=!0):t+=`${s[h]}${s[h].toUpperCase()}`;continue}}else if(s[h].match(/[a-z]/)){t+=`[${s[h]}${s[h].toUpperCase()}]`;continue}}if(r.m){if(s[h]==="^"){t+=`(^|(?<=[\r
]))`;continue}else if(s[h]==="$"){t+=`($|(?=[\r
]))`;continue}}if(r.s&&s[h]==="."){t+=u?`${s[h]}\r
`:`[${s[h]}\r
]`;continue}t+=s[h],s[h]==="\\"?l=!0:u&&s[h]==="]"?u=!1:!u&&s[h]==="["&&(u=!0)}try{new RegExp(t)}catch{return console.warn(`Could not convert regex pattern at ${e.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),a.source}return t}o(Rd,"stringifyRegExpWithFlags");function eo(a,e){if(e.target==="openAi"&&console.warn("Warning: OpenAI may not support records in schemas! Try an array of key-value pairs instead."),e.target==="openApi3"&&a.keyType?._def.typeName===M.ZodEnum)return{type:"object",required:a.keyType._def.values,properties:a.keyType._def.values.reduce((s,t)=>({...s,[t]:ne(a.valueType._def,{...e,currentPath:[...e.currentPath,"properties",t]})??Me(e)}),{}),additionalProperties:e.rejectedAdditionalProperties};let r={type:"object",additionalProperties:ne(a.valueType._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??e.allowedAdditionalProperties};if(e.target==="openApi3")return r;if(a.keyType?._def.typeName===M.ZodString&&a.keyType._def.checks?.length){let{type:s,...t}=Xn(a.keyType._def,e);return{...r,propertyNames:t}}else{if(a.keyType?._def.typeName===M.ZodEnum)return{...r,propertyNames:{enum:a.keyType._def.values}};if(a.keyType?._def.typeName===M.ZodBranded&&a.keyType._def.type._def.typeName===M.ZodString&&a.keyType._def.type._def.checks?.length){let{type:s,...t}=Jn(a.keyType._def,e);return{...r,propertyNames:t}}}return r}o(eo,"parseRecordDef");function xd(a,e){if(e.mapStrategy==="record")return eo(a,e);let r=ne(a.keyType._def,{...e,currentPath:[...e.currentPath,"items","items","0"]})||Me(e),s=ne(a.valueType._def,{...e,currentPath:[...e.currentPath,"items","items","1"]})||Me(e);return{type:"array",maxItems:125,items:{type:"array",items:[r,s],minItems:2,maxItems:2}}}o(xd,"parseMapDef");function Td(a){let e=a.values,s=Object.keys(a.values).filter(l=>typeof e[e[l]]!="number").map(l=>e[l]),t=Array.from(new Set(s.map(l=>typeof l)));return{type:t.length===1?t[0]==="string"?"string":"number":["string","number"],enum:s}}o(Td,"parseNativeEnumDef");function Ad(a){return a.target==="openAi"?void 0:{not:Me({...a,currentPath:[...a.currentPath,"not"]})}}o(Ad,"parseNeverDef");function Cd(a){return a.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}o(Cd,"parseNullDef");var Ps={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function kd(a,e){if(e.target==="openApi3")return Od(a,e);let r=a.options instanceof Map?Array.from(a.options.values()):a.options;if(r.every(s=>s._def.typeName in Ps&&(!s._def.checks||!s._def.checks.length))){let s=r.reduce((t,l)=>{let u=Ps[l._def.typeName];return u&&!t.includes(u)?[...t,u]:t},[]);return{type:s.length>1?s:s[0]}}else if(r.every(s=>s._def.typeName==="ZodLiteral"&&!s.description)){let s=r.reduce((t,l)=>{let u=typeof l._def.value;switch(u){case"string":case"number":case"boolean":return[...t,u];case"bigint":return[...t,"integer"];case"object":if(l._def.value===null)return[...t,"null"];case"symbol":case"undefined":case"function":default:return t}},[]);if(s.length===r.length){let t=s.filter((l,u,c)=>c.indexOf(l)===u);return{type:t.length>1?t:t[0],enum:r.reduce((l,u)=>l.includes(u._def.value)?l:[...l,u._def.value],[])}}}else if(r.every(s=>s._def.typeName==="ZodEnum"))return{type:"string",enum:r.reduce((s,t)=>[...s,...t._def.values.filter(l=>!s.includes(l))],[])};return Od(a,e)}o(kd,"parseUnionDef");var Od=o((a,e)=>{let r=(a.options instanceof Map?Array.from(a.options.values()):a.options).map((s,t)=>ne(s._def,{...e,currentPath:[...e.currentPath,"anyOf",`${t}`]})).filter(s=>!!s&&(!e.strictUnions||typeof s=="object"&&Object.keys(s).length>0));return r.length?{anyOf:r}:void 0},"asAnyOf");function Dd(a,e){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(a.innerType._def.typeName)&&(!a.innerType._def.checks||!a.innerType._def.checks.length))return e.target==="openApi3"?{type:Ps[a.innerType._def.typeName],nullable:!0}:{type:[Ps[a.innerType._def.typeName],"null"]};if(e.target==="openApi3"){let s=ne(a.innerType._def,{...e,currentPath:[...e.currentPath]});return s&&"$ref"in s?{allOf:[s],nullable:!0}:s&&{...s,nullable:!0}}let r=ne(a.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","0"]});return r&&{anyOf:[r,{type:"null"}]}}o(Dd,"parseNullableDef");function Id(a,e){let r={type:"number"};if(!a.checks)return r;for(let s of a.checks)switch(s.kind){case"int":r.type="integer",Ci(r,"type",s.message,e);break;case"min":e.target==="jsonSchema7"?s.inclusive?we(r,"minimum",s.value,s.message,e):we(r,"exclusiveMinimum",s.value,s.message,e):(s.inclusive||(r.exclusiveMinimum=!0),we(r,"minimum",s.value,s.message,e));break;case"max":e.target==="jsonSchema7"?s.inclusive?we(r,"maximum",s.value,s.message,e):we(r,"exclusiveMaximum",s.value,s.message,e):(s.inclusive||(r.exclusiveMaximum=!0),we(r,"maximum",s.value,s.message,e));break;case"multipleOf":we(r,"multipleOf",s.value,s.message,e);break}return r}o(Id,"parseNumberDef");function Fd(a,e){let r=e.target==="openAi",s={type:"object",properties:{}},t=[],l=a.shape();for(let c in l){let h=l[c];if(h===void 0||h._def===void 0)continue;let p=Iv(h);p&&r&&(h._def.typeName==="ZodOptional"&&(h=h._def.innerType),h.isNullable()||(h=h.nullable()),p=!1);let m=ne(h._def,{...e,currentPath:[...e.currentPath,"properties",c],propertyPath:[...e.currentPath,"properties",c]});m!==void 0&&(s.properties[c]=m,p||t.push(c))}t.length&&(s.required=t);let u=Dv(a,e);return u!==void 0&&(s.additionalProperties=u),s}o(Fd,"parseObjectDef");function Dv(a,e){if(a.catchall._def.typeName!=="ZodNever")return ne(a.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]});switch(a.unknownKeys){case"passthrough":return e.allowedAdditionalProperties;case"strict":return e.rejectedAdditionalProperties;case"strip":return e.removeAdditionalStrategy==="strict"?e.allowedAdditionalProperties:e.rejectedAdditionalProperties}}o(Dv,"decideAdditionalProperties");function Iv(a){try{return a.isOptional()}catch{return!0}}o(Iv,"safeIsOptional");var $d=o((a,e)=>{if(e.currentPath.toString()===e.propertyPath?.toString())return ne(a.innerType._def,e);let r=ne(a.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","1"]});return r?{anyOf:[{not:Me(e)},r]}:Me(e)},"parseOptionalDef");var Ld=o((a,e)=>{if(e.pipeStrategy==="input")return ne(a.in._def,e);if(e.pipeStrategy==="output")return ne(a.out._def,e);let r=ne(a.in._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),s=ne(a.out._def,{...e,currentPath:[...e.currentPath,"allOf",r?"1":"0"]});return{allOf:[r,s].filter(t=>t!==void 0)}},"parsePipelineDef");function Nd(a,e){return ne(a.type._def,e)}o(Nd,"parsePromiseDef");function jd(a,e){let s={type:"array",uniqueItems:!0,items:ne(a.valueType._def,{...e,currentPath:[...e.currentPath,"items"]})};return a.minSize&&we(s,"minItems",a.minSize.value,a.minSize.message,e),a.maxSize&&we(s,"maxItems",a.maxSize.value,a.maxSize.message,e),s}o(jd,"parseSetDef");function Md(a,e){return a.rest?{type:"array",minItems:a.items.length,items:a.items.map((r,s)=>ne(r._def,{...e,currentPath:[...e.currentPath,"items",`${s}`]})).reduce((r,s)=>s===void 0?r:[...r,s],[]),additionalItems:ne(a.rest._def,{...e,currentPath:[...e.currentPath,"additionalItems"]})}:{type:"array",minItems:a.items.length,maxItems:a.items.length,items:a.items.map((r,s)=>ne(r._def,{...e,currentPath:[...e.currentPath,"items",`${s}`]})).reduce((r,s)=>s===void 0?r:[...r,s],[])}}o(Md,"parseTupleDef");function qd(a){return{not:Me(a)}}o(qd,"parseUndefinedDef");function zd(a){return Me(a)}o(zd,"parseUnknownDef");var Ud=o((a,e)=>ne(a.innerType._def,e),"parseReadonlyDef");var Bd=o((a,e,r)=>{switch(e){case M.ZodString:return Xn(a,r);case M.ZodNumber:return Id(a,r);case M.ZodObject:return Fd(a,r);case M.ZodBigInt:return vd(a,r);case M.ZodBoolean:return yd();case M.ZodDate:return Oi(a,r);case M.ZodUndefined:return qd(r);case M.ZodNull:return Cd(r);case M.ZodArray:return gd(a,r);case M.ZodUnion:case M.ZodDiscriminatedUnion:return kd(a,r);case M.ZodIntersection:return Pd(a,r);case M.ZodTuple:return Md(a,r);case M.ZodRecord:return eo(a,r);case M.ZodLiteral:return Ed(a,r);case M.ZodEnum:return wd(a);case M.ZodNativeEnum:return Td(a);case M.ZodNullable:return Dd(a,r);case M.ZodOptional:return $d(a,r);case M.ZodMap:return xd(a,r);case M.ZodSet:return jd(a,r);case M.ZodLazy:return()=>a.getter()._def;case M.ZodPromise:return Nd(a,r);case M.ZodNaN:case M.ZodNever:return Ad(r);case M.ZodEffects:return Sd(a,r);case M.ZodAny:return Me(r);case M.ZodUnknown:return zd(r);case M.ZodDefault:return _d(a,r);case M.ZodBranded:return Jn(a,r);case M.ZodReadonly:return Ud(a,r);case M.ZodCatch:return bd(a,r);case M.ZodPipeline:return Ld(a,r);case M.ZodFunction:case M.ZodVoid:case M.ZodSymbol:return;default:return(s=>{})(e)}},"selectParser");function ne(a,e,r=!1){let s=e.seen.get(a);if(e.override){let c=e.override?.(a,e,s,r);if(c!==hd)return c}if(s&&!r){let c=Fv(s,e);if(c!==void 0)return c}let t={def:a,path:e.currentPath,jsonSchema:void 0};e.seen.set(a,t);let l=Bd(a,a.typeName,e),u=typeof l=="function"?ne(l(),e):l;if(u&&$v(a,e,u),e.postProcess){let c=e.postProcess(u,a,e);return t.jsonSchema=u,c}return t.jsonSchema=u,u}o(ne,"parseDef");var Fv=o((a,e)=>{switch(e.$refStrategy){case"root":return{$ref:a.path.join("/")};case"relative":return{$ref:Kn(e.currentPath,a.path)};case"none":case"seen":return a.path.length<e.currentPath.length&&a.path.every((r,s)=>e.currentPath[s]===r)?(console.warn(`Recursive reference detected at ${e.currentPath.join("/")}! Defaulting to any`),Me(e)):e.$refStrategy==="seen"?Me(e):void 0}},"get$ref"),$v=o((a,e,r)=>(a.description&&(r.description=a.description,e.markdownDescription&&(r.markdownDescription=a.description)),r),"addMeta");var to=o((a,e)=>{let r=md(e),s=typeof e=="object"&&e.definitions?Object.entries(e.definitions).reduce((h,[p,m])=>({...h,[p]:ne(m._def,{...r,currentPath:[...r.basePath,r.definitionPath,p]},!0)??Me(r)}),{}):void 0,t=typeof e=="string"?e:e?.nameStrategy==="title"?void 0:e?.name,l=ne(a._def,t===void 0?r:{...r,currentPath:[...r.basePath,r.definitionPath,t]},!1)??Me(r),u=typeof e=="object"&&e.name!==void 0&&e.nameStrategy==="title"?e.name:void 0;u!==void 0&&(l.title=u),r.flags.hasReferencedOpenAiAnyType&&(s||(s={}),s[r.openAiAnyTypeName]||(s[r.openAiAnyTypeName]={type:["string","number","integer","boolean","array","null"],items:{$ref:r.$refStrategy==="relative"?"1":[...r.basePath,r.definitionPath,r.openAiAnyTypeName].join("/")}}));let c=t===void 0?s?{...l,[r.definitionPath]:s}:l:{$ref:[...r.$refStrategy==="relative"?[]:r.basePath,r.definitionPath,t].join("/"),[r.definitionPath]:{...s,[t]:l}};return r.target==="jsonSchema7"?c.$schema="http://json-schema.org/draft-07/schema#":(r.target==="jsonSchema2019-09"||r.target==="openAi")&&(c.$schema="https://json-schema.org/draft/2019-09/schema#"),r.target==="openAi"&&("anyOf"in c||"oneOf"in c||"allOf"in c||"type"in c&&Array.isArray(c.type))&&console.warn("Warning: OpenAI may not support schemas with unions as roots! Try wrapping it in an object property."),c},"zodToJsonSchema");var Ii;(function(a){a.Completable="McpCompletable"})(Ii||(Ii={}));var Qa=class extends ce{static{o(this,"Completable")}_parse(e){let{ctx:r}=this._processInputParams(e),s=r.data;return this._def.type._parse({data:s,path:r.path,parent:r})}unwrap(){return this._def.type}};Qa.create=(a,e)=>new Qa({type:a,typeName:Ii.Completable,complete:e.complete,...Lv(e)});function Lv(a){if(!a)return{};let{errorMap:e,invalid_type_error:r,required_error:s,description:t}=a;if(e&&(r||s))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:t}:{errorMap:o((u,c)=>{var h,p;let{message:m}=a;return u.code==="invalid_enum_value"?{message:m??c.defaultError}:typeof c.data>"u"?{message:(h=m??s)!==null&&h!==void 0?h:c.defaultError}:u.code!=="invalid_type"?{message:c.defaultError}:{message:(p=m??r)!==null&&p!==void 0?p:c.defaultError}},"customMap"),description:t}}o(Lv,"processCreateParams");var ao=class{static{o(this,"McpServer")}constructor(e,r){this._registeredResources={},this._registeredResourceTemplates={},this._registeredTools={},this._registeredPrompts={},this._toolHandlersInitialized=!1,this._completionHandlerInitialized=!1,this._resourceHandlersInitialized=!1,this._promptHandlersInitialized=!1,this.server=new Yn(e,r)}async connect(e){return await this.server.connect(e)}async close(){await this.server.close()}setToolRequestHandlers(){this._toolHandlersInitialized||(this.server.assertCanSetRequestHandler(An.shape.method.value),this.server.assertCanSetRequestHandler(Cn.shape.method.value),this.server.registerCapabilities({tools:{listChanged:!0}}),this.server.setRequestHandler(An,()=>({tools:Object.entries(this._registeredTools).filter(([,e])=>e.enabled).map(([e,r])=>{let s={name:e,title:r.title,description:r.description,inputSchema:r.inputSchema?to(r.inputSchema,{strictUnions:!0}):Nv,annotations:r.annotations,_meta:r._meta};return r.outputSchema&&(s.outputSchema=to(r.outputSchema,{strictUnions:!0})),s})})),this.server.setRequestHandler(Cn,async(e,r)=>{let s=this._registeredTools[e.params.name];if(!s)throw new Ie(De.InvalidParams,`Tool ${e.params.name} not found`);if(!s.enabled)throw new Ie(De.InvalidParams,`Tool ${e.params.name} disabled`);let t;if(s.inputSchema){let l=await s.inputSchema.safeParseAsync(e.params.arguments);if(!l.success)throw new Ie(De.InvalidParams,`Invalid arguments for tool ${e.params.name}: ${l.error.message}`);let u=l.data,c=s.callback;try{t=await Promise.resolve(c(u,r))}catch(h){t={content:[{type:"text",text:h instanceof Error?h.message:String(h)}],isError:!0}}}else{let l=s.callback;try{t=await Promise.resolve(l(r))}catch(u){t={content:[{type:"text",text:u instanceof Error?u.message:String(u)}],isError:!0}}}if(s.outputSchema&&!t.isError){if(!t.structuredContent)throw new Ie(De.InvalidParams,`Tool ${e.params.name} has an output schema but no structured content was provided`);let l=await s.outputSchema.safeParseAsync(t.structuredContent);if(!l.success)throw new Ie(De.InvalidParams,`Invalid structured content for tool ${e.params.name}: ${l.error.message}`)}return t}),this._toolHandlersInitialized=!0)}setCompletionRequestHandler(){this._completionHandlerInitialized||(this.server.assertCanSetRequestHandler(On.shape.method.value),this.server.registerCapabilities({completions:{}}),this.server.setRequestHandler(On,async e=>{switch(e.params.ref.type){case"ref/prompt":return this.handlePromptCompletion(e,e.params.ref);case"ref/resource":return this.handleResourceCompletion(e,e.params.ref);default:throw new Ie(De.InvalidParams,`Invalid completion reference: ${e.params.ref}`)}}),this._completionHandlerInitialized=!0)}async handlePromptCompletion(e,r){let s=this._registeredPrompts[r.name];if(!s)throw new Ie(De.InvalidParams,`Prompt ${r.name} not found`);if(!s.enabled)throw new Ie(De.InvalidParams,`Prompt ${r.name} disabled`);if(!s.argsSchema)return ro;let t=s.argsSchema.shape[e.params.argument.name];if(!(t instanceof Qa))return ro;let u=await t._def.complete(e.params.argument.value,e.params.context);return Wd(u)}async handleResourceCompletion(e,r){let s=Object.values(this._registeredResourceTemplates).find(u=>u.resourceTemplate.uriTemplate.toString()===r.uri);if(!s){if(this._registeredResources[r.uri])return ro;throw new Ie(De.InvalidParams,`Resource template ${e.params.ref.uri} not found`)}let t=s.resourceTemplate.completeCallback(e.params.argument.name);if(!t)return ro;let l=await t(e.params.argument.value,e.params.context);return Wd(l)}setResourceRequestHandlers(){this._resourceHandlersInitialized||(this.server.assertCanSetRequestHandler(Pn.shape.method.value),this.server.assertCanSetRequestHandler(En.shape.method.value),this.server.assertCanSetRequestHandler(Rn.shape.method.value),this.server.registerCapabilities({resources:{listChanged:!0}}),this.server.setRequestHandler(Pn,async(e,r)=>{let s=Object.entries(this._registeredResources).filter(([l,u])=>u.enabled).map(([l,u])=>({uri:l,name:u.name,...u.metadata})),t=[];for(let l of Object.values(this._registeredResourceTemplates)){if(!l.resourceTemplate.listCallback)continue;let u=await l.resourceTemplate.listCallback(r);for(let c of u.resources)t.push({...l.metadata,...c})}return{resources:[...s,...t]}}),this.server.setRequestHandler(En,async()=>({resourceTemplates:Object.entries(this._registeredResourceTemplates).map(([r,s])=>({name:r,uriTemplate:s.resourceTemplate.uriTemplate.toString(),...s.metadata}))})),this.server.setRequestHandler(Rn,async(e,r)=>{let s=new URL(e.params.uri),t=this._registeredResources[s.toString()];if(t){if(!t.enabled)throw new Ie(De.InvalidParams,`Resource ${s} disabled`);return t.readCallback(s,r)}for(let l of Object.values(this._registeredResourceTemplates)){let u=l.resourceTemplate.uriTemplate.match(s.toString());if(u)return l.readCallback(s,u,r)}throw new Ie(De.InvalidParams,`Resource ${s} not found`)}),this.setCompletionRequestHandler(),this._resourceHandlersInitialized=!0)}setPromptRequestHandlers(){this._promptHandlersInitialized||(this.server.assertCanSetRequestHandler(xn.shape.method.value),this.server.assertCanSetRequestHandler(Tn.shape.method.value),this.server.registerCapabilities({prompts:{listChanged:!0}}),this.server.setRequestHandler(xn,()=>({prompts:Object.entries(this._registeredPrompts).filter(([,e])=>e.enabled).map(([e,r])=>({name:e,title:r.title,description:r.description,arguments:r.argsSchema?Mv(r.argsSchema):void 0}))})),this.server.setRequestHandler(Tn,async(e,r)=>{let s=this._registeredPrompts[e.params.name];if(!s)throw new Ie(De.InvalidParams,`Prompt ${e.params.name} not found`);if(!s.enabled)throw new Ie(De.InvalidParams,`Prompt ${e.params.name} disabled`);if(s.argsSchema){let t=await s.argsSchema.safeParseAsync(e.params.arguments);if(!t.success)throw new Ie(De.InvalidParams,`Invalid arguments for prompt ${e.params.name}: ${t.error.message}`);let l=t.data,u=s.callback;return await Promise.resolve(u(l,r))}else{let t=s.callback;return await Promise.resolve(t(r))}}),this.setCompletionRequestHandler(),this._promptHandlersInitialized=!0)}resource(e,r,...s){let t;typeof s[0]=="object"&&(t=s.shift());let l=s[0];if(typeof r=="string"){if(this._registeredResources[r])throw new Error(`Resource ${r} is already registered`);let u=this._createRegisteredResource(e,void 0,r,t,l);return this.setResourceRequestHandlers(),this.sendResourceListChanged(),u}else{if(this._registeredResourceTemplates[e])throw new Error(`Resource template ${e} is already registered`);let u=this._createRegisteredResourceTemplate(e,void 0,r,t,l);return this.setResourceRequestHandlers(),this.sendResourceListChanged(),u}}registerResource(e,r,s,t){if(typeof r=="string"){if(this._registeredResources[r])throw new Error(`Resource ${r} is already registered`);let l=this._createRegisteredResource(e,s.title,r,s,t);return this.setResourceRequestHandlers(),this.sendResourceListChanged(),l}else{if(this._registeredResourceTemplates[e])throw new Error(`Resource template ${e} is already registered`);let l=this._createRegisteredResourceTemplate(e,s.title,r,s,t);return this.setResourceRequestHandlers(),this.sendResourceListChanged(),l}}_createRegisteredResource(e,r,s,t,l){let u={name:e,title:r,metadata:t,readCallback:l,enabled:!0,disable:o(()=>u.update({enabled:!1}),"disable"),enable:o(()=>u.update({enabled:!0}),"enable"),remove:o(()=>u.update({uri:null}),"remove"),update:o(c=>{typeof c.uri<"u"&&c.uri!==s&&(delete this._registeredResources[s],c.uri&&(this._registeredResources[c.uri]=u)),typeof c.name<"u"&&(u.name=c.name),typeof c.title<"u"&&(u.title=c.title),typeof c.metadata<"u"&&(u.metadata=c.metadata),typeof c.callback<"u"&&(u.readCallback=c.callback),typeof c.enabled<"u"&&(u.enabled=c.enabled),this.sendResourceListChanged()},"update")};return this._registeredResources[s]=u,u}_createRegisteredResourceTemplate(e,r,s,t,l){let u={resourceTemplate:s,title:r,metadata:t,readCallback:l,enabled:!0,disable:o(()=>u.update({enabled:!1}),"disable"),enable:o(()=>u.update({enabled:!0}),"enable"),remove:o(()=>u.update({name:null}),"remove"),update:o(c=>{typeof c.name<"u"&&c.name!==e&&(delete this._registeredResourceTemplates[e],c.name&&(this._registeredResourceTemplates[c.name]=u)),typeof c.title<"u"&&(u.title=c.title),typeof c.template<"u"&&(u.resourceTemplate=c.template),typeof c.metadata<"u"&&(u.metadata=c.metadata),typeof c.callback<"u"&&(u.readCallback=c.callback),typeof c.enabled<"u"&&(u.enabled=c.enabled),this.sendResourceListChanged()},"update")};return this._registeredResourceTemplates[e]=u,u}_createRegisteredPrompt(e,r,s,t,l){let u={title:r,description:s,argsSchema:t===void 0?void 0:f.object(t),callback:l,enabled:!0,disable:o(()=>u.update({enabled:!1}),"disable"),enable:o(()=>u.update({enabled:!0}),"enable"),remove:o(()=>u.update({name:null}),"remove"),update:o(c=>{typeof c.name<"u"&&c.name!==e&&(delete this._registeredPrompts[e],c.name&&(this._registeredPrompts[c.name]=u)),typeof c.title<"u"&&(u.title=c.title),typeof c.description<"u"&&(u.description=c.description),typeof c.argsSchema<"u"&&(u.argsSchema=f.object(c.argsSchema)),typeof c.callback<"u"&&(u.callback=c.callback),typeof c.enabled<"u"&&(u.enabled=c.enabled),this.sendPromptListChanged()},"update")};return this._registeredPrompts[e]=u,u}_createRegisteredTool(e,r,s,t,l,u,c,h){let p={title:r,description:s,inputSchema:t===void 0?void 0:f.object(t),outputSchema:l===void 0?void 0:f.object(l),annotations:u,_meta:c,callback:h,enabled:!0,disable:o(()=>p.update({enabled:!1}),"disable"),enable:o(()=>p.update({enabled:!0}),"enable"),remove:o(()=>p.update({name:null}),"remove"),update:o(m=>{typeof m.name<"u"&&m.name!==e&&(delete this._registeredTools[e],m.name&&(this._registeredTools[m.name]=p)),typeof m.title<"u"&&(p.title=m.title),typeof m.description<"u"&&(p.description=m.description),typeof m.paramsSchema<"u"&&(p.inputSchema=f.object(m.paramsSchema)),typeof m.callback<"u"&&(p.callback=m.callback),typeof m.annotations<"u"&&(p.annotations=m.annotations),typeof m._meta<"u"&&(p._meta=m._meta),typeof m.enabled<"u"&&(p.enabled=m.enabled),this.sendToolListChanged()},"update")};return this._registeredTools[e]=p,this.setToolRequestHandlers(),this.sendToolListChanged(),p}tool(e,...r){if(this._registeredTools[e])throw new Error(`Tool ${e} is already registered`);let s,t,l,u;if(typeof r[0]=="string"&&(s=r.shift()),r.length>1){let h=r[0];Hd(h)?(t=r.shift(),r.length>1&&typeof r[0]=="object"&&r[0]!==null&&!Hd(r[0])&&(u=r.shift())):typeof h=="object"&&h!==null&&(u=r.shift())}let c=r[0];return this._createRegisteredTool(e,void 0,s,t,l,u,void 0,c)}registerTool(e,r,s){if(this._registeredTools[e])throw new Error(`Tool ${e} is already registered`);let{title:t,description:l,inputSchema:u,outputSchema:c,annotations:h,_meta:p}=r;return this._createRegisteredTool(e,t,l,u,c,h,p,s)}prompt(e,...r){if(this._registeredPrompts[e])throw new Error(`Prompt ${e} is already registered`);let s;typeof r[0]=="string"&&(s=r.shift());let t;r.length>1&&(t=r.shift());let l=r[0],u=this._createRegisteredPrompt(e,void 0,s,t,l);return this.setPromptRequestHandlers(),this.sendPromptListChanged(),u}registerPrompt(e,r,s){if(this._registeredPrompts[e])throw new Error(`Prompt ${e} is already registered`);let{title:t,description:l,argsSchema:u}=r,c=this._createRegisteredPrompt(e,t,l,u,s);return this.setPromptRequestHandlers(),this.sendPromptListChanged(),c}isConnected(){return this.server.transport!==void 0}async sendLoggingMessage(e,r){return this.server.sendLoggingMessage(e,r)}sendResourceListChanged(){this.isConnected()&&this.server.sendResourceListChanged()}sendToolListChanged(){this.isConnected()&&this.server.sendToolListChanged()}sendPromptListChanged(){this.isConnected()&&this.server.sendPromptListChanged()}};var Nv={type:"object",properties:{}};function Hd(a){return typeof a!="object"||a===null?!1:Object.keys(a).length===0||Object.values(a).some(jv)}o(Hd,"isZodRawShape");function jv(a){return a!==null&&typeof a=="object"&&"parse"in a&&typeof a.parse=="function"&&"safeParse"in a&&typeof a.safeParse=="function"}o(jv,"isZodTypeLike");function Mv(a){return Object.entries(a.shape).map(([e,r])=>({name:e,description:r.description,required:!r.isOptional()}))}o(Mv,"promptArgumentsFromSchema");function Wd(a){return{completion:{values:a.slice(0,100),total:a.length,hasMore:a.length>100}}}o(Wd,"createCompletionResult");var ro={completion:{values:[],hasMore:!1}};import Zd from"node:process";var so=class{static{o(this,"ReadBuffer")}append(e){this._buffer=this._buffer?Buffer.concat([this._buffer,e]):e}readMessage(){if(!this._buffer)return null;let e=this._buffer.indexOf(`
`);if(e===-1)return null;let r=this._buffer.toString("utf8",0,e).replace(/\r$/,"");return this._buffer=this._buffer.subarray(e+1),qv(r)}clear(){this._buffer=void 0}};function qv(a){return tu.parse(JSON.parse(a))}o(qv,"deserializeMessage");function Vd(a){return JSON.stringify(a)+`
`}o(Vd,"serializeMessage");var no=class{static{o(this,"StdioServerTransport")}constructor(e=Zd.stdin,r=Zd.stdout){this._stdin=e,this._stdout=r,this._readBuffer=new so,this._started=!1,this._ondata=s=>{this._readBuffer.append(s),this.processReadBuffer()},this._onerror=s=>{var t;(t=this.onerror)===null||t===void 0||t.call(this,s)}}async start(){if(this._started)throw new Error("StdioServerTransport already started! If using Server class, note that connect() calls start() automatically.");this._started=!0,this._stdin.on("data",this._ondata),this._stdin.on("error",this._onerror)}processReadBuffer(){for(var e,r;;)try{let s=this._readBuffer.readMessage();if(s===null)break;(e=this.onmessage)===null||e===void 0||e.call(this,s)}catch(s){(r=this.onerror)===null||r===void 0||r.call(this,s)}}async close(){var e;this._stdin.off("data",this._ondata),this._stdin.off("error",this._onerror),this._stdin.listenerCount("data")===0&&this._stdin.pause(),this._readBuffer.clear(),(e=this.onclose)===null||e===void 0||e.call(this)}send(e){return new Promise(r=>{let s=Vd(e);this._stdout.write(s)?r():this._stdout.once("drain",r)})}};import{existsSync as zv}from"node:fs";import{resolve as Uv}from"node:path";var Bv=1e4,Hv=10,Gd=50,Wv="1.0.0",Vv=void 0,oo=null,Es=class extends Error{static{o(this,"ConfigError")}constructor(e){super(e),this.name="ConfigError"}};function Yd(){if(oo)return oo;let a=process.env.FOINDEX_API_KEY?.trim();if(!a)throw new Es("FOINDEX_API_KEY environment variable is required. Get your API key from https://www.xplusplus.ai/");let e=process.env.FO_SEMANTIC_MCP_NAME?.trim()||"fo-semantic-mcp",r=process.env.FO_SEMANTIC_MCP_VERSION?.trim()||Wv,t=(process.env.FOINDEX_DEV_API_URL?.trim()||"https://search.xplusplus.ai").replace(/\/$/,""),l=Fi(process.env.FO_SEARCH_TIMEOUT_MS,Bv),u=Qd(Fi(process.env.FO_SEARCH_DEFAULT_LIMIT,Hv)),c=Qd(Fi(process.env.FO_SEARCH_MAX_LIMIT,Gd)),h=Vv,p=process.env.FO_SEARCH_DEFAULT_THRESHOLD?.trim()||process.env.FO_THRESHOLD?.trim();if(p){let P=Number.parseFloat(p);Number.isFinite(P)&&P>=0&&P<=1?h=P:console.warn(`Warning: Threshold must be between 0 and 1. Got: ${p}. Ignoring.`)}let m,S=process.env.FO_LOCAL_ASSETS_PATH?.trim();if(S){let P=Uv(S);zv(P)?m=P:(console.warn(`Warning: F&O installation not found at path: ${P}`),console.warn("Local file reading will not be available, but search functionality will work."))}return oo={serverName:e,serverVersion:r,searchApiBaseUrl:t,apiKey:a,localAssetsPath:m,requestTimeoutMs:l,defaultLimit:u,hardLimit:c,defaultThreshold:h},oo}o(Yd,"getConfig");function Fi(a,e){if(!a)return e;let r=Number.parseInt(a,10);return!Number.isFinite(r)||r<=0?e:r}o(Fi,"parsePositiveInt");function Qd(a){return Math.max(1,Math.min(Gd,a))}o(Qd,"clampLimit");var Kd={debug:10,info:20,warn:30,error:40},Zv=Qv(process.env.LOG_LEVEL);function Ga(a){return{debug:o((e,r)=>io("debug",e,r,a),"debug"),info:o((e,r)=>io("info",e,r,a),"info"),warn:o((e,r)=>io("warn",e,r,a),"warn"),error:o((e,r)=>io("error",e,r,a),"error")}}o(Ga,"createLogger");function io(a,e,r,s){if(Kd[a]<Kd[Zv])return;let t=new Date().toISOString(),l=s?`[${s}]`:"",u=e instanceof Error?{error:Gv(e),meta:r}:{message:e,meta:r},c=`${t} ${a.toUpperCase()} ${l}`.trim();switch(a){case"debug":case"info":console.log(c,u);break;case"warn":console.warn(c,u);break;case"error":console.error(c,u);break}}o(io,"emit");function Qv(a){switch((a||"").toLowerCase()){case"debug":return"debug";case"info":return"info";case"warn":return"warn";case"error":return"error";default:return"info"}}o(Qv,"normaliseLevel");function Gv(a){return{name:a.name,message:a.message,stack:a.stack}}o(Gv,"serializeError");import Sy from"node:http";import wy from"node:https";import Xa from"node:zlib";import Of,{PassThrough as kf,pipeline as es}from"node:stream";import{Buffer as bo}from"node:buffer";function Yv(a){if(!/^data:/i.test(a))throw new TypeError('`uri` does not appear to be a Data URI (must begin with "data:")');a=a.replace(/\r?\n/g,"");let e=a.indexOf(",");if(e===-1||e<=4)throw new TypeError("malformed data: URI");let r=a.substring(5,e).split(";"),s="",t=!1,l=r[0]||"text/plain",u=l;for(let m=1;m<r.length;m++)r[m]==="base64"?t=!0:r[m]&&(u+=`;${r[m]}`,r[m].indexOf("charset=")===0&&(s=r[m].substring(8)));!r[0]&&!s.length&&(u+=";charset=US-ASCII",s="US-ASCII");let c=t?"base64":"ascii",h=unescape(a.substring(e+1)),p=Buffer.from(h,c);return p.type=l,p.typeFull=u,p.charset=s,p}o(Yv,"dataUriToBuffer");var Jd=Yv;Rs();uo();import Br,{PassThrough as gf}from"node:stream";import{types as vf,deprecate as Bi,promisify as fy}from"node:util";import{Buffer as Nt}from"node:buffer";var wr=class extends Error{static{o(this,"FetchBaseError")}constructor(e,r){super(e),Error.captureStackTrace(this,this.constructor),this.type=r}get name(){return this.constructor.name}get[Symbol.toStringTag](){return this.constructor.name}};var bt=class extends wr{static{o(this,"FetchError")}constructor(e,r,s){super(e,r),s&&(this.code=this.errno=s.code,this.erroredSysCall=s.syscall)}};var co=Symbol.toStringTag,Mi=o(a=>typeof a=="object"&&typeof a.append=="function"&&typeof a.delete=="function"&&typeof a.get=="function"&&typeof a.getAll=="function"&&typeof a.has=="function"&&typeof a.set=="function"&&typeof a.sort=="function"&&a[co]==="URLSearchParams","isURLSearchParameters"),Ts=o(a=>a&&typeof a=="object"&&typeof a.arrayBuffer=="function"&&typeof a.type=="string"&&typeof a.stream=="function"&&typeof a.constructor=="function"&&/^(Blob|File)$/.test(a[co]),"isBlob"),lf=o(a=>typeof a=="object"&&(a[co]==="AbortSignal"||a[co]==="EventTarget"),"isAbortSignal"),uf=o((a,e)=>{let r=new URL(e).hostname,s=new URL(a).hostname;return r===s||r.endsWith(`.${s}`)},"isDomainOrSubdomain"),cf=o((a,e)=>{let r=new URL(e).protocol,s=new URL(a).protocol;return r===s},"isSameProtocol");var hy=fy(Br.pipeline),_t=Symbol("Body internals"),ir=class{static{o(this,"Body")}constructor(e,{size:r=0}={}){let s=null;e===null?e=null:Mi(e)?e=Nt.from(e.toString()):Ts(e)||Nt.isBuffer(e)||(vf.isAnyArrayBuffer(e)?e=Nt.from(e):ArrayBuffer.isView(e)?e=Nt.from(e.buffer,e.byteOffset,e.byteLength):e instanceof Br||(e instanceof ya?(e=of(e),s=e.type.split("=")[1]):e=Nt.from(String(e))));let t=e;Nt.isBuffer(e)?t=Br.Readable.from(e):Ts(e)&&(t=Br.Readable.from(e.stream())),this[_t]={body:e,stream:t,boundary:s,disturbed:!1,error:null},this.size=r,e instanceof Br&&e.on("error",l=>{let u=l instanceof wr?l:new bt(`Invalid response body while trying to fetch ${this.url}: ${l.message}`,"system",l);this[_t].error=u})}get body(){return this[_t].stream}get bodyUsed(){return this[_t].disturbed}async arrayBuffer(){let{buffer:e,byteOffset:r,byteLength:s}=await Ui(this);return e.slice(r,r+s)}async formData(){let e=this.headers.get("content-type");if(e.startsWith("application/x-www-form-urlencoded")){let s=new ya,t=new URLSearchParams(await this.text());for(let[l,u]of t)s.append(l,u);return s}let{toFormData:r}=await Promise.resolve().then(()=>(mf(),pf));return r(this.body,e)}async blob(){let e=this.headers&&this.headers.get("content-type")||this[_t].body&&this[_t].body.type||"",r=await this.arrayBuffer();return new Sr([r],{type:e})}async json(){let e=await this.text();return JSON.parse(e)}async text(){let e=await Ui(this);return new TextDecoder().decode(e)}buffer(){return Ui(this)}};ir.prototype.buffer=Bi(ir.prototype.buffer,"Please use 'response.arrayBuffer()' instead of 'response.buffer()'","node-fetch#buffer");Object.defineProperties(ir.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0},data:{get:Bi(()=>{},"data doesn't exist, use json(), text(), arrayBuffer(), or body instead","https://github.com/node-fetch/node-fetch/issues/1000 (response)")}});async function Ui(a){if(a[_t].disturbed)throw new TypeError(`body used already for: ${a.url}`);if(a[_t].disturbed=!0,a[_t].error)throw a[_t].error;let{body:e}=a;if(e===null)return Nt.alloc(0);if(!(e instanceof Br))return Nt.alloc(0);let r=[],s=0;try{for await(let t of e){if(a.size>0&&s+t.length>a.size){let l=new bt(`content size at ${a.url} over limit: ${a.size}`,"max-size");throw e.destroy(l),l}s+=t.length,r.push(t)}}catch(t){throw t instanceof wr?t:new bt(`Invalid response body while trying to fetch ${a.url}: ${t.message}`,"system",t)}if(e.readableEnded===!0||e._readableState.ended===!0)try{return r.every(t=>typeof t=="string")?Nt.from(r.join("")):Nt.concat(r,s)}catch(t){throw new bt(`Could not create Buffer from response body for ${a.url}: ${t.message}`,"system",t)}else throw new bt(`Premature close of server response while trying to fetch ${a.url}`)}o(Ui,"consumeBody");var Ka=o((a,e)=>{let r,s,{body:t}=a[_t];if(a.bodyUsed)throw new Error("cannot clone body after it is used");return t instanceof Br&&typeof t.getBoundary!="function"&&(r=new gf({highWaterMark:e}),s=new gf({highWaterMark:e}),t.pipe(r),t.pipe(s),a[_t].stream=r,t=s),t},"clone"),py=Bi(a=>a.getBoundary(),"form-data doesn't follow the spec and requires special treatment. Use alternative package","https://github.com/node-fetch/node-fetch/issues/1167"),po=o((a,e)=>a===null?null:typeof a=="string"?"text/plain;charset=UTF-8":Mi(a)?"application/x-www-form-urlencoded;charset=UTF-8":Ts(a)?a.type||null:Nt.isBuffer(a)||vf.isAnyArrayBuffer(a)||ArrayBuffer.isView(a)?null:a instanceof ya?`multipart/form-data; boundary=${e[_t].boundary}`:a&&typeof a.getBoundary=="function"?`multipart/form-data;boundary=${py(a)}`:a instanceof Br?null:"text/plain;charset=UTF-8","extractContentType"),yf=o(a=>{let{body:e}=a[_t];return e===null?0:Ts(e)?e.size:Nt.isBuffer(e)?e.length:e&&typeof e.getLengthSync=="function"&&e.hasKnownLength&&e.hasKnownLength()?e.getLengthSync():null},"getTotalBytes"),bf=o(async(a,{body:e})=>{e===null?a.end():await hy(e,a)},"writeToStream");import{types as _f}from"node:util";import go from"node:http";var mo=typeof go.validateHeaderName=="function"?go.validateHeaderName:a=>{if(!/^[\^`\-\w!#$%&'*+.|~]+$/.test(a)){let e=new TypeError(`Header name must be a valid HTTP token [${a}]`);throw Object.defineProperty(e,"code",{value:"ERR_INVALID_HTTP_TOKEN"}),e}},Hi=typeof go.validateHeaderValue=="function"?go.validateHeaderValue:(a,e)=>{if(/[^\t\u0020-\u007E\u0080-\u00FF]/.test(e)){let r=new TypeError(`Invalid character in header content ["${a}"]`);throw Object.defineProperty(r,"code",{value:"ERR_INVALID_CHAR"}),r}},Pt=class a extends URLSearchParams{static{o(this,"Headers")}constructor(e){let r=[];if(e instanceof a){let s=e.raw();for(let[t,l]of Object.entries(s))r.push(...l.map(u=>[t,u]))}else if(e!=null)if(typeof e=="object"&&!_f.isBoxedPrimitive(e)){let s=e[Symbol.iterator];if(s==null)r.push(...Object.entries(e));else{if(typeof s!="function")throw new TypeError("Header pairs must be iterable");r=[...e].map(t=>{if(typeof t!="object"||_f.isBoxedPrimitive(t))throw new TypeError("Each header pair must be an iterable object");return[...t]}).map(t=>{if(t.length!==2)throw new TypeError("Each header pair must be a name/value tuple");return[...t]})}}else throw new TypeError("Failed to construct 'Headers': The provided value is not of type '(sequence<sequence<ByteString>> or record<ByteString, ByteString>)");return r=r.length>0?r.map(([s,t])=>(mo(s),Hi(s,String(t)),[String(s).toLowerCase(),String(t)])):void 0,super(r),new Proxy(this,{get(s,t,l){switch(t){case"append":case"set":return(u,c)=>(mo(u),Hi(u,String(c)),URLSearchParams.prototype[t].call(s,String(u).toLowerCase(),String(c)));case"delete":case"has":case"getAll":return u=>(mo(u),URLSearchParams.prototype[t].call(s,String(u).toLowerCase()));case"keys":return()=>(s.sort(),new Set(URLSearchParams.prototype.keys.call(s)).keys());default:return Reflect.get(s,t,l)}}})}get[Symbol.toStringTag](){return this.constructor.name}toString(){return Object.prototype.toString.call(this)}get(e){let r=this.getAll(e);if(r.length===0)return null;let s=r.join(", ");return/^content-encoding$/i.test(e)&&(s=s.toLowerCase()),s}forEach(e,r=void 0){for(let s of this.keys())Reflect.apply(e,r,[this.get(s),s,this])}*values(){for(let e of this.keys())yield this.get(e)}*entries(){for(let e of this.keys())yield[e,this.get(e)]}[Symbol.iterator](){return this.entries()}raw(){return[...this.keys()].reduce((e,r)=>(e[r]=this.getAll(r),e),{})}[Symbol.for("nodejs.util.inspect.custom")](){return[...this.keys()].reduce((e,r)=>{let s=this.getAll(r);return r==="host"?e[r]=s[0]:e[r]=s.length>1?s:s[0],e},{})}};Object.defineProperties(Pt.prototype,["get","entries","forEach","values"].reduce((a,e)=>(a[e]={enumerable:!0},a),{}));function Sf(a=[]){return new Pt(a.reduce((e,r,s,t)=>(s%2===0&&e.push(t.slice(s,s+2)),e),[]).filter(([e,r])=>{try{return mo(e),Hi(e,String(r)),!0}catch{return!1}}))}o(Sf,"fromRawHeaders");var my=new Set([301,302,303,307,308]),vo=o(a=>my.has(a),"isRedirect");var Qt=Symbol("Response internals"),jt=class a extends ir{static{o(this,"Response")}constructor(e=null,r={}){super(e,r);let s=r.status!=null?r.status:200,t=new Pt(r.headers);if(e!==null&&!t.has("Content-Type")){let l=po(e,this);l&&t.append("Content-Type",l)}this[Qt]={type:"default",url:r.url,status:s,statusText:r.statusText||"",headers:t,counter:r.counter,highWaterMark:r.highWaterMark}}get type(){return this[Qt].type}get url(){return this[Qt].url||""}get status(){return this[Qt].status}get ok(){return this[Qt].status>=200&&this[Qt].status<300}get redirected(){return this[Qt].counter>0}get statusText(){return this[Qt].statusText}get headers(){return this[Qt].headers}get highWaterMark(){return this[Qt].highWaterMark}clone(){return new a(Ka(this,this.highWaterMark),{type:this.type,url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok,redirected:this.redirected,size:this.size,highWaterMark:this.highWaterMark})}static redirect(e,r=302){if(!vo(r))throw new RangeError('Failed to execute "redirect" on "response": Invalid status code');return new a(null,{headers:{location:new URL(e).toString()},status:r})}static error(){let e=new a(null,{status:0,statusText:""});return e[Qt].type="error",e}static json(e=void 0,r={}){let s=JSON.stringify(e);if(s===void 0)throw new TypeError("data is not JSON serializable");let t=new Pt(r&&r.headers);return t.has("content-type")||t.set("content-type","application/json"),new a(s,{...r,headers:t})}get[Symbol.toStringTag](){return"Response"}};Object.defineProperties(jt.prototype,{type:{enumerable:!0},url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}});import{format as yy}from"node:url";import{deprecate as by}from"node:util";var wf=o(a=>{if(a.search)return a.search;let e=a.href.length-1,r=a.hash||(a.href[e]==="#"?"#":"");return a.href[e-r.length]==="?"?"?":""},"getSearch");import{isIP as gy}from"node:net";function Pf(a,e=!1){return a==null||(a=new URL(a),/^(about|blob|data):$/.test(a.protocol))?"no-referrer":(a.username="",a.password="",a.hash="",e&&(a.pathname="",a.search=""),a)}o(Pf,"stripURLForUseAsAReferrer");var Ef=new Set(["","no-referrer","no-referrer-when-downgrade","same-origin","origin","strict-origin","origin-when-cross-origin","strict-origin-when-cross-origin","unsafe-url"]),Rf="strict-origin-when-cross-origin";function xf(a){if(!Ef.has(a))throw new TypeError(`Invalid referrerPolicy: ${a}`);return a}o(xf,"validateReferrerPolicy");function vy(a){if(/^(http|ws)s:$/.test(a.protocol))return!0;let e=a.host.replace(/(^\[)|(]$)/g,""),r=gy(e);return r===4&&/^127\./.test(e)||r===6&&/^(((0+:){7})|(::(0+:){0,6}))0*1$/.test(e)?!0:a.host==="localhost"||a.host.endsWith(".localhost")?!1:a.protocol==="file:"}o(vy,"isOriginPotentiallyTrustworthy");function Ja(a){return/^about:(blank|srcdoc)$/.test(a)||a.protocol==="data:"||/^(blob|filesystem):$/.test(a.protocol)?!0:vy(a)}o(Ja,"isUrlPotentiallyTrustworthy");function Tf(a,{referrerURLCallback:e,referrerOriginCallback:r}={}){if(a.referrer==="no-referrer"||a.referrerPolicy==="")return null;let s=a.referrerPolicy;if(a.referrer==="about:client")return"no-referrer";let t=a.referrer,l=Pf(t),u=Pf(t,!0);l.toString().length>4096&&(l=u),e&&(l=e(l)),r&&(u=r(u));let c=new URL(a.url);switch(s){case"no-referrer":return"no-referrer";case"origin":return u;case"unsafe-url":return l;case"strict-origin":return Ja(l)&&!Ja(c)?"no-referrer":u.toString();case"strict-origin-when-cross-origin":return l.origin===c.origin?l:Ja(l)&&!Ja(c)?"no-referrer":u;case"same-origin":return l.origin===c.origin?l:"no-referrer";case"origin-when-cross-origin":return l.origin===c.origin?l:u;case"no-referrer-when-downgrade":return Ja(l)&&!Ja(c)?"no-referrer":l;default:throw new TypeError(`Invalid referrerPolicy: ${s}`)}}o(Tf,"determineRequestsReferrer");function Af(a){let e=(a.get("referrer-policy")||"").split(/[,\s]+/),r="";for(let s of e)s&&Ef.has(s)&&(r=s);return r}o(Af,"parseReferrerPolicyFromHeader");var Je=Symbol("Request internals"),Cs=o(a=>typeof a=="object"&&typeof a[Je]=="object","isRequest"),_y=by(()=>{},".data is not a valid RequestInit property, use .body instead","https://github.com/node-fetch/node-fetch/issues/1000 (request)"),_a=class a extends ir{static{o(this,"Request")}constructor(e,r={}){let s;if(Cs(e)?s=new URL(e.url):(s=new URL(e),e={}),s.username!==""||s.password!=="")throw new TypeError(`${s} is an url with embedded credentials.`);let t=r.method||e.method||"GET";if(/^(delete|get|head|options|post|put)$/i.test(t)&&(t=t.toUpperCase()),!Cs(r)&&"data"in r&&_y(),(r.body!=null||Cs(e)&&e.body!==null)&&(t==="GET"||t==="HEAD"))throw new TypeError("Request with GET/HEAD method cannot have body");let l=r.body?r.body:Cs(e)&&e.body!==null?Ka(e):null;super(l,{size:r.size||e.size||0});let u=new Pt(r.headers||e.headers||{});if(l!==null&&!u.has("Content-Type")){let p=po(l,this);p&&u.set("Content-Type",p)}let c=Cs(e)?e.signal:null;if("signal"in r&&(c=r.signal),c!=null&&!lf(c))throw new TypeError("Expected signal to be an instanceof AbortSignal or EventTarget");let h=r.referrer==null?e.referrer:r.referrer;if(h==="")h="no-referrer";else if(h){let p=new URL(h);h=/^about:(\/\/)?client$/.test(p)?"client":p}else h=void 0;this[Je]={method:t,redirect:r.redirect||e.redirect||"follow",headers:u,parsedURL:s,signal:c,referrer:h},this.follow=r.follow===void 0?e.follow===void 0?20:e.follow:r.follow,this.compress=r.compress===void 0?e.compress===void 0?!0:e.compress:r.compress,this.counter=r.counter||e.counter||0,this.agent=r.agent||e.agent,this.highWaterMark=r.highWaterMark||e.highWaterMark||16384,this.insecureHTTPParser=r.insecureHTTPParser||e.insecureHTTPParser||!1,this.referrerPolicy=r.referrerPolicy||e.referrerPolicy||""}get method(){return this[Je].method}get url(){return yy(this[Je].parsedURL)}get headers(){return this[Je].headers}get redirect(){return this[Je].redirect}get signal(){return this[Je].signal}get referrer(){if(this[Je].referrer==="no-referrer")return"";if(this[Je].referrer==="client")return"about:client";if(this[Je].referrer)return this[Je].referrer.toString()}get referrerPolicy(){return this[Je].referrerPolicy}set referrerPolicy(e){this[Je].referrerPolicy=xf(e)}clone(){return new a(this)}get[Symbol.toStringTag](){return"Request"}};Object.defineProperties(_a.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0},referrer:{enumerable:!0},referrerPolicy:{enumerable:!0}});var Cf=o(a=>{let{parsedURL:e}=a[Je],r=new Pt(a[Je].headers);r.has("Accept")||r.set("Accept","*/*");let s=null;if(a.body===null&&/^(post|put)$/i.test(a.method)&&(s="0"),a.body!==null){let c=yf(a);typeof c=="number"&&!Number.isNaN(c)&&(s=String(c))}s&&r.set("Content-Length",s),a.referrerPolicy===""&&(a.referrerPolicy=Rf),a.referrer&&a.referrer!=="no-referrer"?a[Je].referrer=Tf(a):a[Je].referrer="no-referrer",a[Je].referrer instanceof URL&&r.set("Referer",a.referrer),r.has("User-Agent")||r.set("User-Agent","node-fetch"),a.compress&&!r.has("Accept-Encoding")&&r.set("Accept-Encoding","gzip, deflate, br");let{agent:t}=a;typeof t=="function"&&(t=t(e));let l=wf(e),u={path:e.pathname+l,method:a.method,headers:r[Symbol.for("nodejs.util.inspect.custom")](),insecureHTTPParser:a.insecureHTTPParser,agent:t};return{parsedURL:e,options:u}},"getNodeRequestOptions");var yo=class extends wr{static{o(this,"AbortError")}constructor(e,r="aborted"){super(e,r)}};uo();qi();var Py=new Set(["data:","http:","https:"]);async function _o(a,e){return new Promise((r,s)=>{let t=new _a(a,e),{parsedURL:l,options:u}=Cf(t);if(!Py.has(l.protocol))throw new TypeError(`node-fetch cannot load ${a}. URL scheme "${l.protocol.replace(/:$/,"")}" is not supported.`);if(l.protocol==="data:"){let b=Jd(t.url),E=new jt(b,{headers:{"Content-Type":b.typeFull}});r(E);return}let c=(l.protocol==="https:"?wy:Sy).request,{signal:h}=t,p=null,m=o(()=>{let b=new yo("The operation was aborted.");s(b),t.body&&t.body instanceof Of.Readable&&t.body.destroy(b),!(!p||!p.body)&&p.body.emit("error",b)},"abort");if(h&&h.aborted){m();return}let S=o(()=>{m(),g()},"abortAndFinalize"),P=c(l.toString(),u);h&&h.addEventListener("abort",S);let g=o(()=>{P.abort(),h&&h.removeEventListener("abort",S)},"finalize");P.on("error",b=>{s(new bt(`request to ${t.url} failed, reason: ${b.message}`,"system",b)),g()}),Ey(P,b=>{p&&p.body&&p.body.destroy(b)}),process.version<"v14"&&P.on("socket",b=>{let E;b.prependListener("end",()=>{E=b._eventsCount}),b.prependListener("close",_=>{if(p&&E<b._eventsCount&&!_){let T=new Error("Premature close");T.code="ERR_STREAM_PREMATURE_CLOSE",p.body.emit("error",T)}})}),P.on("response",b=>{P.setTimeout(0);let E=Sf(b.rawHeaders);if(vo(b.statusCode)){let D=E.get("Location"),F=null;try{F=D===null?null:new URL(D,t.url)}catch{if(t.redirect!=="manual"){s(new bt(`uri requested responds with an invalid redirect URL: ${D}`,"invalid-redirect")),g();return}}switch(t.redirect){case"error":s(new bt(`uri requested responds with a redirect, redirect mode is set to error: ${t.url}`,"no-redirect")),g();return;case"manual":break;case"follow":{if(F===null)break;if(t.counter>=t.follow){s(new bt(`maximum redirect reached at: ${t.url}`,"max-redirect")),g();return}let L={headers:new Pt(t.headers),follow:t.follow,counter:t.counter+1,agent:t.agent,compress:t.compress,method:t.method,body:Ka(t),signal:t.signal,size:t.size,referrer:t.referrer,referrerPolicy:t.referrerPolicy};if(!uf(t.url,F)||!cf(t.url,F))for(let Q of["authorization","www-authenticate","cookie","cookie2"])L.headers.delete(Q);if(b.statusCode!==303&&t.body&&e.body instanceof Of.Readable){s(new bt("Cannot follow redirect with body being a readable stream","unsupported-redirect")),g();return}(b.statusCode===303||(b.statusCode===301||b.statusCode===302)&&t.method==="POST")&&(L.method="GET",L.body=void 0,L.headers.delete("content-length"));let K=Af(E);K&&(L.referrerPolicy=K),r(_o(new _a(F,L))),g();return}default:return s(new TypeError(`Redirect option '${t.redirect}' is not a valid value of RequestRedirect`))}}h&&b.once("end",()=>{h.removeEventListener("abort",S)});let _=es(b,new kf,D=>{D&&s(D)});process.version<"v12.10"&&b.on("aborted",S);let T={url:t.url,status:b.statusCode,statusText:b.statusMessage,headers:E,size:t.size,counter:t.counter,highWaterMark:t.highWaterMark},$=E.get("Content-Encoding");if(!t.compress||t.method==="HEAD"||$===null||b.statusCode===204||b.statusCode===304){p=new jt(_,T),r(p);return}let k={flush:Xa.Z_SYNC_FLUSH,finishFlush:Xa.Z_SYNC_FLUSH};if($==="gzip"||$==="x-gzip"){_=es(_,Xa.createGunzip(k),D=>{D&&s(D)}),p=new jt(_,T),r(p);return}if($==="deflate"||$==="x-deflate"){let D=es(b,new kf,F=>{F&&s(F)});D.once("data",F=>{(F[0]&15)===8?_=es(_,Xa.createInflate(),L=>{L&&s(L)}):_=es(_,Xa.createInflateRaw(),L=>{L&&s(L)}),p=new jt(_,T),r(p)}),D.once("end",()=>{p||(p=new jt(_,T),r(p))});return}if($==="br"){_=es(_,Xa.createBrotliDecompress(),D=>{D&&s(D)}),p=new jt(_,T),r(p);return}p=new jt(_,T),r(p)}),bf(P,t).catch(s)})}o(_o,"fetch");function Ey(a,e){let r=bo.from(`0\r
\r
`),s=!1,t=!1,l;a.on("response",u=>{let{headers:c}=u;s=c["transfer-encoding"]==="chunked"&&!c["content-length"]}),a.on("socket",u=>{let c=o(()=>{if(s&&!t){let p=new Error("Premature close");p.code="ERR_STREAM_PREMATURE_CLOSE",e(p)}},"onSocketClose"),h=o(p=>{t=bo.compare(p.slice(-5),r)===0,!t&&l&&(t=bo.compare(l.slice(-3),r.slice(0,3))===0&&bo.compare(p.slice(-2),r.slice(3))===0),l=p},"onData");u.prependListener("close",c),u.on("data",h),a.on("close",()=>{u.removeListener("close",c),u.removeListener("data",h)})})}o(Ey,"fixResponseChunkedTransferBadEnding");import{join as Ry}from"node:path";var So=Ga("SearchApiClient"),Pr=class extends Error{static{o(this,"SearchApiError")}status;suggestion;details;constructor(e,r,s,t){super(e),this.status=r,this.suggestion=s,this.details=t,this.name="SearchApiError"}},wo=class{static{o(this,"SearchApiClient")}config;constructor(e){this.config=e}async search(e){let r=Math.min(e.limit??this.config.defaultLimit,this.config.hardLimit),s={query:e.query,limit:r};e.threshold!==void 0?s.threshold=e.threshold:this.config.defaultThreshold!==void 0&&(s.threshold=this.config.defaultThreshold),e.artifact_types?.length&&(s.filters=s.filters||{},e.artifact_types.length===1?s.filters.artifactType=e.artifact_types[0]:s.filters.artifactType={$in:e.artifact_types}),e.filters?.foName&&(s.filters=s.filters||{},s.filters.foName=e.filters.foName);let t=`${this.config.searchApiBaseUrl}/api/v1/search`,l=new AbortController,u=setTimeout(()=>l.abort(),this.config.requestTimeoutMs);try{So.debug("Issuing search request",{url:t,body:s}),console.log("DEBUG: Full request body being sent to API:",JSON.stringify(s,null,2));let c=await _o(t,{method:"POST",headers:{"Content-Type":"application/json","X-API-Key":this.config.apiKey},body:JSON.stringify(s),signal:l.signal}),h=await xy(c);if(console.log("DEBUG: API response received:",JSON.stringify(h,null,2)),!c.ok){let g=h.error||`Search API responded with status ${c.status}`;throw new Pr(g,c.status,Ay(c.status),h)}if(!h.success||!h.data)throw new Pr(h.error||"Search API returned unsuccessful response",c.status,"Check the search query and try again.",h);let p=Array.isArray(h.data.results)?h.data.results:[],m=void 0,S=Ty(p.length);return{results:p.map(g=>{if(this.config.localAssetsPath&&g.filePath){let E=(g.filePath.startsWith("/")?g.filePath.substring(1):g.filePath).split("/"),_=Ry(this.config.localAssetsPath,...E);return{...g,fullLocalPath:_}}return g}),related:m,usage_instructions:S,localAssetsPath:this.config.localAssetsPath??"Not configured",raw:h}}catch(c){if(c instanceof Pr)throw So.error(c,{stage:"search-response"}),c;if(c instanceof Error&&c.name==="AbortError"){let p=new Pr(`Search request timed out after ${this.config.requestTimeoutMs}ms`,408,"Retry or increase FO_SEARCH_TIMEOUT_MS.");throw So.error(p),p}let h=new Pr("Unexpected error while querying search API",500,"Check network connectivity and FOINDEX_API_KEY configuration.",c instanceof Error?{message:c.message,stack:c.stack}:c);throw So.error(h),h}finally{clearTimeout(u)}}};async function xy(a){try{return await a.json()}catch(e){return{parseError:e instanceof Error?e.message:String(e)}}}o(xy,"safeJson");function Ty(a){return a>0?"Use file reading tools on fullLocalPath values to inspect artifact contents.":"No results found. Try broadening your query or removing filters."}o(Ty,"deriveUsage");function Ay(a){return a===401||a===403?"Verify FOINDEX_API_KEY is valid and has access to the FO-Index search service.":a===429?"Search API rate limit exceeded. Retry with backoff.":a>=500?"Search service reported an error. Retry later or contact support.":"Check request parameters and try again."}o(Ay,"suggestForStatus");var Cy=Ga("SearchTool"),Oy=f.enum(["Table","Form","Class","EDT","Enum","DataEntity","View","Query"]),ky=f.object({foName:f.string().optional().describe('Exact match filter for specific F&O artifact name (e.g., "CustTable", "SalesTable")')}).optional(),Df=f.object({query:f.string().min(1,"query is required"),artifact_types:f.array(Oy).nonempty().optional(),include_related:f.boolean().optional(),limit:f.number().int().positive().max(50).optional(),threshold:f.number().min(0).max(1).optional().describe("Minimum relevance score (0-1) to filter results"),filters:ky}),If=f.object({foName:f.string(),artifactType:f.string(),description:f.string().optional(),relevanceScore:f.number().optional(),fullLocalPath:f.string().optional(),foUrl:f.string().optional(),metadata:f.record(f.unknown()).optional()}),Wi=f.object({results:f.array(If),related:f.array(If).optional(),usage_instructions:f.string().optional(),localAssetsPath:f.string(),raw:f.unknown().optional()}),Dy="search_fo_artifacts";function Ff(a,e,r){a.registerTool(Dy,{title:"Search F&O Artifacts",description:"Semantic search over Microsoft Dynamics 365 Finance & Operations artifacts (tables, forms, classes, etc.).",inputSchema:Df.shape,outputSchema:Wi.shape},async s=>{let t=Df.parse(s),l=t.limit?Math.min(t.limit,r.hardLimit):void 0;try{let u=await e.search({...t,limit:l}),c=Wi.parse(u);return{content:[{type:"text",text:Fy(c.results.length,c.related?.length,c)}],structuredContent:c}}catch(u){return Iy(u,r)}})}o(Ff,"registerSearchTool");function Iy(a,e){return a instanceof Pr?{isError:!0,content:[{type:"text",text:`${a.message}
Suggestion: ${a.suggestion}`}],structuredContent:Wi.parse({results:[],usage_instructions:"Resolve the reported issue before retrying the search.",localAssetsPath:e.localAssetsPath??"Not configured",raw:a.details})}:(Cy.error("Unhandled error in search tool",a instanceof Error?{message:a.message}:a),{isError:!0,content:[{type:"text",text:"Unexpected error while running search_fo_artifacts tool. Check server logs for details."}]})}o(Iy,"handleToolError");function Fy(a,e,r){let s=[`Found ${a} primary artifacts.`];return e&&e>0&&s.push(`Included ${e} related artifacts.`),s.push("Use fullLocalPath directly to open files."),r&&(s.push(`

Detailed Results:`),s.push(JSON.stringify(r,null,2))),s.join(" ")}o(Fy,"formatSuccessMessage");var $f=`# MCP Tool Instructions: \`search_FO_artifacts\`

**AI Client Guide for D365 F&O Development Assistance**

---

## \u{1F3AF} Core Purpose

The \`search_FO_artifacts\` MCP tool searches **Microsoft Dynamics 365 Finance & Operations standard metadata** using semantic understanding. 

**Key Point:** This tool is an expert in **standard D365 artifacts only** - it does NOT index the user's custom code.

---

## \u2B50 THE GOLDEN PATH: Primary F&O Development Workflow

**This is THE way AI should assist with F&O/X++ development. Follow this workflow for EVERY coding request.**

### **The Default Workflow (ALWAYS Follow This):**

\`\`\`
\u250C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510
\u2502  USER REQUEST: "Add field to SalesTable form"              \u2502
\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518
                        \u2193
\u250C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510
\u2502  STEP 1: SEARCH STANDARD D365                               \u2502
\u2502  Tool: search_FO_artifacts                                  \u2502
\u2502  Find: What Microsoft implements                            \u2502
\u2502  Result: Discover all relevant artifacts                    \u2502
\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518
                        \u2193
\u250C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510
\u2502  STEP 2: READ STANDARD IMPLEMENTATION                       \u2502
\u2502  Tool: read_file(standardPath from results)                \u2502
\u2502  Learn: XML structure, patterns, naming conventions         \u2502
\u2502  Result: Understand HOW Microsoft does it                   \u2502
\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518
                        \u2193
\u250C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510
\u2502  STEP 3: SEARCH USER'S CODE (AUTOMATIC!)                   \u2502
\u2502  Tools: glob_file_search / codebase_search                  \u2502
\u2502  Find: User's existing customizations                       \u2502
\u2502  Result: Know what they already have                        \u2502
\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518
                        \u2193
\u250C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510
\u2502  STEP 4: READ USER'S CODE                                   \u2502
\u2502  Tool: read_file(userPath from search)                     \u2502
\u2502  Understand: Their style, structure, current state          \u2502
\u2502  Result: Context for adaptation                             \u2502
\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518
                        \u2193
\u250C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510
\u2502  STEP 5: SYNTHESIZE & GENERATE                              \u2502
\u2502  Combine: Standard pattern + User context                   \u2502
\u2502  Adapt: Microsoft's approach to user's project              \u2502
\u2502  Result: Code that works first time                         \u2502
\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518
                        \u2193
\u250C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510
\u2502  STEP 6: PRESENT WITH CONTEXT                               \u2502
\u2502  Show: Standard artifacts found                             \u2502
\u2502  Show: User's customizations (highlight with \u{1F527})            \u2502
\u2502  Show: Generated code with explanation                      \u2502
\u2502  Show: Why this approach (reference standard)               \u2502
\u2502  Result: User understands and can implement                 \u2502
\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518
\`\`\`

### **Why This Workflow Works:**

1. \u2705 **No Guessing** - AI reads actual D365 code
2. \u2705 **Always Current** - Uses user's installed version
3. \u2705 **Proven Patterns** - Follows Microsoft's implementation
4. \u2705 **Context-Aware** - Adapts to user's existing code
5. \u2705 **First-Time Success** - Code compiles and works immediately
6. \u2705 **Educational** - User learns while coding

### **\u26A0\uFE0F CRITICAL: Never Skip Steps 3 & 4**

**Common Mistake:**
\`\`\`
\u274C Search standard D365 \u2192 Generate code \u2192 Done
   (Misses user's existing extensions!)
\`\`\`

**Correct Approach:**
\`\`\`
\u2705 Search standard \u2192 Read standard \u2192 Search user's code \u2192 Read user's code \u2192 Generate
   (Complete context = Perfect result)
\`\`\`

### **Real Example of Golden Path:**

**User Request:** "What forms should I extend for SalesTable header field?"

**AI Following Golden Path:**

\`\`\`typescript
// STEP 1: Search Standard
search_FO_artifacts({
  query: "Forms that display SalesTable header information",
  artifact_types: ["Form"]
});
// Found: SalesTable, SalesTableListPage, SalesCreateOrder + 12 others

// STEP 2: Read Standard (Learn Pattern)
read_file(".../SalesTable.ApplicationSuite_Extension.xml");
/* Learned:
   - Header fields use Parent: TabHeaderSetup, Baseinfo, etc.
   - Control structure: AxFormExtensionControl \u2192 FormControl
   - DataSource: SalesTable (not SalesLine)
   - Naming: SalesTable_{FieldName}
*/

// STEP 3: Search User's Code (AUTOMATIC - don't wait for user to ask!)
glob_file_search("**/AxFormExtension/SalesTable*.xml");
// Found: Metadata/ARM/ARM/AxFormExtension/SalesTable.ARM.xml

// STEP 4: Read User's Code
read_file("Metadata/ARM/ARM/AxFormExtension/SalesTable.ARM.xml");
/* Discovered:
   - User already extends SalesTable form
   - Has buttons and line fields
   - Does NOT have header field controls yet
   - Uses ARM prefix for naming
*/

// STEP 5: Synthesize
// Combine: Microsoft's TabHeaderSetup pattern + User's ARM naming + Their existing extension

// STEP 6: Present
"## \u{1F4E6} Standard Forms (3 found)
1. SalesTable - Main form (PRIMARY)
2. SalesTableListPage - Grid view
3. SalesCreateOrder - Creation wizard

## \u{1F527} Your Customizations
\u2705 SalesTable.ARM.xml - Already extends main form
   - Currently: Buttons + line fields
   - Missing: Header field controls

\u26A0\uFE0F Not yet extended: SalesTableListPage, SalesCreateOrder

## \u{1F4A1} Recommendation
Add header field to existing SalesTable.ARM.xml:
\`\`\`xml
[Perfect XML based on Microsoft pattern + user's style]
\`\`\`

This follows Microsoft's pattern from ApplicationSuite_Extension.xml
and matches your ARM naming convention."
\`\`\`

**Result:** User gets working code that compiles first time, with full context and explanation.

---

## \u{1F4CB} Usage Protocol for AI Clients

### **STEP 1: Use This Tool For Standard D365 Exploration**

#### When to Use \u2705

- "What forms handle SalesTable?"
- "Show me pricing-related classes"
- "Find data entities for customer orders"
- Understanding standard D365 patterns
- Learning how Microsoft implements features
- Discovering which artifacts to extend

#### When NOT to Use \u274C

- Searching user's custom code (use workspace tools instead)
- Finding exact code snippets (use \`grep\`)
- Locating user's specific customizations

#### Query Best Practices

**\u2705 GOOD - Complete questions with context:**
\`\`\`
"What forms display or edit SalesTable sales order header information?"
"Which classes handle inventory reservation logic?"
"Find data entities related to purchase order processing"
\`\`\`

**\u274C BAD - Single keywords:**
\`\`\`
"SalesTable"
"inventory"
"forms"
\`\`\`

#### Artifact Type Filtering

\`\`\`typescript
// Focused search - single type
artifact_types: ["Form"]

// Related types - multiple
artifact_types: ["Table", "DataEntity"]

// Broad search - omit parameter
artifact_types: [] // searches all types
\`\`\`

**Available Artifact Types:**
- \`Table\` - Data tables
- \`Form\` - User interface forms
- \`Class\` - X++ classes
- \`EDT\` - Extended Data Types
- \`Enum\` - Enumerations
- \`DataEntity\` - Data entities
- \`View\` - Database views
- \`Query\` - AOT queries

---

### **STEP 2: Digest Tool Results**

#### Result Structure

\`\`\`json
{
  "foName": "SalesTable.Extension",
  "artifactType": "Form",
  "subType": "FormExtension",
  "module": "Foundation",
  "fullLocalPath": "C:\\\\Users\\\\...\\\\SalesTable.xml",
  "businessDomain": "Sales",
  "aiDescription": "Form purpose and functionality...",
  "aiUsageContext": "How business users interact with it...",
  "aiBusinessImpact": "Impact if misconfigured...",
  "configurationKey": "RetailBasic",
  "hasSourceCode": false,
  "methodCount": 0,
  "fieldCount": 0
}
\`\`\`

#### Key Fields to Present

| Field | Purpose | Action |
|-------|---------|--------|
| \`foName\` | Artifact identifier | Display prominently |
| \`artifactType\` | Type (Form, Table, Class, etc.) | Categorize results |
| \`subType\` | Extension vs base artifact | Note extensions |
| \`module\` | D365 module (Foundation, ApplicationSuite) | Show context |
| \`fullLocalPath\` | Absolute file path | Use for \`read_file\` |
| \`businessDomain\` | Business area (Sales, Inventory) | Group logically |
| \`aiDescription\` | What it does | Summarize for user |
| \`aiUsageContext\` | How users interact | Explain usage |
| \`configurationKey\` | Feature flag | Note requirements |

---

### **STEP 3: ALWAYS Follow Up With Workspace Search**

#### \u26A0\uFE0F CRITICAL PROTOCOL

**After EVERY \`search_FO_artifacts\` call, immediately search the workspace for custom code!**

This is NOT optional - it should be automatic behavior.

#### Standard Workflow

\`\`\`typescript
// 1. Search standard D365
const standardResults = search_FO_artifacts({
  query: "Forms that display SalesTable header",
  artifact_types: ["Form"]
});
// Returns: 15 standard forms

// 2. IMMEDIATELY search workspace for related customizations
const customResults = glob_file_search("**/AxFormExtension/SalesTable*.xml");
// Returns: User's SalesTable.ARM.xml, SalesTable.MyExtension.xml

// 3. Present combined view (see Step 6)
\`\`\`

#### Why This Matters

- User needs to know what they've ALREADY customized
- Prevents duplicate work
- Shows gaps in their customizations
- Provides complete context for recommendations

---

### **STEP 4: Choose Right Tool for Workspace Search**

#### Decision Matrix

| User's Code Type | Best Tool | Pattern Example |
|------------------|-----------|-----------------|
| **Form extensions** | \`glob_file_search\` | \`**/AxFormExtension/SalesTable*.xml\` |
| **Table extensions** | \`glob_file_search\` | \`**/AxTableExtension/CustTable*.xml\` |
| **Classes** | \`glob_file_search\` | \`**/AxClass/MyClass*.xml\` |
| **Data entities** | \`glob_file_search\` | \`**/AxDataEntityView/*Entity*.xml\` |
| **Conceptual search** | \`codebase_search\` | "How does user validate sales orders?" |
| **Exact field/method** | \`grep\` | \`pattern: "MyFieldName"\` |
| **All extensions** | \`glob_file_search\` | \`**/AxTableExtension/*.xml\` |

#### Common Search Patterns

\`\`\`typescript
// After finding standard form
glob_file_search("**/AxFormExtension/{FormName}*.xml")

// After finding standard table
glob_file_search("**/AxTableExtension/{TableName}*.xml")

// After finding standard class
glob_file_search("**/AxClass/{ClassName}*.xml")

// Generic search for artifact type in user's model
glob_file_search("**/Metadata/{ModelName}/{ModelName}/Ax{ArtifactType}/*.xml")
\`\`\`

#### Example Workflow

\`\`\`typescript
// User asks: "What forms should I extend for SalesTable header field?"

// Step 1: Standard search
search_FO_artifacts({
  query: "Forms that display or edit SalesTable header information",
  artifact_types: ["Form"]
});
// Returns: SalesTable, SalesTableListPage, SalesCreateOrder

// Step 2: Workspace search (AUTOMATIC - don't wait for user to ask)
glob_file_search("**/AxFormExtension/SalesTable*.xml");
// Returns: Metadata/ARM/ARM/AxFormExtension/SalesTable.ARM.xml

glob_file_search("**/AxFormExtension/SalesTableListPage*.xml");
// Returns: (none found)

glob_file_search("**/AxFormExtension/SalesCreateOrder*.xml");
// Returns: (none found)

// Step 3: Present combined results (see Step 6)
\`\`\`

---

### **STEP 5: When to Read Physical Files**

#### Read Standard D365 Files When:

- \u2705 User explicitly asks "show me how it's implemented"
- \u2705 Need to understand structure/pattern for extension
- \u2705 Validating search results before presenting
- \u2705 Learning best practices from Microsoft's implementation
- \u2705 User wants to see example code
- \u2705 Need to confirm field groups, controls, or methods

**Use \`fullLocalPath\` from tool results:**
\`\`\`typescript
// Tool returned:
{
  "fullLocalPath": "C:\\\\Users\\\\spark.chen\\\\AppData\\\\Local\\\\...\\\\SalesTable.Extension.xml"
}

// Read it:
read_file("C:\\\\Users\\\\spark.chen\\\\AppData\\\\Local\\\\...\\\\SalesTable.Extension.xml");
\`\`\`

#### Always Read User's Custom Files:

User's customizations are in the workspace - **ALWAYS read them** to show current state:

\`\`\`typescript
// After glob_file_search found: "Metadata/ARM/ARM/AxFormExtension/SalesTable.ARM.xml"
read_file("Metadata/ARM/ARM/AxFormExtension/SalesTable.ARM.xml");
// Show user what they currently have
\`\`\`

#### Don't Over-Read:

- \u274C Don't read all 15 standard forms unless specifically needed
- \u2705 Read 1-2 key examples to show patterns
- \u2705 Always read ALL of user's custom files found

---

### **STEP 6: Combine and Present Results**

#### Presentation Template

\`\`\`markdown
## \u{1F50D} Search Results: "{User's Question}"

### \u{1F4E6} Standard D365 Artifacts ({count})
Found {X} standard {artifact_type}(s):

1. **{foName}** ({module})
   - Purpose: {brief aiDescription}
   - Location: {module} module
   - Type: {artifactType} {subType ? \`(\${subType})\` : ''}

2. **{foName2}**
   ...

### \u{1F527} Your Customizations ({count})
Checking your workspace...

\u2705 **Found {Y} custom extension(s):**

1. **{fileName}** 
   - Path: \`{relativePath}\`
   - Extends: {baseArtifact}
   - Status: Already customized
   - [Show relevant code snippet from read_file]

\u26A0\uFE0F **Not Yet Extended:**
- {StandardArtifact1} - Consider extending if you need {reason}
- {StandardArtifact2} - ...

### \u{1F4A1} Analysis
{Compare standard vs custom, identify gaps, explain implications}

### \u{1F4CB} Recommended Next Steps
1. {Actionable step based on analysis}
2. {Next step}
3. {Follow-up considerations}
\`\`\`

#### Real Example Output

\`\`\`markdown
## \u{1F50D} Forms to Extend for SalesTable Header Field

### \u{1F4E6} Standard D365 Forms (3)
Found 3 core forms that display SalesTable header:

1. **SalesTable** (Foundation)
   - Purpose: Main sales order form for viewing/editing orders
   - Location: Foundation module
   - Type: Form
   - This is the PRIMARY form - all header fields should be added here

2. **SalesTableListPage** (Foundation)
   - Purpose: Sales order list/grid view
   - Location: Foundation module
   - Add columns here for visibility in list pages

3. **SalesCreateOrder** (Foundation)
   - Purpose: Sales order creation wizard
   - Include if field needed at creation time

### \u{1F527} Your Customizations (1)

\u2705 **Found 1 custom extension:**

**SalesTable.ARM.xml**
- Path: \`Metadata/ARM/ARM/AxFormExtension/SalesTable.ARM.xml\`
- Extends: SalesTable form
- Currently adds:
  - Custom button: \`ARM_SalesUpdateRemain\`
  - Line field: \`AM_EDIPrice\` (on SalesLine data source)
- \u26A0\uFE0F Does NOT yet have header field controls

\u26A0\uFE0F **Not Yet Extended:**
- \`SalesTableListPage\` - Consider if your header field should be visible in grid view
- \`SalesCreateOrder\` - Consider if field is needed during order creation

### \u{1F4A1} Analysis

You've already extended the SalesTable form for customizations, but only for:
- Button actions (update remain)
- Line-level fields (EDI price)

To add a **header field**, you should add controls to the same \`SalesTable.ARM.xml\` 
extension, but reference the \`SalesTable\` data source (not \`SalesLine\`).

Based on standard D365 patterns (from \`SalesTable.ApplicationSuite_Extension.xml\`),
header fields are typically added to groups like:
- \`TabHeaderSetup\` - for setup/configuration fields
- \`Baseinfo\` - for basic information fields
- \`GroupStatus\` - for status fields
- Custom groups under appropriate tabs

### \u{1F4CB} Recommended Next Steps

1. **Add header field to \`SalesTable.ARM.xml\`**
   - Add \`AxFormExtensionControl\` with your field
   - Set \`DataSource\` to \`SalesTable\` (header data source)
   - Choose appropriate \`Parent\` group (e.g., \`TabHeaderSetup\`, \`Baseinfo\`)
   - Position using \`PositionType\` and \`PreviousSibling\`

2. **Consider extending \`SalesTableListPage\`**
   - If users need to see this field in the order list
   - Add grid column to show the value

3. **Evaluate \`SalesCreateOrder\`**
   - If the field should be set when creating new orders
   - Add control to creation wizard

Would you like me to show you the exact XML pattern to add the header field?
\`\`\`

---

## \u{1F680} Proactive Behavior Checklist

### \u2B50 PRIMARY BEHAVIOR: Follow the Golden Path

**For EVERY F&O coding request, execute the complete 6-step workflow:**

1. \u2705 **Search standard D365** (search_FO_artifacts)
2. \u2705 **Read standard implementation** (read_file standard)
3. \u2705 **Search user's code** (glob_file_search/codebase_search) - **AUTOMATIC!**
4. \u2705 **Read user's code** (read_file user's files)
5. \u2705 **Synthesize solution** (combine standard + user context)
6. \u2705 **Present with full context** (standard + custom + explanation)

**This is NOT optional. This is THE workflow.**

---

### AI Client Should AUTOMATICALLY:

- \u2705 **Follow Golden Path for every request** - all 6 steps, every time
- \u2705 After \`search_FO_artifacts\`, **immediately** search workspace (Step 3)
- \u2705 **Read standard implementations** to learn patterns (Step 2)
- \u2705 **Read user's custom files** to understand context (Step 4)
- \u2705 Highlight user's custom code with \u{1F527} emoji or **bold**
- \u2705 Flag gaps: "Found standard X but you haven't customized it yet"
- \u2705 Show side-by-side comparison when relevant
- \u2705 Provide actionable next steps with code examples
- \u2705 Explain the "why" behind recommendations
- \u2705 Reference patterns from standard D365 when suggesting changes
- \u2705 Show WHERE pattern came from (which standard file)
- \u2705 Adapt Microsoft's patterns to user's naming/style

### AI Client Should NEVER:

- \u274C **Skip any step of the Golden Path** - especially Steps 3 & 4!
- \u274C Show only standard results without checking workspace
- \u274C Generate code without reading standard implementation first
- \u274C Generate code without checking user's existing customizations
- \u274C Wait for user to ask about their customizations
- \u274C Present results without analysis/recommendations
- \u274C Assume user knows what to do with the results
- \u274C Recommend creating new artifacts when extensions exist
- \u274C Guess at XML structure or X++ patterns
- \u274C Use outdated patterns instead of reading current code

---

## \u{1F3AF} Success Criteria

### A Complete Response Includes:

1. \u2705 **Standard D365 artifacts** from \`search_FO_artifacts\`
   - With context (module, purpose, type)
   
2. \u2705 **User's related customizations** from workspace search
   - What they've already done
   - What's missing
   
3. \u2705 **Clear highlighting** of custom vs standard
   - Visual distinction (emojis, formatting)
   
4. \u2705 **Gap analysis**
   - What user has vs what they need
   - Implications of gaps
   
5. \u2705 **Actionable recommendations**
   - Specific next steps
   - Code patterns/examples when needed
   
6. \u2705 **File paths** ready for next steps
   - Both standard (for learning) and custom (for editing)

---

## \u26A1 Quick Reference Commands

### Full Workflow Pattern

\`\`\`typescript
// 1. Search standard D365
search_FO_artifacts({
  query: "Complete question with context",
  artifact_types: ["Form", "Table"]  // Optional filter
});

// 2. IMMEDIATELY search workspace
glob_file_search("**/Ax{ArtifactType}/{BaseName}*.xml");

// Alternative workspace searches:
codebase_search({
  query: "Conceptual question about user's code",
  target_directories: ["Metadata/{ModelName}"]
});

grep({
  pattern: "FieldName|MethodName",
  path: "Metadata/{ModelName}"
});

// 3. Read files as needed
read_file(standardPath);  // If validation needed
read_file(customPath);    // Always read user's files

// 4. Present combined analysis with recommendations
\`\`\`

---

## \u{1F4DA} Common Scenarios

### Scenario 1: User Asks About Forms to Extend

\`\`\`typescript
// User: "What forms should I extend for a new SalesTable field?"

// 1. Standard search
search_FO_artifacts({
  query: "Forms that display SalesTable fields",
  artifact_types: ["Form"]
});

// 2. Workspace check
glob_file_search("**/AxFormExtension/SalesTable*.xml");
glob_file_search("**/AxFormExtension/SalesTableListPage*.xml");

// 3. Read user's existing extensions
read_file("Metadata/{Model}/{Model}/AxFormExtension/SalesTable.{Model}.xml");

// 4. Present: Standard forms + User's status + Recommendations
\`\`\`

### Scenario 2: User Asks How Microsoft Implements Something

\`\`\`typescript
// User: "How does Microsoft handle pricing calculations?"

// 1. Standard search
search_FO_artifacts({
  query: "Classes that handle pricing calculations",
  artifact_types: ["Class"]
});

// 2. Read example implementation
read_file(results[0].fullLocalPath);

// 3. Check if user has related customizations
codebase_search({
  query: "pricing calculation logic in user code",
  target_directories: ["Metadata"]
});

// 4. Present: Pattern from Microsoft + User's current approach (if any)
\`\`\`

### Scenario 3: User Wants to Understand a Standard Artifact

\`\`\`typescript
// User: "What does SalesFormLetter class do?"

// 1. Standard search
search_FO_artifacts({
  query: "SalesFormLetter class functionality and purpose",
  artifact_types: ["Class"]
});

// 2. Present AI description from tool results

// 3. Check if user extends it
glob_file_search("**/AxClass/SalesFormLetter*.xml");

// 4. Present: Standard purpose + User's extensions (if any)
\`\`\`

---

## \u{1F50D} Tool Limitations & Workarounds

### Limitations

1. **Does not index user's custom code**
   - Workaround: Use workspace search tools after every query

2. **Search limits on free tier**
   - Be mindful of search count
   - Use appropriate filters to reduce result sets

3. **Results from installed D365 version only**
   - Results reflect the local PackagesLocalDirectory version
   - May differ if user is on different D365 version

4. **No cross-reference to user customizations**
   - Workaround: AI client must do correlation manually

### Best Practices

- Start with focused queries using \`artifact_types\` filter
- Always follow up with workspace search
- Cache results mentally to avoid redundant searches
- Read files selectively (examples, not everything)
- Present synthesized information, not raw tool output

---

## \u{1F4DE} Integration with Other Tools

### Tool Composition Strategy

\`\`\`
search_FO_artifacts (Standard D365)
    \u2193
glob_file_search / codebase_search (User's code)
    \u2193
read_file (Both standard & custom)
    \u2193
grep (Detailed code search if needed)
    \u2193
search_replace / write (Make changes)
\`\`\`

### Example: Complete Development Workflow

\`\`\`typescript
// User: "Add a new field to SalesTable and show it on forms"

// Phase 1: Discovery
search_FO_artifacts("Forms displaying SalesTable");
glob_file_search("**/AxTableExtension/SalesTable*.xml");
glob_file_search("**/AxFormExtension/SalesTable*.xml");

// Phase 2: Validation
read_file(userTableExtension);
read_file(userFormExtension);
read_file(standardFormExample); // To show pattern

// Phase 3: Guidance
// Present: Where to add field + example XML + next steps

// Phase 4: Implementation (if user requests)
search_replace(userTableExtension, oldXml, newFieldXml);
search_replace(userFormExtension, oldXml, newControlXml);

// Phase 5: Verification
read_lints([modifiedFiles]);
\`\`\`

---

## \u{1F4A1} Tips for Effective Use

1. **Think in Two Layers**: Standard + Custom
   - Every query should trigger both
   
2. **Context is Key**: 
   - Better to search "forms for SalesTable header" than just "SalesTable forms"
   
3. **Artifact Types Matter**:
   - Use filters to avoid overwhelming results
   
4. **Read Selectively**:
   - Read standard files for patterns
   - Read ALL custom files for current state
   
5. **Present Actionable Insights**:
   - Don't just dump results
   - Synthesize, compare, recommend
   
6. **Leverage AI Metadata**:
   - Tool provides rich business context
   - Use aiDescription, aiUsageContext, aiBusinessImpact
   
7. **Follow Standard Patterns**:
   - Microsoft's implementations are the blueprint
   - Show users how to follow the same patterns

---

## \u{1F393} Learning Resources

### Understanding Tool Results

- \`businessDomain\`: Groups related artifacts (Sales, Inventory, Purchasing)
- \`module\`: Shows where code lives (Foundation, ApplicationSuite, etc.)
- \`configurationKey\`: Indicates feature flags that enable/disable functionality
- \`aiDescription\`: Business purpose - explain this to user
- \`aiUsageContext\`: How end-users interact - important for UX decisions
- \`aiBusinessImpact\`: What breaks if misconfigured - use for risk assessment

### D365 Extension Patterns

Standard extensions follow patterns:
- \`{ArtifactName}.{Extension/Module}\` naming
- Extensions reference base artifact
- Use form extension controls with Parent, PositionType, PreviousSibling
- Table extensions add fields to field list
- Class extensions use \`[ExtensionOf(classStr(...))]\`

Observe these patterns in standard results and guide users to follow them.

---

## \u{1F4DD} Summary

### \u2B50 The Golden Path is THE Way

**This is the ONLY correct workflow for F&O development assistance:**

\`\`\`
Search Standard \u2192 Read Standard \u2192 Search User \u2192 Read User \u2192 Synthesize \u2192 Present
\`\`\`

Every other approach results in:
- \u274C Code that doesn't compile
- \u274C Missed user customizations
- \u274C Guessed patterns instead of proven ones
- \u274C Frustrated developers
- \u274C Wasted time

**The Golden Path results in:**
- \u2705 Code that compiles first time
- \u2705 Adapts to user's existing code
- \u2705 Follows Microsoft's proven patterns
- \u2705 Happy, productive developers
- \u2705 Time saved

### Quick Checklist - The Golden Path 6 Steps

Before responding to ANY F&O coding request:

- [ ] \u2705 **Step 1:** Searched standard D365 with \`search_FO_artifacts\`
- [ ] \u2705 **Step 2:** Read standard implementation to learn patterns
- [ ] \u2705 **Step 3:** Searched workspace for related customizations
- [ ] \u2705 **Step 4:** Read user's custom files for context
- [ ] \u2705 **Step 5:** Synthesized solution (standard + user context)
- [ ] \u2705 **Step 6:** Presented with full context:
  - [ ] Standard artifacts found
  - [ ] User's customizations (with \u{1F527})
  - [ ] Gap analysis
  - [ ] Generated code
  - [ ] Explanation of why/how
  - [ ] Next steps

**If you skipped ANY step, you did it wrong. Start over.**

---

**Version:** 1.0  
**Last Updated:** 2025-10-08  
**Tool:** search_FO_artifacts MCP Server  
**Audience:** AI Clients / Orchestrators working with D365 F&O developers

`;var Sa=Ga("Server");async function $y(){let a;try{a=Yd()}catch(t){if(t instanceof Es){Sa.error(t.message),process.exitCode=1;return}Sa.error(t instanceof Error?t:String(t)),process.exitCode=1;return}let e=new ao({name:a.serverName,version:a.serverVersion},{instructions:Ly(a.localAssetsPath)}),r=new wo(a);Ff(e,r,a),e.server.oninitialized=()=>{Sa.info("Client initialization completed.")};let s=new no;await e.connect(s),Sa.info("fo-semantic-mcp server connected over stdio."),process.on("SIGINT",async()=>{Sa.info("Received SIGINT, shutting down."),await e.close(),process.exit(0)}),process.on("SIGTERM",async()=>{Sa.info("Received SIGTERM, shutting down."),await e.close(),process.exit(0)})}o($y,"start");function Ly(a){let e=$f;return a?(e=e.replace(/Local F&O assets path: `\[Will be configured\]`/g,`Local F&O assets path: \`${a}\``),e=e.replace(/fullLocalPath: \[Available when FO_LOCAL_ASSETS_PATH is configured\]/g,`fullLocalPath: Full path to XML file (configured: ${a})`)):(e=e.replace(/Local F&O assets path: `\[Will be configured\]`/g,"Local F&O assets path: `NOT CONFIGURED - Set FO_LOCAL_ASSETS_PATH environment variable`"),e=e.replace(/fullLocalPath: \[Available when FO_LOCAL_ASSETS_PATH is configured\]/g,"fullLocalPath: NOT AVAILABLE - Configure FO_LOCAL_ASSETS_PATH to read artifact XML files")),e}o(Ly,"buildInstructions");$y().catch(a=>{Sa.error("Fatal error starting MCP server",a instanceof Error?{message:a.message,stack:a.stack}:a),process.exit(1)});
/*! Bundled license information:

uri-js/dist/es5/uri.all.js:
  (** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js *)

web-streams-polyfill/dist/ponyfill.es2018.js:
  (**
   * @license
   * web-streams-polyfill v3.3.3
   * Copyright 2024 Mattias Buelens, Diwank Singh Tomer and other contributors.
   * This code is released under the MIT license.
   * SPDX-License-Identifier: MIT
   *)

fetch-blob/index.js:
  (*! fetch-blob. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> *)

formdata-polyfill/esm.min.js:
  (*! formdata-polyfill. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> *)

node-domexception/index.js:
  (*! node-domexception. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> *)
*/
